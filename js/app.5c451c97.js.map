{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/CsStory.vue?da29","webpack:///./src/App.vue?7f9e","webpack:///src/App.vue","webpack:///./src/App.vue?a37b","webpack:///./src/App.vue?180a","webpack:///./src/components/CsLoadStoryForm.vue?b430","webpack:///src/components/CsLoadStoryForm.vue","webpack:///./src/components/CsLoadStoryForm.vue?c0d5","webpack:///./src/components/CsLoadStoryForm.vue?d9ab","webpack:///./src/components/CsScreen.vue?0e31","webpack:///./src/components/CsStory.vue?ac0e","webpack:///src/components/CsStory.vue","webpack:///./src/components/CsStory.vue?3f42","webpack:///./src/components/CsStory.vue?7a84","webpack:///./src/components/CsMap.vue?e538","webpack:///src/components/CsMap.vue","webpack:///./src/components/CsMap.vue?110c","webpack:///./src/components/CsMap.vue?55d9","webpack:///src/components/CsScreen.vue","webpack:///./src/components/CsScreen.vue?8cf6","webpack:///./src/components/CsScreen.vue?fdca","webpack:///./src/router.js","webpack:///./src/store/store.helpers.js","webpack:///./src/store/store.features.js","webpack:///./src/store/mutations.js","webpack:///./src/store/store.story.js","webpack:///./src/store/store.track.js","webpack:///./src/store/store.js","webpack:///./src/main.js","webpack:///./src/App.vue?3310","webpack:///./src/components/CsLoadStoryForm.vue?8b19","webpack:///./src/components/CsMap.vue?7793","webpack:///./src/components/CsScreen.vue?f706"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","staticRenderFns","mounted","track","url","story","features","$router","computed","$store","state","component","_v","availableStories","on","handleStorySelect","model","callback","$$v","currentStory","expression","_l","storyName","_e","trackUrl","storyUrl","featuresUrl","disabledSubmit","handleSubmit","undefined","methods","dispatch","urlPayload","ready","staticClass","ref","_s","header","domProps","sanitize","onTextClicked","class","bbox","$event","onBboxHovered","onBboxLeft","onBboxClicked","refInFor","scrollTimeout","scrollTimeoutID","highlightedFeature","shouldScrollToFeature","watch","scroll","resetHighlightedLinks","setHighlightedLink","$scrollTo","elm","container","offset","$sanitize","txt","localName","attributes","getNamedItem","map","center","zoom","baseLayer","hikingOverlay","labelsOverlay","trackOutsideBbox","trackInsideBbox","trackOptions","style","plain","inBbox","bboxHovered","bboxHoveredDifferentFromCurrentBbox","bboxOptions","hovered","selected","markerOptions","highlighted","color","fillOpacity","geometry","coordinates","common","radius","weight","featureClicked","f","properties","id","components","LCircleMarker","LGeoJson","LMap","LTileLayer","LRectangle","bounds","edgeMarker","edge","icon","L","iconUrl","iconRetinaUrl","shadowUrl","iconSize","iconAnchor","popupAnchor","tooltipAnchor","shadowSize","fillColor","dashArray","feature","$refs","csmap","mapObject","getBounds","getCenter","flyTo","$nextTick","featuresInsideBbox","filter","getters","flyToBounds","addLayer","removeLayer","CsStory","CsMap","PulseLoader","readyAndNotDownloadedYet","Vue","use","Router","routes","path","CsScreen","CsLoadStoryForm","base","process","last","xs","set","val","setPath","obj","reduce","acc","x","actions","loadFeatures","commit","axios","console","log","getFeatureById","find","mutations","setFeatures","featuresModule","namespaced","RESET_HIGHLIGHTED_LINK","SET_BBOX","SET_BBOX_HOVERED","SET_FEATURES_URL","SET_HIGHLIGHTED_FEATURE","SET_SHOULD_SCROLL_TO_FEATURE","SET_STORY_NAME","SET_STORY_URL","SET_TRACK_URL","SET_STORY","SET_TRACK","root","resetHighlightedLink","loadText","storyModule","turf","booleanPointInPolygon","featureCollection","lineSplit","lineString","point","pointsWithinPolygon","trackModule","loadTrack","bboxGeoJson","rootState","rectangle","toGeoJSON","fc","pointsInsideBbox","trackBboxRelation","relation","ALLOWED_RELATIONS","includes","Error","join","parts","forEach","part","split","oddPair","splitedPart","pairComp","Vuex","LOCALE_STORAGE_KEY","vuexLocal","VuexPersistence","storage","localStorage","strictMode","reducer","saveState","currentStorage","JSON","parse","getItem","item","setItem","stringify","restoreState","plugins","plugin","baseState","setBbox","payload","setBboxHovered","setHighlightedFeature","setShouldScrollToFeature","should","setStoryName","setUrls","loadStory","RESTORE_MUTATION","document","querySelectorAll","classList","remove","highlightedId","highlightedElement","add","strict","config","productionTip","VueLogger","VueScrollTo","VueSanitize","allowedTags","allowedAttributes","router","store","Store","render","h","App","$mount"],"mappings":"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","file":"js/app.5c451c97.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/cartostory-frontend/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsStory.vue?vue&type=style&index=0&id=3e645450&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsStory.vue?vue&type=style&index=0&id=3e645450&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-container',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nexport default {\n  name: 'app',\n  mounted() {\n    if (!this.track.data.url || !this.story.data.url || !this.features.data.url) {\n      this.$router.push('/load');\n    }\n  },\n  computed: {\n    features() {\n      return this.$store.state.features;\n    },\n    track() {\n      return this.$store.state.track;\n    },\n    story() {\n      return this.$store.state.story;\n    },\n  },\n};\n</script>\n\n<template>\n  <el-container id=\"app\">\n    <router-view/>\n  </el-container>\n</template>\n\n<style lang=\"scss\">\n  html,\n  body,\n  #screen,\n  #app {\n    height: 100%;\n    overflow-y: hidden;\n    margin: 0;\n    padding: 0;\n  }\n\n  #app {\n    color: #2c3e50;\n  }\n\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=57ef128c&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-main',[_c('el-row',[_c('el-col',{attrs:{\"span\":10,\"offset\":7}},[_c('h1',[_vm._v(\"Cartostory\")]),_c('el-form',{attrs:{\"label-width\":\"120px\"}},[(_vm.availableStories.length > 0)?_c('el-form-item',{attrs:{\"label\":\"Načíst příběh\"}},[_c('el-select',{attrs:{\"placeholder\":\"Příběh\"},on:{\"change\":_vm.handleStorySelect},model:{value:(_vm.currentStory),callback:function ($$v) {_vm.currentStory=$$v},expression:\"currentStory\"}},_vm._l((_vm.availableStories),function(story){return _c('el-option',{key:story.storyName,attrs:{\"label\":story.storyName,\"value\":story.storyName}})}),1)],1):_vm._e(),_c('el-form-item',{attrs:{\"label\":\"Název příběhu\"}},[_c('el-input',{attrs:{\"type\":\"text\"},model:{value:(_vm.storyName),callback:function ($$v) {_vm.storyName=$$v},expression:\"storyName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"URL trasy\"}},[_c('el-input',{attrs:{\"type\":\"text\"},model:{value:(_vm.trackUrl),callback:function ($$v) {_vm.trackUrl=$$v},expression:\"trackUrl\"}})],1),_c('el-form-item',{attrs:{\"label\":\"URL příběhu\"}},[_c('el-input',{attrs:{\"type\":\"text\"},model:{value:(_vm.storyUrl),callback:function ($$v) {_vm.storyUrl=$$v},expression:\"storyUrl\"}})],1),_c('el-form-item',{attrs:{\"label\":\"URL míst\"}},[_c('el-input',{attrs:{\"type\":\"text\"},model:{value:(_vm.featuresUrl),callback:function ($$v) {_vm.featuresUrl=$$v},expression:\"featuresUrl\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"disabled\":_vm.disabledSubmit,\"type\":\"primary\"},on:{\"click\":_vm.handleSubmit}},[_vm._v(\"Načíst\")])],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nexport default {\n  name: 'CsLoadStoryForm',\n  data() {\n    return {\n      currentStory: undefined,\n      trackUrl: undefined,\n      storyName: undefined,\n      storyUrl: undefined,\n      featuresUrl: undefined,\n    };\n  },\n  computed: {\n    availableStories() {\n      return this.$store.state.availableStories;\n    },\n    disabledSubmit() {\n      return !this.trackUrl || !this.storyUrl || !this.featuresUrl || !this.storyName;\n    },\n  },\n  methods: {\n    handleSubmit() {\n      const urlPayload = {\n        trackUrl: this.trackUrl,\n        storyUrl: this.storyUrl,\n        featuresUrl: this.featuresUrl,\n      };\n      this.$store.dispatch('setUrls', urlPayload);\n      this.$store.dispatch('setStoryName', this.storyName);\n      this.$store.dispatch('loadStory');\n      this.$router.push('/');\n    },\n    handleStorySelect(event) {\n      const story = this.availableStories.find(story => story.storyName === this.currentStory);\n\n      if (story) {\n        this.featuresUrl = story.featuresUrl;\n        this.storyUrl = story.storyUrl;\n        this.storyName = story.storyName;\n        this.trackUrl = story.trackUrl;\n      }\n    },\n  }\n};\n</script>\n\n<template>\n  <el-main>\n    <el-row>\n      <el-col :span=\"10\" :offset=\"7\">\n        <h1>Cartostory</h1>\n        <el-form label-width=\"120px\">\n          <el-form-item v-if=\"availableStories.length > 0\" label=\"Načíst příběh\">\n            <el-select placeholder=\"Příběh\" v-model=\"currentStory\" @change=\"handleStorySelect\">\n              <el-option\n                v-for=\"story in availableStories\"\n                :key=\"story.storyName\"\n                :label=\"story.storyName\"\n                :value=\"story.storyName\"\n                ></el-option>\n            </el-select>\n          </el-form-item>\n\n          <el-form-item label=\"Název příběhu\">\n            <el-input v-model=\"storyName\" type=\"text\"></el-input>\n          </el-form-item>\n\n          <el-form-item label=\"URL trasy\">\n            <el-input v-model=\"trackUrl\" type=\"text\"></el-input>\n          </el-form-item>\n\n          <el-form-item label=\"URL příběhu\">\n            <el-input v-model=\"storyUrl\" type=\"text\"></el-input>\n          </el-form-item>\n\n          <el-form-item label=\"URL míst\">\n            <el-input v-model=\"featuresUrl\" type=\"text\"></el-input>\n          </el-form-item>\n\n          <el-form-item>\n            <el-button :disabled=\"disabledSubmit\" type=\"primary\" @click=\"handleSubmit\">Načíst</el-button>\n          </el-form-item>\n        </el-form>\n      </el-col>\n    </el-row>\n  </el-main>\n  <!--<div class=\"container\">-->\n    <!--<h1>Cartostory</h1>-->\n    <!--<div v-if=\"availableStories.length > 0\" class=\"form-block\">-->\n      <!--<label>existing story:</label>-->\n      <!--<select v-model=\"currentStory\" @change=\"handleStorySelect\">-->\n        <!--<option v-for=\"story in availableStories\">{{ story.storyName }}</option>-->\n      <!--</select>-->\n    <!--</div>-->\n    <!--<div class=\"form-block\">-->\n      <!--<label>story name:</label>-->\n      <!--<input v-model=\"storyName\" type=\"text\">-->\n    <!--</div>-->\n    <!--<div class=\"form-block\">-->\n      <!--<label>track file URL:</label>-->\n      <!--<input v-model=\"trackUrl\" type=\"text\">-->\n    <!--</div>-->\n    <!--<div class=\"form-block\">-->\n      <!--<label>story file URL:</label>-->\n      <!--<input v-model=\"storyUrl\" type=\"text\">-->\n    <!--</div>-->\n    <!--<div class=\"form-block\">-->\n      <!--<label>features file URL:</label>-->\n      <!--<input v-model=\"featuresUrl\" type=\"text\">-->\n    <!--</div>-->\n    <!--<div class=\"form-block\">-->\n      <!--<button @click=\"onSubmit\">Load</button>-->\n    <!--</div>-->\n  <!--</div>-->\n</template>\n\n<style scoped>\n.el-form {\n  box-shadow: 0 2px 4px rgba(0, 0, 0, .12), 0 0 6px rgba(0, 0, 0, .04);\n  padding: 2rem;\n}\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsLoadStoryForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsLoadStoryForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CsLoadStoryForm.vue?vue&type=template&id=175292f8&scoped=true&\"\nimport script from \"./CsLoadStoryForm.vue?vue&type=script&lang=js&\"\nexport * from \"./CsLoadStoryForm.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CsLoadStoryForm.vue?vue&type=style&index=0&id=175292f8&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"175292f8\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-container',{attrs:{\"id\":\"screen\"}},[(!_vm.ready)?_c('pulse-loader',{staticClass:\"spinner\",attrs:{\"color\":\"#2c3e50\"}}):_vm._e(),(_vm.ready)?_c('el-col',{attrs:{\"span\":12}},[_c('cs-map')],1):_vm._e(),(_vm.ready)?_c('el-col',{attrs:{\"span\":12}},[_c('cs-story')],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.story.story)?_c('div',{ref:\"story\",staticClass:\"cs-story\"},[_c('router-link',{staticClass:\"header-link\",attrs:{\"title\":\"Nahrát jiný příběh\",\"to\":\"/load\"}},[_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"plain\",\"icon\":\"el-icon-plus\",\"circle\":\"\"}})],1),(_vm.story.story.header)?_c('section',[_c('header',[_c('h1',[_vm._v(_vm._s(_vm.story.story.header))]),_c('div',{staticClass:\"perex\"},_vm._l((_vm.story.story.perex),function(p){return _c('p',{staticClass:\"sanitized\",domProps:{\"innerHTML\":_vm._s(_vm.sanitize(p))},on:{\"click\":_vm.onTextClicked}},[_vm._v(_vm._s(p))])}),0)]),_c('section',_vm._l((_vm.story.story.sections),function(s){return _c('section',{class:{\n        'bbox-section': s.bbox, 'bbox-section__active': s.bbox === _vm.bbox },attrs:{\"data-bbox\":s.bbox},on:{\"mouseenter\":function($event){return _vm.onBboxHovered(s.bbox)},\"mouseleave\":_vm.onBboxLeft}},[(s.bbox)?_c('el-button',{attrs:{\"title\":\"Vycentrovat v mapě\",\"size\":\"mini\",\"type\":\"plain\",\"icon\":\"el-icon-full-screen\",\"circle\":\"\"},on:{\"click\":function($event){return _vm.onBboxClicked(s.bbox)}}}):_vm._e(),_c('h2',[_vm._v(_vm._s(s.header))]),_c('div',_vm._l((s.text),function(p){return _c('p',{ref:\"cstext\",refInFor:true,staticClass:\"sanitized\",domProps:{\"innerHTML\":_vm._s(_vm.sanitize(p))},on:{\"click\":_vm.onTextClicked}},[_vm._v(_vm._s(p))])}),0)],1)}),0)]):_vm._e()],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div v-if=\"story.story\" ref=\"story\" class=\"cs-story\">\n    <router-link title=\"Nahrát jiný příběh\" class=\"header-link\" to=\"/load\">\n      <el-button size=\"mini\" type=\"plain\" icon=\"el-icon-plus\" circle></el-button>\n    </router-link>\n    <section v-if=\"story.story.header\">\n      <header>\n        <h1>{{ story.story.header }}</h1>\n        <div class=\"perex\">\n          <p @click=\"onTextClicked\" class=\"sanitized\" v-for=\"p in story.story.perex\" v-html=\"sanitize(p)\">{{ p }}</p>\n        </div>\n      </header>\n      <section>\n        <section @mouseenter=\"onBboxHovered(s.bbox)\" @mouseleave=\"onBboxLeft\" v-bind:class=\"{\n          'bbox-section': s.bbox, 'bbox-section__active': s.bbox === bbox }\" v-for=\"s in story.story.sections\" :data-bbox=\"s.bbox\">\n          <el-button title=\"Vycentrovat v mapě\" @click=\"onBboxClicked(s.bbox)\" v-if=\"s.bbox\" size=\"mini\" type=\"plain\" icon=\"el-icon-full-screen\" circle></el-button>\n          <h2>{{ s.header }}</h2>\n          <div>\n            <p ref=\"cstext\" @click=\"onTextClicked\" class=\"sanitized\" v-for=\"p in s.text\" v-html=\"sanitize(p)\">{{ p }}</p>\n          </div>\n        </section>\n      </section>\n    </section>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      scrollTimeout: 250,\n      scrollTimeoutID: null,\n    };\n  },\n  computed: {\n    bbox() {\n      return this.$store.state.bbox;\n    },\n    highlightedFeature() {\n      return this.$store.state.highlightedFeature;\n    },\n    story() {\n      return this.$store.state.story.data;\n    },\n    shouldScrollToFeature() {\n      return this.$store.state.shouldScrollToFeature;\n    }\n  },\n  watch: {\n    highlightedFeature() {\n      if (this.shouldScrollToFeature) {\n        this.scroll();\n      }\n\n      this.resetHighlightedLinks();\n      this.setHighlightedLink();\n    },\n  },\n  methods: {\n    onBboxClicked(bbox) {\n      this.$store.dispatch('setBbox', null);\n      this.$store.dispatch('setBbox', bbox);\n    },\n    onBboxHovered(bbox) {\n      this.$store.dispatch('setBboxHovered', null);\n      this.$store.dispatch('setBboxHovered', bbox);\n    },\n    onBboxLeft() {\n      this.$store.dispatch('setBboxHovered', null);\n    },\n    scroll() {\n      const id = this.highlightedFeature.properties.id;\n      const elm = document.querySelectorAll(`[data-cs-id='${id}']`)[0];\n      this.$scrollTo(elm, undefined, {\n        container: '#story-container',\n        offset: -50,\n      });\n    },\n    resetHighlightedLinks() {\n      this.$store.dispatch('story/resetHighlightedLink');\n    },\n    setHighlightedLink() {\n      this.$store.dispatch('story/setHighlightedLink');\n    },\n    sanitize(txt) {\n      return this.$sanitize(txt);\n    },\n    /**\n     * Toggle highlight class on click and set the new highlighted link.\n     * Note the link click shifts the map center to the newly highlighted feature.\n     * @todo solve duplicate links\n     * @param {object} e\n     */\n    onTextClicked(e) {\n      const t = e.target;\n\n      if (t.localName !== 'a' || !t.attributes.getNamedItem('data-cs-id')) {\n        return;\n      }\n\n      const id = t.attributes.getNamedItem('data-cs-id').value;\n      const highlightedFeature = this.$store.state.features.data.features.find(f => f.properties.id == id);\n\n      this.resetHighlightedLinks();\n\n      if (highlightedFeature) {\n        this.$store.dispatch('setHighlightedFeature', highlightedFeature);\n        this.$store.dispatch('setShouldScrollToFeature', false);\n        this.setHighlightedLink();\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n  .cs-story {\n    height: 100%;\n    overflow-y: scroll;\n    padding: 0 2rem;\n  }\n\n  header,\n  section {\n    margin-top: 1rem;\n    padding-left: .5rem;\n    padding-right: .5rem;\n  }\n\n  .el-button {\n    float: right;\n    margin-top: .5rem;\n  }\n\n  .header-link {\n    font-size: x-small;\n    position: absolute;\n    top: .5rem;\n    right: 1.5rem;\n  }\n\n  .bbox-section {\n    border: 2px dashed #DCDFE6;\n  }\n\n  .bbox-section:hover {\n    border-color: #bbb;\n  }\n\n  .bbox-section__active,\n  .bbox-section__active:hover\n  {\n    border-color: #42b983;\n  }\n\n  /* v-html needs this syntax to work - see https://medium.com/@brockreece/scoped-styles-with-v-html-c0f6d2dc5d8e */\n  .sanitized >>> a {\n    color: #F56C6C;\n    cursor: pointer;\n    text-decoration: underline;\n  }\n\n  .sanitized >>> a:hover {\n    color: #bbb;\n  }\n\n  .sanitized >>> .highlighted,\n  .sanitized >>> .highlighted:hover {\n    background-color: #F56C6C;\n    color: white;\n  }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsStory.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsStory.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CsStory.vue?vue&type=template&id=3e645450&scoped=true&\"\nimport script from \"./CsStory.vue?vue&type=script&lang=js&\"\nexport * from \"./CsStory.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CsStory.vue?vue&type=style&index=0&id=3e645450&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3e645450\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"cs-map\"},[_c('div',{attrs:{\"id\":\"cs-map-container\"}},[_c('l-map',{ref:\"csmap\",attrs:{\"center\":_vm.map.center,\"zoom\":_vm.map.zoom}},[_c('l-tile-layer',{attrs:{\"url\":_vm.map.baseLayer}}),_c('l-tile-layer',{attrs:{\"url\":_vm.map.hikingOverlay,\"layer-type\":\"overlay\",\"opacity\":0.7}}),_c('l-tile-layer',{attrs:{\"url\":_vm.map.labelsOverlay,\"layer-type\":\"overlay\"}}),(!_vm.trackOutsideBbox && !_vm.trackInsideBbox)?_c('l-geo-json',{ref:\"cstrack\",attrs:{\"geojson\":_vm.track.track,\"options\":_vm.trackOptions.style.plain}}):_vm._e(),(_vm.trackInsideBbox)?_c('l-geo-json',{ref:\"cstrack\",attrs:{\"geojson\":_vm.trackInsideBbox,\"options\":_vm.trackOptions.style.inBbox}}):_vm._e(),(_vm.trackOutsideBbox)?_c('l-geo-json',{ref:\"cstrack\",attrs:{\"geojson\":_vm.trackOutsideBbox,\"options\":_vm.trackOptions.style.plain}}):_vm._e(),(_vm.bboxHovered && _vm.bboxHoveredDifferentFromCurrentBbox)?_c('l-rectangle',{attrs:{\"bounds\":_vm.bboxHovered,\"l-style\":_vm.bboxOptions.hovered.style}}):_vm._e(),(_vm.bbox)?_c('l-rectangle',{attrs:{\"bounds\":_vm.bbox,\"l-style\":_vm.bboxOptions.selected.style}}):_vm._e(),(_vm.highlightedFeature)?_c('l-circle-marker',{attrs:{\"color\":_vm.markerOptions.style.highlighted.color,\"fill-color\":_vm.markerOptions.style.highlighted.color,\"fill-opacity\":_vm.markerOptions.style.highlighted.fillOpacity,\"latLng\":[_vm.highlightedFeature.geometry.coordinates[1], _vm.highlightedFeature.geometry.coordinates[0]],\"radius\":_vm.markerOptions.style.common.radius,\"weight\":_vm.markerOptions.style.common.weight},on:{\"click\":function($event){return _vm.featureClicked(_vm.highlightedFeature)}}}):_vm._e(),_vm._l((_vm.features),function(f){return _c('l-circle-marker',{key:f.properties.id,attrs:{\"color\":_vm.markerOptions.style.plain.color,\"fill-color\":_vm.markerOptions.style.plain.color,\"fill-opacity\":_vm.markerOptions.style.plain.fillOpacity,\"latLng\":[f.geometry.coordinates[1], f.geometry.coordinates[0]],\"radius\":_vm.markerOptions.style.common.radius,\"weight\":_vm.markerOptions.style.common.weight},on:{\"click\":function($event){return _vm.featureClicked(f)}}})}),_vm._l((_vm.featuresInsideBbox),function(f){return _c('l-circle-marker',{key:f.properties.id,attrs:{\"color\":_vm.markerOptions.style.inBbox.color,\"fill-color\":_vm.markerOptions.style.inBbox.color,\"fill-opacity\":_vm.markerOptions.style.inBbox.fillOpacity,\"latLng\":[f.geometry.coordinates[1], f.geometry.coordinates[0]],\"radius\":_vm.markerOptions.style.common.radius,\"weight\":_vm.markerOptions.style.common.weight},on:{\"click\":function($event){return _vm.featureClicked(f)}}})})],2)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport {\n  LCircleMarker,\n  LGeoJson,\n  LMap,\n  LTileLayer,\n  LRectangle\n} from 'vue2-leaflet';\nimport * as LEdgeMarker from 'leaflet-edge-marker';\n\nrequire('../../node_modules/leaflet/dist/leaflet.css');\n\nexport default {\n  name: 'CsMap',\n  components: {\n    LCircleMarker,\n    LGeoJson,\n    LMap,\n    LTileLayer,\n    LRectangle,\n  },\n  data() {\n    return {\n      map: {\n        bounds: null,\n        center: [50, 19],\n        baseLayer: 'https://api.mapbox.com/styles/v1/cartostory/cjugqcypf27581gnry4y59lxy/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoiY2FydG9zdG9yeSIsImEiOiJjanQycXVyZDcxeXZqM3lxeDNvcW81NWJpIn0.hfvoqNSy7dT0yviVhNcDMg',\n        hikingOverlay: 'http://tile.mtbmap.cz/overlay_hiking/{z}/{x}/{y}.png',\n        labelsOverlay: 'https://api.mapbox.com/styles/v1/cartostory/cjugqfe8r1lhh1ftgrmr7v9zj/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoiY2FydG9zdG9yeSIsImEiOiJjanQycXVyZDcxeXZqM3lxeDNvcW81NWJpIn0.hfvoqNSy7dT0yviVhNcDMg',\n        zoom: 8,\n        edgeMarker: null,\n      },\n      markerOptions: {\n        style: {\n          common: {\n            radius: 8,\n            weight: 1,\n          },\n          highlighted: {\n            color: '#fffc31',\n            fillOpacity: 0.8,\n          },\n          inBbox: {\n            color: '#42b983',\n            fillOpacity: 0.5,\n          },\n          plain: {\n            color: '#3185fc',\n            fillOpacity: 0.5,\n          },\n          edge: {\n            icon: L.icon({\n              iconUrl: '../../node_modules/leaflet/dist/images/marker-icon.png',\n              iconRetinaUrl: 'marker-icon-2x.png',\n              shadowUrl:     'marker-shadow.png',\n              iconSize:    [25, 41],\n              iconAnchor:  [12, 41],\n              popupAnchor: [1, -34],\n              tooltipAnchor: [16, -28],\n              shadowSize:  [0, 0],\n            }),\n          },\n        },\n      },\n      bboxOptions: {\n        hovered: {\n          style: {\n            color: '#5a5a66',\n            fillColor: '#5a5a66',\n            dashArray: '5',\n            weight: 2\n          }\n        },\n        selected: {\n          style: {\n            color: '#42b983',\n            fillColor: '#42b983',\n            fillOpacity: 0,\n            dashArray: '5',\n            weight: 2\n          }\n        }\n      },\n      trackOptions: {\n        style: {\n          plain: {\n              color: '#5a5a66',\n              dashArray: '6',\n          },\n          inBbox: {\n            color: '#42b983',\n            dashArray: '6',\n          },\n        },\n      },\n    };\n  },\n  methods: {\n    /**\n     * Set highlighted feature in a MAP context.\n     *\n     * @returns {void}\n     */\n    featureClicked(feature) {\n      this.$store.dispatch('story/resetHighlightedLink');\n      this.$store.dispatch('setHighlightedFeature', feature);\n      this.$store.dispatch('setShouldScrollToFeature', true);\n      this.map.center = this.$refs.csmap.mapObject.getBounds().getCenter();\n    },\n    flyTo(feature) {\n      const center = [feature.geometry.coordinates[1], feature.geometry.coordinates[0]];\n      this.$refs.csmap.mapObject.flyTo(center);\n    },\n  },\n  mounted() {\n    this.$nextTick(() => {\n      this.map.bounds = this.$refs.cstrack && this.$refs.cstrack.getBounds();\n      this.$refs.csmap && this.$refs.csmap.mapObject.fitBounds(this.map.bounds);\n    });\n  },\n  computed: {\n    bbox() {\n      return this.$store.state.bbox;\n    },\n    bboxHovered() {\n      return this.$store.state.bboxHovered;\n    },\n    bboxHoveredDifferentFromCurrentBbox() {\n      return this.bbox !== this.bboxHovered;\n    },\n    features() {\n      if (!this.highlightedFeature && !this.featuresInsideBbox) {\n        return this.$store.state.features.data.features;\n      } else {\n        const highlightedId = [this.highlightedFeature && this.highlightedFeature.properties.id];\n        const idsInsideBbox = this.featuresInsideBbox && this.featuresInsideBbox.map(f => f.properties.id);\n        const ids = highlightedId.concat(idsInsideBbox);\n        return this.$store.state.features.data.features.filter(f => !ids.includes(f.properties.id));\n      }\n    },\n    featuresInsideBbox() {\n      return this.$store.getters['track/featuresInsideBbox'];\n    },\n    highlightedFeature() {\n      return this.$store.state.highlightedFeature;\n    },\n    track() {\n      return this.$store.state.track.data;\n    },\n    trackInsideBbox() {\n      return this.$store.getters['track/trackBboxRelation']('within');\n    },\n    trackOutsideBbox() {\n      return this.$store.getters['track/trackBboxRelation']('disjoint');\n    }\n  },\n  watch: {\n    highlightedFeature() {\n      this.flyTo(this.highlightedFeature);\n    },\n    bbox() {\n      if (this.bbox) {\n        this.$refs.csmap.mapObject.flyToBounds(this.bbox);\n      }\n    },\n    bboxHovered() {\n      const icon = L.icon({\n        iconUrl: 'img/map-marker.svg',\n        iconRetinaUrl: 'marker-icon-2x.png',\n        shadowUrl:     'marker-shadow.png',\n        iconSize:    [25, 41],\n        iconAnchor:  [12, 41],\n        popupAnchor: [1, -34],\n        tooltipAnchor: [16, -28],\n        shadowSize:  [0, 0],\n      });\n\n      if (!this.bboxHovered) {\n        this.$refs.csmap.mapObject.removeLayer(this.map.edgeMarker);\n      } else {\n        const bboxCenter = L.latLngBounds(this.bboxHovered).getCenter();\n        this.map.edgeMarker = new LEdgeMarker(bboxCenter, { icon: icon });\n        this.$refs.csmap.mapObject.addLayer(this.map.edgeMarker);\n      }\n    },\n  },\n};\n</script>\n\n<template>\n  <div class=\"cs-map\">\n    <div id=\"cs-map-container\">\n      <l-map :center=\"map.center\" :zoom=\"map.zoom\" ref=\"csmap\">\n        <l-tile-layer :url=\"map.baseLayer\" />\n        <l-tile-layer :url=\"map.hikingOverlay\" layer-type=\"overlay\" :opacity=\"0.7\" />\n        <l-tile-layer :url=\"map.labelsOverlay\" layer-type=\"overlay\" />\n        <l-geo-json v-if=\"!trackOutsideBbox && !trackInsideBbox\" :geojson=\"track.track\" :options=\"trackOptions.style.plain\" ref=\"cstrack\" />\n        <l-geo-json v-if=\"trackInsideBbox\" :geojson=\"trackInsideBbox\" :options=\"trackOptions.style.inBbox\" ref=\"cstrack\" />\n        <l-geo-json v-if=\"trackOutsideBbox\" :geojson=\"trackOutsideBbox\" :options=\"trackOptions.style.plain\" ref=\"cstrack\" />\n        <l-rectangle v-if=\"bboxHovered && bboxHoveredDifferentFromCurrentBbox\" :bounds=\"bboxHovered\" :l-style=\"bboxOptions.hovered.style\"></l-rectangle>\n        <l-rectangle v-if=\"bbox\" :bounds=\"bbox\" :l-style=\"bboxOptions.selected.style\"></l-rectangle>\n\n        <!-- highlightedFeature -->\n        <l-circle-marker\n          v-if=\"highlightedFeature\"\n          @click=\"featureClicked(highlightedFeature)\"\n          :color=\"markerOptions.style.highlighted.color\"\n          :fill-color=\"markerOptions.style.highlighted.color\"\n          :fill-opacity=\"markerOptions.style.highlighted.fillOpacity\"\n          :latLng=\"[highlightedFeature.geometry.coordinates[1], highlightedFeature.geometry.coordinates[0]]\"\n          :radius=\"markerOptions.style.common.radius\"\n          :weight=\"markerOptions.style.common.weight\">\n        </l-circle-marker>\n\n        <!-- features -->\n        <l-circle-marker\n          @click=\"featureClicked(f)\"\n          :color=\"markerOptions.style.plain.color\"\n          :fill-color=\"markerOptions.style.plain.color\"\n          :fill-opacity=\"markerOptions.style.plain.fillOpacity\"\n          :key=\"f.properties.id\"\n          :latLng=\"[f.geometry.coordinates[1], f.geometry.coordinates[0]]\"\n          :radius=\"markerOptions.style.common.radius\"\n          :weight=\"markerOptions.style.common.weight\"\n          v-for=\"f in features\">\n        </l-circle-marker>\n\n        <!-- featuresInsideBbox -->\n        <l-circle-marker\n          @click=\"featureClicked(f)\"\n          :color=\"markerOptions.style.inBbox.color\"\n          :fill-color=\"markerOptions.style.inBbox.color\"\n          :fill-opacity=\"markerOptions.style.inBbox.fillOpacity\"\n          :key=\"f.properties.id\"\n          :latLng=\"[f.geometry.coordinates[1], f.geometry.coordinates[0]]\"\n          :radius=\"markerOptions.style.common.radius\"\n          :weight=\"markerOptions.style.common.weight\"\n          v-for=\"f in featuresInsideBbox\">\n        </l-circle-marker>\n      </l-map>\n    </div>\n  </div>\n</template>\n\n<style>\n  .cs-map {\n    height: 100%;\n  }\n\n  #cs-map-container {\n    width: auto;\n    height: 100%;\n    position: relative;\n  }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsMap.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsMap.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CsMap.vue?vue&type=template&id=cddc210e&\"\nimport script from \"./CsMap.vue?vue&type=script&lang=js&\"\nexport * from \"./CsMap.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CsMap.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<script>\nimport PulseLoader from 'vue-spinner/src/PulseLoader.vue';\n\nimport CsStory from './CsStory.vue';\nimport CsMap from './CsMap.vue';\n\nexport default {\n  name: 'CsScreen',\n  components: {\n    CsStory,\n    CsMap,\n    PulseLoader,\n  },\n  mounted() {\n    if (this.readyAndNotDownloadedYet) {\n      this.$store.dispatch('loadStory');\n    }\n  },\n  computed: {\n    features() {\n      return this.$store.state.features;\n    },\n    track() {\n      return this.$store.state.track;\n    },\n    story() {\n      return this.$store.state.story;\n    },\n    ready() {\n      return this.track.data.track && this.story.data.story;\n    },\n    readyAndNotDownloadedYet() {\n      return this.features.data.url && this.track.data.url && this.story.data.url && !this.ready;\n    },\n  },\n};\n</script>\n\n<template>\n  <el-container id=\"screen\">\n    <pulse-loader class=\"spinner\" v-if=\"!ready\" color=\"#2c3e50\"></pulse-loader>\n    <el-col v-if=\"ready\" :span=\"12\">\n      <cs-map></cs-map>\n    </el-col>\n    <el-col v-if=\"ready\" :span=\"12\">\n      <cs-story></cs-story>\n    </el-col>\n  </el-container>\n</template>\n\n<style lang=\"scss\" scoped>\n  .spinner {\n    align-items: center;\n    display: flex;\n    justify-content: center;\n    height: 100%;\n    width: 100%;\n  }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsScreen.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsScreen.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CsScreen.vue?vue&type=template&id=24e91587&scoped=true&\"\nimport script from \"./CsScreen.vue?vue&type=script&lang=js&\"\nexport * from \"./CsScreen.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CsScreen.vue?vue&type=style&index=0&id=24e91587&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"24e91587\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\nimport Router from 'vue-router';\nimport CsLoadStoryForm from './components/CsLoadStoryForm.vue';\nimport CsScreen from './components/CsScreen.vue';\n\nVue.use(Router);\n\nconst routes = [\n  {\n    path: '/',\n    component: CsScreen,\n  },\n  { path: '/load', component: CsLoadStoryForm },\n];\n\nexport default new Router({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes,\n});\n","// https://gist.github.com/rhythnic/6521495650a215ccab8bf7120949fb7d?source=post_page\nconst last = xs => xs[xs.length - 1];\n\nexport const toggle = key => (state) => { state[key] = !state[key]; };\n\nexport const set = key => (state, val) => { state[key] = val; };\n\nexport const getPath = (obj, path) => {\n    return path.reduce((acc, key) =>\n        (acc && acc[key] !== 'undefined') ? acc[key] : undefined, obj);\n}\n\nexport const setPath = path => (state, val) => {\n  const obj = path.slice(0, -1).reduce((acc, x, i) => {\n    if (!(x in acc)) {\n      acc[x] = typeof path[i + 1] === 'number' ? [] : {};\n    }\n    return acc[x];\n  }, state);\n  obj[last(path)] = val;\n};\n","import axios from 'axios';\n\nimport { setPath } from './store.helpers';\n\nconst state = {\n  data: {\n    url: null,\n    features: null,\n  },\n};\n\nconst actions = {\n  async loadFeatures({ commit, state }) {\n    try {\n      const features = await axios.get(state.data.url);\n      commit('setFeatures', features.data);\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.log(e);\n    }\n  },\n};\n\nconst getters = {\n  getFeatureById: (state) => (id) => {\n    if (!state.data.features) {\n      return undefined;\n    }\n\n    return state.data.features.find(features => features.properties.id == id);\n  },\n};\n\nconst mutations = {\n  setFeatures: setPath(['data', 'features']),\n};\n\nconst featuresModule = {\n  namespaced: true,\n  actions,\n  state,\n  getters,\n  mutations,\n};\n\nexport default featuresModule;\n","export const RESET_HIGHLIGHTED_LINK = 'RESET_HIGHLIGHTED_LINK';\nexport const SET_BBOX = 'SET_BBOX';\nexport const SET_BBOX_HOVERED = 'SET_BBOX_HOVERED';\nexport const SET_FEATURES_URL = 'SET_FEATURES_URL';\nexport const SET_HIGHLIGHTED_FEATURE = 'SET_HIGHLIGHTED_FEATURE';\nexport const SET_SHOULD_SCROLL_TO_FEATURE = 'SET_SHOULD_SCROLL_TO_FEATURE';\nexport const SET_STORY_NAME = 'SET_STORY_NAME';\nexport const SET_STORY_URL = 'SET_STORY_URL';\nexport const SET_TRACK_URL = 'SET_TRACK_URL';\n\n// story mutations\nexport const SET_STORY = 'SET_STORY';\n\n// track mutations\nexport const SET_TRACK = 'SET_TRACK';\n","import axios from 'axios';\n\nimport { setPath } from './store.helpers';\nimport { RESET_HIGHLIGHTED_LINK, SET_STORY } from './mutations';\n\nconst state = {\n  data: {\n    name: undefined,\n    url: undefined,\n    story: undefined,\n  },\n};\n\nconst actions = {\n  setHighlightedLink({ commit }) {\n    commit('setHighlightedLink', undefined, { root: true });\n  },\n  resetHighlightedLink({ commit }) {\n    commit(RESET_HIGHLIGHTED_LINK, undefined, { root: true });\n  },\n  async loadText({ commit, state }) {\n    try {\n      const story = await axios.get(state.data.url);\n      commit(SET_STORY, story.data);\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.log(e);\n    }\n  },\n};\n\nconst mutations = {\n  [SET_STORY]: setPath(['data', 'story']),\n};\n\nconst storyModule = {\n  namespaced: true,\n  state,\n  actions,\n  mutations,\n};\n\nexport default storyModule;\n","import axios from 'axios';\nimport {\n  booleanPointInPolygon,\n  featureCollection,\n  lineSplit,\n  lineString,\n  point,\n  pointsWithinPolygon,\n} from '@turf/turf';\n\nimport { setPath } from './store.helpers';\nimport { SET_TRACK } from './mutations';\n\nconst turf = {\n  booleanPointInPolygon,\n  featureCollection,\n  lineSplit,\n  lineString,\n  point,\n  pointsWithinPolygon,\n};\nconst trackModule = {\n  namespaced: true,\n  state: {\n    data: {\n      url: null,\n      track: null,\n    },\n  },\n  mutations: {\n    [SET_TRACK]: setPath(['data', 'track']),\n  },\n  actions: {\n    async loadTrack({ commit, state }) {\n      try {\n        const track = await axios.get(state.data.url);\n        commit(SET_TRACK, track.data);\n      } catch (e) {\n        // eslint-disable-next-line no-console\n        console.log(e);\n      }\n    },\n  },\n  getters: {\n    bboxGeoJson: (state, getters, rootState) => rootState.bbox && L.rectangle(rootState.bbox).toGeoJSON(),\n    featuresInsideBbox: (state, getters, rootState) => {\n      if (!getters.bboxGeoJson) {\n        return null;\n      }\n\n      const features = rootState.features.data.features;\n      const fc = turf.featureCollection(features);\n      const pointsInsideBbox = turf.pointsWithinPolygon(fc, getters.bboxGeoJson);\n\n      return pointsInsideBbox && pointsInsideBbox.features;\n    },\n    trackBboxRelation: (state, getters, rootState) => (relation) => {\n      const ALLOWED_RELATIONS = ['within', 'disjoint'];\n\n      if (!ALLOWED_RELATIONS.includes(relation)) {\n        throw new Error(`bbox relation not recognized, use one of ${ALLOWED_RELATIONS.join(', ')}`);\n      }\n\n      if (!getters.bboxGeoJson) {\n        return null;\n      }\n\n      const parts = [];\n      const track = rootState.track.data.track.features[0];\n      const { coordinates } = track.geometry;\n\n      coordinates.forEach((part) => {\n        const split = turf.lineSplit(turf.lineString(part), getters.bboxGeoJson);\n        const oddPair = turf.booleanPointInPolygon(point(part[0]), getters.bboxGeoJson)\n          ? 0\n          : 1;\n\n        split.features.forEach((splitedPart, i) => {\n          const pairComp = relation === 'disjoint'\n            ? (i + oddPair) % 2 !== 0\n            : (i + oddPair) % 2 === 0;\n\n          if (pairComp) {\n            parts.push(splitedPart);\n          }\n        });\n      });\n      return turf.featureCollection(parts);\n    },\n  }\n};\n\nexport default trackModule;\n","import Vue from 'vue';\nimport Vuex from 'vuex';\nimport VuexPersistence from 'vuex-persist';\n\nimport featuresModule from './store.features';\nimport storyModule from './store.story';\nimport trackModule from './store.track';\nimport { set, setPath } from './store.helpers';\nimport {\n  RESET_HIGHLIGHTED_LINK,\n  SET_BBOX,\n  SET_BBOX_HOVERED,\n  SET_FEATURES_URL,\n  SET_HIGHLIGHTED_FEATURE,\n  SET_SHOULD_SCROLL_TO_FEATURE,\n  SET_STORY_NAME,\n  SET_STORY_URL,\n  SET_TRACK_URL,\n} from './mutations';\n\nVue.use(Vuex);\n\nconst LOCALE_STORAGE_KEY = 'cartostory';\n\nconst vuexLocal = new VuexPersistence({\n  key: LOCALE_STORAGE_KEY,\n  storage: window.localStorage,\n  strictMode: true,\n  reducer: (state) =>  ({\n    storyName: state.story.data.name,\n    storyUrl: state.story.data.url,\n    featuresUrl: state.features.data.url,\n    trackUrl: state.track.data.url,\n  }),\n  saveState: (key, state, storage) => {\n    const {storyName, storyUrl, featuresUrl, trackUrl} = state;\n    const currentStorage = JSON.parse(storage.getItem(key)) || [];\n\n    if (!storyName || !storyUrl || !featuresUrl || !trackUrl) {\n      return;\n    }\n\n    if (currentStorage.find(item => item.storyName === storyName &&  item.storyUrl === storyUrl &&\n      item.featuresUrl === featuresUrl && item.trackUrl === trackUrl)) {\n    } else {\n      currentStorage.push(state);\n      storage.setItem(key, JSON.stringify(currentStorage));\n    }\n  },\n  restoreState: (key, storage) => {\n    return JSON.parse(storage.getItem(key)) || [];\n  },\n});\n\nconst plugins = [\n  vuexLocal.plugin,\n];\n\nconst baseState = {\n  availableStories: [],\n  bbox: undefined,\n  bboxHovered: undefined,\n  highlightedFeature: undefined,\n  shouldScrollToFeature: undefined,\n};\n\nconst actions = {\n  setBbox({ commit }, payload) {\n    commit(SET_BBOX, payload);\n  },\n  setBboxHovered({ commit }, payload) {\n    commit(SET_BBOX_HOVERED, payload);\n  },\n  setHighlightedFeature({ commit }, feature) {\n    commit(SET_BBOX, null);\n    commit(SET_HIGHLIGHTED_FEATURE, feature);\n  },\n  setShouldScrollToFeature({ commit }, should) {\n    commit(SET_SHOULD_SCROLL_TO_FEATURE, should);\n  },\n  setStoryName({ commit }, name) {\n    commit(SET_STORY_NAME, name);\n  },\n  setUrls({ commit }, payload) {\n    commit(SET_FEATURES_URL, payload.featuresUrl);\n    commit(SET_STORY_URL, payload.storyUrl);\n    commit(SET_TRACK_URL, payload.trackUrl);\n  },\n  async loadStory({ dispatch }) {\n    await dispatch('story/loadText', { root: true });\n    await dispatch('track/loadTrack', { root: true });\n    await dispatch('features/loadFeatures', { root: true });\n  },\n};\n\nconst modules = {\n  features: featuresModule,\n  story: storyModule,\n  track: trackModule,\n};\n\nexport const mutations = {\n  RESTORE_MUTATION(state, payload) {\n    if (!payload) {\n      return;\n    }\n\n    state.features.data.url = payload[0] && payload[0].featuresUrl;\n    state.story.data.url = payload[0] && payload[0].storyUrl;\n    state.story.data.name = payload[0] && payload[0].storyName;\n    state.track.data.url = payload[0] && payload[0].trackUrl;\n    state.availableStories = payload;\n  },\n  [SET_HIGHLIGHTED_FEATURE]: set('highlightedFeature'),\n  [SET_BBOX]: set('bbox'),\n  [SET_BBOX_HOVERED]: set('bboxHovered'),\n  [SET_SHOULD_SCROLL_TO_FEATURE]: set('shouldScrollToFeature'),\n  [SET_FEATURES_URL]: setPath(['features', 'data', 'url']),\n  [SET_STORY_NAME]: setPath(['story', 'data', 'name']),\n  [SET_STORY_URL]: setPath(['story', 'data', 'url']),\n  [SET_TRACK_URL]: setPath(['track', 'data', 'url']),\n  [RESET_HIGHLIGHTED_LINK]: () => {\n    document.querySelectorAll('[data-cs-id]').forEach((elm) => {\n      if (elm.classList) {\n        elm.classList.remove('highlighted');\n      }\n    });\n  },\n  setHighlightedLink(state) {\n    if (!state.highlightedFeature) {\n      return;\n    }\n\n    const highlightedId = state.highlightedFeature.properties.id;\n    const highlightedElement = document.querySelectorAll(`[data-cs-id='${highlightedId}']`)[0];\n    if (state.highlightedFeature && highlightedElement) {\n      highlightedElement.classList.add('highlighted');\n    }\n  },\n};\n\nexport default ({\n  strict: true,\n  modules,\n  state: baseState,\n  mutations,\n  actions,\n  plugins,\n});\n","import Vue from 'vue';\nimport Vuex from 'vuex';\nimport VueLogger from 'vuejs-logger';\nimport VueSanitize from 'vue-sanitize';\nimport VueScrollTo from 'vue-scrollto';\nimport {\n  Button,\n  Col,\n  Container,\n  Form,\n  FormItem,\n  Input,\n  Main,\n  Option,\n  Row,\n  Select,\n} from 'element-ui';\nimport 'normalize.css';\nimport 'element-ui/lib/theme-chalk/index.css';\nimport '@/assets/css/index.css';\n\nimport App from './App.vue';\nimport router from './router';\nimport store from './store/store';\n\nVue.config.productionTip = false;\nVue.use(Button);\nVue.use(Col);\nVue.use(Container);\nVue.use(Form);\nVue.use(FormItem);\nVue.use(Input);\nVue.use(Main);\nVue.use(Option);\nVue.use(Row);\nVue.use(Select);\n\nVue.use(VueLogger);\nVue.use(VueScrollTo);\nVue.use(Vuex);\nVue.use(VueSanitize, {\n  allowedTags: ['a'],\n  allowedAttributes: {\n    // eslint-disable-next-line quote-props\n    'a': ['data-url', 'id', 'data-cs-id'],\n  },\n});\n\nnew Vue({\n  router,\n  store: new Vuex.Store(store),\n  render: h => h(App),\n}).$mount('#cartostory');\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsLoadStoryForm.vue?vue&type=style&index=0&id=175292f8&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsLoadStoryForm.vue?vue&type=style&index=0&id=175292f8&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsMap.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsMap.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsScreen.vue?vue&type=style&index=0&id=24e91587&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsScreen.vue?vue&type=style&index=0&id=24e91587&lang=scss&scoped=true&\""],"sourceRoot":""}