{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/CsEditor.vue?0c71","webpack:///./src/views/StoryScreen.vue?19c1","webpack:///./src/components/CsMap.vue?c208","webpack:///./src/App.vue?c17d","webpack:///./src/components/CsNotification.vue?4b17","webpack:///./src/store/mutations.js","webpack:///src/components/CsNotification.vue","webpack:///./src/components/CsNotification.vue?058b","webpack:///./src/components/CsNotification.vue","webpack:///src/App.vue","webpack:///./src/App.vue?a37b","webpack:///./src/App.vue","webpack:///./src/config/config.js","webpack:///./src/store/store.helpers.js","webpack:///./src/store/newStore.js","webpack:///./src/views/Landing.vue?fef7","webpack:///src/views/Landing.vue","webpack:///./src/views/Landing.vue?30c7","webpack:///./src/views/Landing.vue?8862","webpack:///./src/views/StoryScreen.vue?f16b","webpack:///./src/config/map.js","webpack:///./src/components/CsEditor.vue?31d0","webpack:///./src/components/editor/BboxMark.js","webpack:///./src/components/editor/FeatureMark.js","webpack:///src/components/CsEditor.vue","webpack:///./src/components/CsEditor.vue?8bab","webpack:///./src/components/CsEditor.vue?36af","webpack:///./src/components/CsMap.vue?62ac","webpack:///./src/components/CsTrackUploadButton.vue?08f1","webpack:///src/components/CsTrackUploadButton.vue","webpack:///./src/components/CsTrackUploadButton.vue?3d57","webpack:///./src/components/CsTrackUploadButton.vue?0963","webpack:///src/components/CsMap.vue","webpack:///./src/components/CsMap.vue?110c","webpack:///./src/components/CsMap.vue?55d9","webpack:///src/views/StoryScreen.vue","webpack:///./src/views/StoryScreen.vue?262c","webpack:///./src/views/StoryScreen.vue?65e6","webpack:///./src/views/LoadStoryForm.vue?9367","webpack:///src/views/LoadStoryForm.vue","webpack:///./src/views/LoadStoryForm.vue?6a1a","webpack:///./src/views/LoadStoryForm.vue","webpack:///./src/router.js","webpack:///./src/main.js","webpack:///./src/views/Landing.vue?8942","webpack:///./src/components/CsTrackUploadButton.vue?6dee"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","loading","on","$event","staticRenderFns","REMOVE_ERROR","UPDATE_BOUNDING_BOX_CALLBACK","UPDATE_ERRORS","UPDATE_EDITABLE","UPDATE_FEATURE_MARK_CALLBACK","UPDATE_HIGHLIGHTED_BBOX","UPDATE_HIGHLIGHTED_LAT_LNG","UPDATE_LOADING","UPDATE_MAP_CENTER","UPDATE_STORY","UPDATE_STORY_NAME","UPDATE_STORY_TEXT","UPDATE_STORY_URL","UPDATE_TRACK","computed","errors","$store","state","forEach","indefinite","position","type","message","onAction","watch","component","components","CsNotification","STORY_LINK_BBOX_ATTR","STORY_LINK_BBOX_ATTR_CAMEL","toCamelCase","STORY_LINK_LAT_ATTR","STORY_LINK_LNG_ATTR","STORY_LINK_LAT_ATTR_CAMEL","STORY_LINK_LNG_ATTR_CAMEL","STORY_LINK_CLICK_EVENT","ADD_BOUNDING_BOX_EVENT","ADD_FEATURE_MARK_EVENT","TRACK_FILE_UPLOAD_EVENT","str","split","map","item","idx","toUpperCase","join","last","xs","set","val","setPath","path","obj","reduce","acc","x","Vue","use","Vuex","editable","storyUrl","undefined","story","text","track","addBoundingBoxCallback","addFeatureMarkCallback","availableStories","highlightedBbox","highlightedLatLng","mutations","error","findIndex","e","title","newErorr","bbox","lat","lng","latLng","Number","parseFloat","actions","updateTrack","payload","commit","updateStoryText","loadStory","axios","getters","content","doc","JSON","parse","stringify","bboxes","pickDeep","mapDeep","v","leavesOnly","filter","id","bounds","features","chunk","featuresWithoutHighlighted","console","log","feature","Store","strict","_m","_v","$router","staticStyle","ready","_d","handleAddFeatureMarkClick","handleAddBoundingBoxClick","_e","mapOptions","center","baseLayer","hikingOverlay","labelsOverlay","zoom","edgeMarker","markerOptions","style","common","radius","weight","highlighted","color","opacity","fillOpacity","inBbox","plain","edge","icon","L","iconUrl","iconRetinaUrl","shadowUrl","iconSize","iconAnchor","popupAnchor","tooltipAnchor","shadowSize","bboxOptions","dashArray","hovered","fillColor","selected","trackOptions","model","callback","$$v","storyName","expression","_s","editor","scopedSlots","_u","fn","ref","commands","isActive","class","heading","level","keepInBounds","getMarkAttrs","menu","isNewFeatureMarkButtonVisible","featureMark","handleRemoveFeatureMarkClick","isNewBboxMarkVisible","bboxMark","TAG","BboxMark","toggleMark","default","parseDOM","tag","getAttrs","dom","dataset","toDOM","node","props","methods","handleClick","isHighlighted","updateAttrs","template","Mark","FeatureMark","EditorContent","EditorMenuBar","EditorMenuBubble","contentPlaceholder","scrollToHighlightedLatLng","mounted","$createEditor","$scrollTo","textMark","container","document","querySelector","offset","$emit","extensions","onUpdate","beforeDestroy","destroy","handleMapClick","latlng","handleMapMouseDown","handleFileUpload","handleTrackReady","_l","f","index","handleFeatureClick","$refs","fileReader","click","accept","onchange","FileReader","fileObj","CsTrackUploadButton","LCircleMarker","LControl","LGeoJson","LMap","LTileLayer","LRectangle","addFeatureMark","drawControl","bboxBounds","csmap","mapObject","fitBounds","getBounds","drawLocal","draw","handlers","rectangle","tooltip","start","simpleshape","end","Draw","Rectangle","showArea","shapeOptions","off","Event","CREATED","$handleCreateRectangle","CsEditor","CsMap","trackBounds","currentRoute","handleSave","handleStorySelect","domProps","disabledSubmit","handleSubmit","currentStory","Router","routes","Landing","StoryScreen","beforeEnter","to","from","next","store","LoadStoryForm","router","base","process","beforeEach","afterEach","config","productionTip","Buefy","VueLogger","VueScrollTo","render","h","App","$mount"],"mappings":"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","file":"js/app.a8224e81.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/cartostory-frontend/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsEditor.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsEditor.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StoryScreen.vue?vue&type=style&index=0&id=267583b0&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StoryScreen.vue?vue&type=style&index=0&id=267583b0&lang=scss&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsMap.vue?vue&type=style&index=0&id=d5b7a2ac&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsMap.vue?vue&type=style&index=0&id=d5b7a2ac&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"section\",attrs:{\"id\":\"js-app\"}},[_c('router-view'),_c('cs-notification'),_c('b-loading',{attrs:{\"is-full-page\":true,\"active\":_vm.loading},on:{\"update:active\":function($event){_vm.loading=$event}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\"div\")}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// new mutations\nexport const REMOVE_ERROR = 'REMOVE_ERROR';\nexport const UPDATE_BOUNDING_BOX_CALLBACK = 'UPDATE_BOUNDING_BOX_CALLBACK';\nexport const UPDATE_ERRORS = 'UPDATE_ERRORS';\nexport const UPDATE_EDITABLE = 'UPDATE_EDITABLE';\nexport const UPDATE_FEATURE_MARK_CALLBACK = 'UPDATE_FEATURE_MARK_CALLBACK';\nexport const UPDATE_HIGHLIGHTED_BBOX = 'UPDATE_HIGHLIGHTED_BBOX';\nexport const UPDATE_HIGHLIGHTED_LAT_LNG = 'UPDATE_HIGHLIGHTED_LAT_LNG';\nexport const UPDATE_LOADING = 'UPDATE_LOADING';\nexport const UPDATE_MAP_CENTER = 'UPDATE_MAP_CENTER';\nexport const UPDATE_STORY = 'UPDATE_STORY';\nexport const UPDATE_STORY_NAME = 'UPDATE_STORY_NAME';\nexport const UPDATE_STORY_TEXT = 'UPDATE_STORY_TEXT';\nexport const UPDATE_STORY_URL = 'UPDATE_STORY_URL';\nexport const UPDATE_TRACK = 'UPDATE_TRACK';\n\nexport const RESET_HIGHLIGHTED_LINK = 'RESET_HIGHLIGHTED_LINK';\nexport const SET_BBOX = 'SET_BBOX';\nexport const SET_BBOX_HOVERED = 'SET_BBOX_HOVERED';\nexport const SET_FEATURES_URL = 'SET_FEATURES_URL';\nexport const SET_HIGHLIGHTED_FEATURE = 'SET_HIGHLIGHTED_FEATURE';\nexport const SET_SHOULD_SCROLL_TO_FEATURE = 'SET_SHOULD_SCROLL_TO_FEATURE';\nexport const SET_STORY_NAME = 'SET_STORY_NAME';\nexport const SET_STORY_URL = 'SET_STORY_URL';\nexport const SET_TRACK_URL = 'SET_TRACK_URL';\n\n// story mutations\nexport const SET_STORY = 'SET_STORY';\n\n// track mutations\nexport const SET_TRACK = 'SET_TRACK';\n","<script>\nimport { REMOVE_ERROR } from '@/store/mutations';\n\nexport default {\n  name: 'CsNotification',\n  computed: {\n    errors() {\n      this.$store.state.errors.forEach(e => {\n        this.$buefy.snackbar.open({\n          indefinite: true,\n          position: 'is-top-right',\n          type: 'is-danger',\n          message: `<strong>${e.title}</strong><br/><p>${e.message}</p>`,\n          onAction: () => {\n            this.$store.commit(REMOVE_ERROR, e);\n          },\n        });\n        this.$store.commit(REMOVE_ERROR, e);\n      });\n      return this.$store.state.errors;\n    },\n  },\n  watch: {\n    errors() {\n      return this.errors;\n    },\n  },\n};\n</script>\n\n<template>\n\n</template>\n\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsNotification.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsNotification.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CsNotification.vue?vue&type=template&id=010a15f2&\"\nimport script from \"./CsNotification.vue?vue&type=script&lang=js&\"\nexport * from \"./CsNotification.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<script>\nimport CsNotification from '@/components/CsNotification.vue';\n\nexport default {\n  name: 'app',\n  components: {\n    CsNotification,\n  },\n  computed: {\n    loading() {\n      return this.$store.state.loading;\n    },\n  },\n};\n</script>\n\n<template>\n  <div class=\"section\" id=\"js-app\">\n    <router-view/>\n    <cs-notification/>\n    <b-loading :is-full-page=\"true\" :active.sync=\"loading\"></b-loading>\n  </div>\n</template>\n\n<style lang=\"scss\">\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=2b931a3d&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export const SCROLL_CONTAINER_ID = 'story-scrolling-container';\nexport const STORY_LINK_BBOX_ATTR = 'data-cs-bbox';\nexport const STORY_LINK_BBOX_ATTR_CAMEL = toCamelCase(STORY_LINK_BBOX_ATTR);\nexport const STORY_LINK_DATA_ID = 'data-cs-id';\nexport const STORY_LINK_LAT_ATTR = 'data-cs-lat';\nexport const STORY_LINK_LNG_ATTR = 'data-cs-lng';\nexport const STORY_LINK_LAT_ATTR_CAMEL = toCamelCase(STORY_LINK_LAT_ATTR);\nexport const STORY_LINK_LNG_ATTR_CAMEL = toCamelCase(STORY_LINK_LNG_ATTR);\nexport const STORY_LINK_CLICK_EVENT = 'mark-click';\nexport const ADD_BOUNDING_BOX_EVENT = 'add-bounding-box';\nexport const ADD_FEATURE_MARK_EVENT = 'add-feature-mark';\nexport const TRACK_FILE_UPLOAD_EVENT = 'track-file-upload';\n\nfunction toCamelCase(str) {\n  return str\n    .split('-')\n    .map((item, idx) => idx > 0 ? item.slice(0,1).toUpperCase() + item.slice(1) : item)\n    .join('');\n}\n","// https://gist.github.com/rhythnic/6521495650a215ccab8bf7120949fb7d?source=post_page\nconst last = xs => xs[xs.length - 1];\n\nexport const toggle = key => (state) => { state[key] = !state[key]; };\n\nexport const set = key => (state, val) => { state[key] = val; };\n\nexport const getPath = (obj, path) => {\n    return path.reduce((acc, key) =>\n        (acc && acc[key] !== 'undefined') ? acc[key] : undefined, obj);\n}\n\nexport const setPath = path => (state, val) => {\n  const obj = path.slice(0, -1).reduce((acc, x, i) => {\n    if (!(x in acc)) {\n      acc[x] = typeof path[i + 1] === 'number' ? [] : {};\n    }\n    return acc[x];\n  }, state);\n  obj[last(path)] = val;\n};\n","import Vue from 'vue';\nimport Vuex from 'vuex';\nimport axios from 'axios';\nimport chunk from 'lodash.chunk';\nimport mapDeep from 'deepdash-es/mapDeep';\nimport pickDeep from 'deepdash-es/pickDeep';\n\nimport { STORY_LINK_BBOX_ATTR, STORY_LINK_LAT_ATTR, STORY_LINK_LNG_ATTR } from '@/config/config';\nimport {\n  REMOVE_ERROR,\n  UPDATE_BOUNDING_BOX_CALLBACK,\n  UPDATE_EDITABLE,\n  UPDATE_ERRORS,\n  UPDATE_FEATURE_MARK_CALLBACK,\n  UPDATE_HIGHLIGHTED_BBOX,\n  UPDATE_HIGHLIGHTED_LAT_LNG,\n  UPDATE_LOADING,\n  UPDATE_MAP_CENTER,\n  UPDATE_STORY,\n  UPDATE_STORY_NAME,\n  UPDATE_STORY_TEXT,\n  UPDATE_STORY_URL,\n  UPDATE_TRACK,\n} from '@/store/mutations';\nimport { set, setPath } from './store.helpers';\n\nVue.use(Vuex);\n\nconst state = {\n  editable: false,\n  errors: [],\n  loading: false,\n  storyUrl: undefined,\n  story: {\n    name: undefined,\n    text: undefined,\n    track: undefined,\n  },\n  addBoundingBoxCallback: undefined,\n  addFeatureMarkCallback: undefined,\n  availableStories: [],\n  highlightedBbox: undefined,\n  highlightedLatLng: undefined,\n};\n\nexport const mutations = {\n  /* eslint-disable-next-line no-shadow */\n  [REMOVE_ERROR](state, error) {\n    const idx = state.errors.findIndex(e => e.title === error.title && e.message === error.message);\n    if (idx > -1) {\n      state.errors.splice(idx, 1);\n    }\n  },\n  [UPDATE_BOUNDING_BOX_CALLBACK]: set('addBoundingBoxCallback'),\n  [UPDATE_EDITABLE]: set('editable'),\n  /* eslint-disable-next-line no-shadow */\n  [UPDATE_ERRORS](state, newErorr) {\n    state.errors = [...state.errors, newErorr];\n  },\n  [UPDATE_FEATURE_MARK_CALLBACK]: set('addFeatureMarkCallback'),\n  [UPDATE_HIGHLIGHTED_BBOX](state, bbox) {\n    state.highlightedBbox = [\n      {\n        lat: bbox[0][0],\n        lng: bbox[0][1],\n      },\n      {\n        lat: bbox[1][0],\n        lng: bbox[1][1],\n      },\n    ];\n  },\n  /* eslint-disable-next-line no-shadow */\n  [UPDATE_HIGHLIGHTED_LAT_LNG](state, latLng) {\n    if (!latLng) {\n      state.highlightedLatLng = undefined;\n    } else {\n      state.highlightedLatLng = {\n        lat: Number.parseFloat(latLng[STORY_LINK_LAT_ATTR]),\n        lng: Number.parseFloat(latLng[STORY_LINK_LNG_ATTR]),\n      };\n    }\n  },\n  [UPDATE_LOADING]: set('loading'),\n  [UPDATE_MAP_CENTER]: setPath(['map', 'center']),\n  [UPDATE_STORY]: set('story'),\n  [UPDATE_STORY_NAME]: setPath(['story', 'name']),\n  [UPDATE_STORY_TEXT]: setPath(['story', 'text']),\n  [UPDATE_STORY_URL]: set('storyUrl'),\n  [UPDATE_TRACK]: setPath(['story', 'track']),\n};\n\nconst actions = {\n  updateTrack({ commit }, payload) {\n    commit(UPDATE_TRACK, payload);\n  },\n  updateStoryText({ commit }, payload) {\n    commit(UPDATE_STORY_TEXT, payload);\n  },\n  /* eslint-disable-next-line no-shadow */\n  async loadStory({ commit, state }) {\n    commit(UPDATE_LOADING, true);\n    const result = await axios.get(state.storyUrl);\n    commit(UPDATE_STORY, result.data);\n  },\n};\n\nexport const getters = {\n  /* eslint-disable-next-line no-shadow */\n  content: (state) => {\n    let content;\n\n    if (state.story.text && state.story.text.state) { // editing\n      ({ content } = state.story.text.state.doc);\n    } else { // readonly\n      content = state.story.text && state.story.text.content;\n    }\n\n    return content && JSON.parse(JSON.stringify(content));\n  },\n\n  /* eslint-disable-next-line no-shadow */\n  bboxes: (state, getters) => {\n    let result = [];\n    const data = getters.content;\n\n    if (data) {\n      const bboxes = pickDeep(data, STORY_LINK_BBOX_ATTR);\n      result = mapDeep(bboxes, v => v, { leavesOnly: true })\n        .filter(item => item !== null)\n        .map(item => JSON.parse(item))\n        .map((item, id) => ({\n          id,\n          bounds: [\n            [item[0][0], item[0][1]],\n            [item[1][0], item[1][1]],\n          ],\n        }));\n    }\n\n    return result;\n  },\n\n  /* eslint-disable-next-line no-shadow */\n  features: (state, getters) => {\n    let result = [];\n    const data = getters.content;\n\n    if (data) {\n      const features = mapDeep(pickDeep(data, [STORY_LINK_LAT_ATTR, STORY_LINK_LNG_ATTR]), v => v, {\n        leavesOnly: true,\n      }).filter(item => item !== null);\n      result = chunk(features, 2).map(item => ({ lat: item[0], lng: item[1] }));\n    }\n\n    return result;\n  },\n\n  /* eslint-disable-next-line no-shadow */\n  featuresWithoutHighlighted: (state, getters) => {\n    console.log(state.highlightedLatLng);\n    if (!state.highlightedLatLng) {\n      return getters.features;\n    }\n\n    const { lat, lng } = state.highlightedLatLng;\n    return getters.features.filter(feature => feature.lat !== lat && feature.lng !== lng);\n  },\n};\n\nexport default new Vuex.Store({\n  strict: true,\n  getters,\n  state,\n  mutations,\n  actions,\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column is-6 is-offset-3\"},[_vm._m(0),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column is-6 section-left has-pb-0\"},[_c('h2',{staticClass:\"title is-2 has-text-weight-normal has-text-centered has-mb-2\"},[_vm._v(\"Napsat příběh\")]),_c('p',[_vm._v(\"Chcete napsat svůj vlastní příběh? Z prázdnin, dovolené nebo jen zajímavého sobotního\\n            výletu?\")]),_c('b-button',{on:{\"click\":function($event){return _vm.$router.push('/story/create')}}},[_vm._v(\"Chci psát\")])],1),_c('div',{staticClass:\"column is-6 section-right has-pb-0\"},[_c('h2',{staticClass:\"title is-2 has-text-weight-normal has-text-centered has-mb-2\"},[_vm._v(\"Číst příběh\")]),_c('p',[_vm._v(\"Váš kamarád nebo příbuzný napsal příběh a poslal vám jeho adresu? Můžete si ho přečíst.\")]),_c('b-button',{on:{\"click\":function($event){return _vm.$router.push('/story/load')}}},[_vm._v(\"Chci číst\")])],1)])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('h1',{staticClass:\"title is-1 has-text-weight-normal has-text-centered has-mt-2 has-mb-1\"},[_vm._v(\"Cartostory\")])])])}]\n\nexport { render, staticRenderFns }","<script>\nexport default {\n  name: 'Landing',\n}\n</script>\n\n<template>\n  <div class=\"container\">\n    <div class=\"columns\">\n      <div class=\"column is-6 is-offset-3\">\n\n        <div class=\"columns\">\n          <div class=\"column\">\n            <h1 class=\"title is-1 has-text-weight-normal has-text-centered has-mt-2 has-mb-1\">Cartostory</h1>\n          </div>\n        </div>\n\n        <div class=\"columns\">\n\n          <div class=\"column is-6 section-left has-pb-0\">\n            <h2 class=\"title is-2 has-text-weight-normal has-text-centered has-mb-2\">Napsat příběh</h2>\n            <p>Chcete napsat svůj vlastní příběh? Z&nbsp;prázdnin, dovolené nebo jen zajímavého sobotního\n              výletu?</p>\n            <b-button @click=\"$router.push('/story/create')\">Chci psát</b-button>\n          </div>\n\n          <div class=\"column is-6 section-right has-pb-0\">\n            <h2 class=\"title is-2 has-text-weight-normal has-text-centered has-mb-2\">Číst příběh</h2>\n            <p>Váš kamarád nebo příbuzný napsal příběh a poslal vám jeho adresu? Můžete si ho přečíst.</p>\n            <b-button @click=\"$router.push('/story/load')\">Chci číst</b-button>\n          </div>\n\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\np {\n  flex: 1;\n  margin-bottom: 1rem;\n}\n\n.section-left,\n.section-right {\n  display: flex;\n  flex-direction: column;\n  flex-wrap: wrap;\n  justify-content: center;\n}\n\n.section-left {\n  border-right: 1px solid #F56C6C;\n  padding-right: 1rem;\n}\n\n.section-right {\n  padding-left: 1rem;\n}\n\n.section-right p {\n  flex: 1 0 auto;\n}\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Landing.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Landing.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Landing.vue?vue&type=template&id=38eae450&scoped=true&\"\nimport script from \"./Landing.vue?vue&type=script&lang=js&\"\nexport * from \"./Landing.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Landing.vue?vue&type=style&index=0&id=38eae450&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"38eae450\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container-fluid story-form\"},[_c('div',{staticClass:\"columns has-margin-0\",staticStyle:{\"height\":\"100vh\"}},[_c('cs-map'),_c('div',{staticStyle:{\"display\":\"flex\",\"flex-direction\":\"column\",\"width\":\"100%\"}},[(_vm.$store.state.story.text || _vm.ready)?_c('cs-editor',{on:_vm._d({},[_vm.ADD_FEATURE_MARK_EVENT,function($event){return _vm.handleAddFeatureMarkClick($event)},_vm.ADD_BOUNDING_BOX_EVENT,function($event){return _vm.handleAddBoundingBoxClick($event)}])}):_vm._e()],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export const mapOptions = {\n  bounds: undefined,\n  center: [50, 19],\n  baseLayer: 'https://api.mapbox.com/styles/v1/cartostory/cjugqcypf27581gnry4y59lxy/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoiY2FydG9zdG9yeSIsImEiOiJjanQycXVyZDcxeXZqM3lxeDNvcW81NWJpIn0.hfvoqNSy7dT0yviVhNcDMg',\n  hikingOverlay: 'http://tile.mtbmap.cz/overlay_hiking/{z}/{x}/{y}.png',\n  labelsOverlay: 'https://api.mapbox.com/styles/v1/cartostory/cjugqfe8r1lhh1ftgrmr7v9zj/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoiY2FydG9zdG9yeSIsImEiOiJjanQycXVyZDcxeXZqM3lxeDNvcW81NWJpIn0.hfvoqNSy7dT0yviVhNcDMg',\n  zoom: 8,\n  edgeMarker: undefined,\n};\n\nexport const markerOptions = {\n  style: {\n    common: {\n      radius: 8,\n      weight: 1.5,\n    },\n    highlighted: {\n      color: '#F56C6C',\n      opacity: 1,\n      fillOpacity: 0.4,\n    },\n    inBbox: {\n      color: '#42b983',\n      fillOpacity: 0.5,\n    },\n    plain: {\n      color: '#3185fc',\n      fillOpacity: 0.5,\n    },\n    edge: {\n      icon: L.icon({\n        iconUrl: '../../node_modules/leaflet/dist/images/marker-icon.png',\n        iconRetinaUrl: 'marker-icon-2x.png',\n        shadowUrl: 'marker-shadow.png',\n        iconSize: [25, 41],\n        iconAnchor: [12, 41],\n        popupAnchor: [1, -34],\n        tooltipAnchor: [16, -28],\n        shadowSize: [0, 0],\n      }),\n    },\n  },\n};\n\nexport const bboxOptions = {\n  plain: {\n    style: {\n      color: '#5a5a66',\n      fillOpacity: 0,\n      dashArray: '5',\n      weight: 2,\n    },\n  },\n  hovered: {\n    style: {\n      color: '#5a5a66',\n      fillColor: '#5a5a66',\n      dashArray: '5',\n      weight: 2,\n    },\n  },\n  selected: {\n    style: {\n      color: '#42b983',\n      fillColor: '#42b983',\n      fillOpacity: 0,\n      dashArray: '5',\n      weight: 2,\n    },\n  },\n};\n\nexport const trackOptions = {\n  style: {\n    plain: {\n      color: '#5a5a66',\n      dashArray: '6',\n    },\n    inBbox: {\n      color: '#42b983',\n      dashArray: '6',\n    },\n  },\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"column is-12 has-padding-0 story-text\"},[_c('div',{staticClass:\"story-text__content\"},[(_vm.editable)?_c('form',{staticClass:\"has-mt-1\"},[_c('b-field',[_c('b-input',{attrs:{\"custom-class\":\"story-title-input\",\"placeholder\":\"Název příběhu\",\"size\":\"is-large\"},model:{value:(_vm.storyName),callback:function ($$v) {_vm.storyName=$$v},expression:\"storyName\"}})],1)],1):_vm._e(),(!_vm.editable)?_c('h1',{staticClass:\"story-title-input has-mt-1\"},[_vm._v(_vm._s(_vm.storyName))]):_vm._e(),(_vm.editable)?_c('editor-menu-bar',{staticClass:\"has-mt-1\",staticStyle:{\"background\":\"white\"},attrs:{\"editor\":_vm.editor},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar commands = ref.commands;\nvar isActive = ref.isActive;\nreturn [_c('div',{staticClass:\"editor-menu-bar buttons\"},[_c('b-button',{staticClass:\"menubar__button\",class:{ 'is-active': isActive.heading({ level: 2 }) },attrs:{\"title\":\"Nadpis 1. úrovně\",\"size\":\"is-small\"},on:{\"click\":function($event){return commands.heading({ level: 2 })}}},[_vm._v(\"\\n          H1\\n        \")]),_c('b-button',{staticClass:\"menubar__button\",class:{ 'is-active': isActive.heading({ level: 3 }) },attrs:{\"title\":\"Nadpis 2. úrovně\",\"size\":\"is-small\"},on:{\"click\":function($event){return commands.heading({ level: 3 })}}},[_vm._v(\"\\n          H2\\n        \")]),_c('b-button',{staticClass:\"menubar__button\",class:{ 'is-active': isActive.heading({ level: 4 }) },attrs:{\"title\":\"Nadpis 3. úrovně\",\"size\":\"is-small\"},on:{\"click\":function($event){return commands.heading({ level: 4 })}}},[_vm._v(\"\\n          H3\\n        \")]),_c('b-button',{staticClass:\"menubar__button\",staticStyle:{\"margin-left\":\"auto\"},attrs:{\"title\":\"Uložit příběh\",\"size\":\"is-small\",\"type\":\"is-primary\"},on:{\"click\":function($event){}}},[_vm._v(\"Uložit\\n        \")])],1)]}}],null,false,4269233923)}):_vm._e(),(_vm.editable)?_c('editor-menu-bubble',{attrs:{\"editor\":_vm.editor,\"keep-in-bounds\":_vm.keepInBounds},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar commands = ref.commands;\nvar getMarkAttrs = ref.getMarkAttrs;\nvar isActive = ref.isActive;\nvar menu = ref.menu;\nreturn [_c('div',{staticClass:\"menububble\",class:{ 'is-active': menu.isActive },style:((\"left: \" + (menu.left) + \"px; bottom: \" + (menu.bottom) + \"px;\"))},[(!_vm.isNewFeatureMarkButtonVisible(getMarkAttrs('featureMark')))?_c('b-button',{staticClass:\"menububble__button menububble__button__mark\",class:{ 'is-active': isActive.featureMark() },attrs:{\"icon-left\":\"map-marker-plus\"},on:{\"click\":function($event){return _vm.handleAddFeatureMarkClick(commands.featureMark)}}}):_vm._e(),(_vm.isNewFeatureMarkButtonVisible(getMarkAttrs('featureMark')))?_c('b-button',{staticClass:\"menububble__button\",class:{ 'is-active': isActive.featureMark() },attrs:{\"icon-left\":\"map-marker-minus\"},on:{\"click\":function($event){return _vm.handleRemoveFeatureMarkClick(commands.featureMark)}}}):_vm._e(),(!_vm.isNewBboxMarkVisible(getMarkAttrs('bboxMark')))?_c('b-button',{staticClass:\"menububble__button menububble__button__bbox\",class:{ 'is-active': isActive.bboxMark() },attrs:{\"icon-left\":\"fullscreen\"},on:{\"click\":function($event){return _vm.handleAddBoundingBoxClick(commands.bboxMark)}}}):_vm._e(),(_vm.isNewBboxMarkVisible(getMarkAttrs('bboxMark')))?_c('b-button',{staticClass:\"menububble__button menububble__button__bbox\",class:{ 'is-active': isActive.bboxMark() },attrs:{\"icon-left\":\"fullscreen-exit\"},on:{\"click\":function($event){return commands.bboxMark()}}}):_vm._e()],1)]}}],null,false,645868152)}):_vm._e(),_c('editor-content',{staticClass:\"editor\",class:{'editable': this.editable},staticStyle:{\"flex\":\"1\",\"overflow\":\"auto\"},attrs:{\"editor\":_vm.editor}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/* eslint class-methods-use-this: 0 */\nimport { Mark } from 'tiptap';\nimport { toggleMark } from 'tiptap-commands';\n\nimport { STORY_LINK_BBOX_ATTR, STORY_LINK_BBOX_ATTR_CAMEL } from '@/config/config';\nimport { UPDATE_HIGHLIGHTED_BBOX } from '@/store/mutations';\n\nconst TAG = 'a';\n\nexport default class BboxMark extends Mark {\n  get name() {\n    return 'bboxMark';\n  }\n\n  get schema() {\n    return {\n      attrs: {\n        [STORY_LINK_BBOX_ATTR]: {\n          default: null,\n        },\n      },\n      parseDOM: [{\n        tag: TAG,\n        getAttrs(dom) {\n          return {\n            [STORY_LINK_BBOX_ATTR]: dom.dataset[STORY_LINK_BBOX_ATTR],\n          };\n        },\n      }],\n      toDOM: node => [TAG, {\n        [STORY_LINK_BBOX_ATTR]: node.attrs[STORY_LINK_BBOX_ATTR],\n      }, 0],\n    };\n  }\n\n  commands({ type }) {\n    return (attrs) => {\n      const bounds = attrs && [[attrs[0][0], attrs[0][1]], [attrs[1][0], attrs[1][1]]];\n      return toggleMark(type, {\n        [STORY_LINK_BBOX_ATTR]: JSON.stringify(bounds),\n      });\n    };\n  }\n\n  get view() {\n    return {\n      // there are some props available\n      // `node` is a Prosemirror Node Object\n      // `updateAttrs` is a function to update attributes defined in `schema`\n      // `view` is the ProseMirror view instance\n      // `options` is an array of your extension options\n      // `selected` is a boolean which is true when selected\n      // `editor` is a reference to the TipTap editor instance\n      // `getPos` is a function to retrieve the start position of the node\n      // `decorations` is an array of decorations around the node\n      props: ['node', 'updateAttrs', 'view'],\n      methods: {\n        handleClick() {\n          const payload = JSON.parse(this[STORY_LINK_BBOX_ATTR_CAMEL]);\n          this.$store.commit(UPDATE_HIGHLIGHTED_BBOX, payload);\n        },\n      },\n      computed: {\n        isHighlighted() {\n          if (!this.$store.state.highlightedBbox) {\n            return false;\n          }\n          const { lat, lng } = this.$store.state.highlightedBbox;\n          return true;\n        },\n        [STORY_LINK_BBOX_ATTR_CAMEL]: {\n          get() {\n            return this.node.attrs[STORY_LINK_BBOX_ATTR];\n          },\n          set(bbox) {\n            this.updateAttrs({\n              [STORY_LINK_BBOX_ATTR]: bbox,\n            });\n          },\n        },\n      },\n      template: `\n        <a\n          :class=\"{'is-highlighted': isHighlighted}\"\n          :${STORY_LINK_BBOX_ATTR}=\"${STORY_LINK_BBOX_ATTR_CAMEL}\"\n          @click=\"handleClick()\"\n        >\n        </a>\n      `,\n    };\n  }\n}\n","/* eslint class-methods-use-this: 0 */\nimport { Mark } from 'tiptap';\nimport { toggleMark } from 'tiptap-commands';\n\nimport {\n  STORY_LINK_LAT_ATTR,\n  STORY_LINK_LAT_ATTR_CAMEL,\n  STORY_LINK_LNG_ATTR,\n  STORY_LINK_LNG_ATTR_CAMEL,\n} from '@/config/config';\nimport { UPDATE_HIGHLIGHTED_LAT_LNG } from '@/store/mutations';\n\nconst TAG = 'a';\n\nexport default class FeatureMark extends Mark {\n  get name() {\n    return 'featureMark';\n  }\n\n  get schema() {\n    return {\n      attrs: {\n        [STORY_LINK_LAT_ATTR]: {\n          default: null,\n        },\n        [STORY_LINK_LNG_ATTR]: {\n          default: null,\n        },\n      },\n      parseDOM: [{\n        tag: TAG,\n        getAttrs(dom) {\n          return {\n            [STORY_LINK_LAT_ATTR]: dom.dataset[STORY_LINK_LAT_ATTR],\n            [STORY_LINK_LNG_ATTR]: dom.dataset[STORY_LINK_LNG_ATTR],\n          };\n        },\n      }],\n      toDOM: node => [TAG, {\n        [STORY_LINK_LAT_ATTR]: node.attrs[STORY_LINK_LAT_ATTR],\n        [STORY_LINK_LNG_ATTR]: node.attrs[STORY_LINK_LNG_ATTR],\n      }, 0],\n    };\n  }\n\n  commands({ type }) {\n    return (attrs) => {\n      return toggleMark(type, {\n        [STORY_LINK_LAT_ATTR]: attrs && attrs[STORY_LINK_LAT_ATTR],\n        [STORY_LINK_LNG_ATTR]: attrs && attrs[STORY_LINK_LNG_ATTR],\n      });\n    };\n  }\n\n  get view() {\n    return {\n      // there are some props available\n      // `node` is a Prosemirror Node Object\n      // `updateAttrs` is a function to update attributes defined in `schema`\n      // `view` is the ProseMirror view instance\n      // `options` is an array of your extension options\n      // `selected` is a boolean which is true when selected\n      // `editor` is a reference to the TipTap editor instance\n      // `getPos` is a function to retrieve the start position of the node\n      // `decorations` is an array of decorations around the node\n      props: ['node', 'updateAttrs', 'view'],\n      methods: {\n        handleClick() {\n          const payload = {\n            [STORY_LINK_LAT_ATTR]: this[STORY_LINK_LAT_ATTR_CAMEL],\n            [STORY_LINK_LNG_ATTR]: this[STORY_LINK_LNG_ATTR_CAMEL],\n          };\n          this.$store.commit(UPDATE_HIGHLIGHTED_LAT_LNG, payload);\n        },\n      },\n      computed: {\n        isHighlighted() {\n          if (!this.$store.state.highlightedLatLng) {\n            return false;\n          }\n\n          const { lat, lng } = this.$store.state.highlightedLatLng;\n          return lat === this[STORY_LINK_LAT_ATTR_CAMEL] && lng === this[STORY_LINK_LNG_ATTR_CAMEL];\n        },\n        [STORY_LINK_LAT_ATTR_CAMEL]: {\n          get() {\n            return this.node.attrs[STORY_LINK_LAT_ATTR];\n          },\n          set(lat) {\n            this.updateAttrs({\n              [STORY_LINK_LAT_ATTR]: lat,\n            });\n          },\n        },\n        [STORY_LINK_LNG_ATTR_CAMEL]: {\n          get() {\n            return this.node.attrs[STORY_LINK_LNG_ATTR];\n          },\n          set(lng) {\n            this.updateAttrs({\n              [STORY_LINK_LNG_ATTR]: lng,\n            });\n          },\n        },\n      },\n      template: `\n        <a\n          :${STORY_LINK_LNG_ATTR}=\"${STORY_LINK_LNG_ATTR_CAMEL}\"\n          :${STORY_LINK_LAT_ATTR}=\"${STORY_LINK_LAT_ATTR_CAMEL}\"\n          @click=\"handleClick()\"\n        >\n        </a>\n      `,\n    };\n  }\n}\n","<script>\nimport { Editor, EditorContent, EditorMenuBar, EditorMenuBubble } from 'tiptap';\nimport { Heading } from 'tiptap-extensions';\nimport { mapState } from 'vuex';\n\nimport BboxMark from '@/components/editor/BboxMark';\nimport FeatureMark from '@/components/editor/FeatureMark';\nimport { ADD_BOUNDING_BOX_EVENT, ADD_FEATURE_MARK_EVENT, STORY_LINK_BBOX_ATTR, STORY_LINK_LAT_ATTR, STORY_LINK_LNG_ATTR } from '@/config/config';\nimport { UPDATE_HIGHLIGHTED_LAT_LNG, UPDATE_STORY_NAME, UPDATE_STORY_TEXT } from '@/store/mutations';\n\nexport default {\n  name: 'CsEditor',\n  components: {\n    EditorContent,\n    EditorMenuBar,\n    EditorMenuBubble,\n  },\n  data() {\n    return {\n      contentPlaceholder: 'Můžete začít psát...',\n      editor: undefined,\n      keepInBounds: true,\n    };\n  },\n  computed: {\n    ...mapState({\n      editable: state => state.editable,\n      highlightedLatLng: state => state.highlightedLatLng,\n    }),\n    storyName: {\n      get() {\n        return this.$store.state.story.name;\n      },\n      set(value) {\n        this.$store.commit(UPDATE_STORY_NAME, value);\n      },\n    },\n  },\n  watch: {\n    highlightedLatLng() {\n      this.scrollToHighlightedLatLng();\n    },\n  },\n  mounted() {\n    this.editor = this.$createEditor();\n  },\n  methods: {\n    /*\n     * Scrolls to the highlighted feature mark.\n     */\n    scrollToHighlightedLatLng() {\n      if (!this.highlightedLatLng) {\n        return;\n      }\n      const { lat, lng } = this.highlightedLatLng;\n      const textMark = document.querySelector(`[${STORY_LINK_LAT_ATTR}='${lat}'], [${STORY_LINK_LNG_ATTR}='${lng}']`);\n\n      this.$scrollTo(textMark, undefined, {\n        container: document.querySelector('.editor'),\n        offset: -50,\n      });\n    },\n\n    /*\n     * Checks if selected text already has the feature mark on the map.\n     * It renders remove button if true or add button otherwise.\n     * @param {object} selected text attributes\n     * @returns {boolean}\n     */\n    isNewFeatureMarkButtonVisible(attrs) {\n      return attrs && attrs[STORY_LINK_LAT_ATTR];\n    },\n\n    isNewBboxMarkVisible(attrs) {\n      return attrs && attrs[STORY_LINK_BBOX_ATTR];\n    },\n\n    handleAddFeatureMarkClick(fn) {\n      this.$emit(ADD_FEATURE_MARK_EVENT, fn);\n    },\n\n    handleRemoveFeatureMarkClick(fn) {\n      this.$store.commit(UPDATE_HIGHLIGHTED_LAT_LNG, undefined);\n      fn();\n    },\n\n    handleAddBoundingBoxClick(fn) {\n      this.$emit(ADD_BOUNDING_BOX_EVENT, fn);\n    },\n\n    $createEditor() {\n      return new Editor({\n        editable: this.editable,\n        extensions: [\n          new BboxMark(),\n          new FeatureMark(),\n          new Heading({\n            levels: [2, 3, 4], // leave <h1> for the story title\n          }),\n        ],\n        content: this.$store.state.story.text || this.contentPlaceholder,\n        onUpdate: (payload) => {\n          this.$store.commit(UPDATE_STORY_TEXT, payload);\n        },\n      });\n    },\n  },\n\n  beforeDestroy() {\n    this.editor.destroy();\n  },\n};\n</script>\n\n<template>\n  <div class=\"column is-12 has-padding-0 story-text\">\n    <div class=\"story-text__content\">\n      <form v-if=\"editable\" class=\"has-mt-1\">\n        <b-field>\n          <b-input custom-class=\"story-title-input\" v-model=\"storyName\" placeholder=\"Název příběhu\" size=\"is-large\"></b-input>\n        </b-field>\n      </form>\n      <h1 class=\"story-title-input has-mt-1\" v-if=\"!editable\">{{ storyName }}</h1>\n\n      <editor-menu-bar\n        class=\"has-mt-1\"\n        v-if=\"editable\"\n        style=\"background: white;\"\n        :editor=\"editor\"\n        v-slot=\"{ commands, isActive }\">\n        <div class=\"editor-menu-bar buttons\">\n          <b-button\n            title=\"Nadpis 1. úrovně\"\n            size=\"is-small\"\n            class=\"menubar__button\"\n            :class=\"{ 'is-active': isActive.heading({ level: 2 }) }\"\n            @click=\"commands.heading({ level: 2 })\">\n            H1\n          </b-button>\n          <b-button\n            title=\"Nadpis 2. úrovně\"\n            size=\"is-small\"\n            class=\"menubar__button\"\n            :class=\"{ 'is-active': isActive.heading({ level: 3 }) }\"\n            @click=\"commands.heading({ level: 3 })\">\n            H2\n          </b-button>\n          <b-button\n            title=\"Nadpis 3. úrovně\"\n            size=\"is-small\"\n            class=\"menubar__button\"\n            :class=\"{ 'is-active': isActive.heading({ level: 4 }) }\"\n            @click=\"commands.heading({ level: 4 })\">\n            H3\n          </b-button>\n\n          <b-button\n            style=\"margin-left: auto;\"\n            title=\"Uložit příběh\"\n            size=\"is-small\"\n            class=\"menubar__button\"\n            type=\"is-primary\"\n            @click=\"\">Uložit\n          </b-button>\n        </div>\n      </editor-menu-bar>\n\n      <editor-menu-bubble v-if=\"editable\" :editor=\"editor\" :keep-in-bounds=\"keepInBounds\" v-slot=\"{ commands, getMarkAttrs, isActive, menu }\">\n        <div\n          class=\"menububble\"\n          :class=\"{ 'is-active': menu.isActive }\"\n          :style=\"`left: ${menu.left}px; bottom: ${menu.bottom}px;`\">\n\n          <b-button\n            v-if=\"!isNewFeatureMarkButtonVisible(getMarkAttrs('featureMark'))\"\n            class=\"menububble__button menububble__button__mark\"\n            :class=\"{ 'is-active': isActive.featureMark() }\"\n            @click=\"handleAddFeatureMarkClick(commands.featureMark)\"\n            icon-left=\"map-marker-plus\"></b-button>\n\n          <b-button\n            v-if=\"isNewFeatureMarkButtonVisible(getMarkAttrs('featureMark'))\"\n            class=\"menububble__button\"\n            :class=\"{ 'is-active': isActive.featureMark() }\"\n            @click=\"handleRemoveFeatureMarkClick(commands.featureMark)\"\n            icon-left=\"map-marker-minus\"></b-button>\n\n          <b-button\n            v-if=\"!isNewBboxMarkVisible(getMarkAttrs('bboxMark'))\"\n            class=\"menububble__button menububble__button__bbox\"\n            :class=\"{ 'is-active': isActive.bboxMark() }\"\n            @click=\"handleAddBoundingBoxClick(commands.bboxMark)\"\n            icon-left=\"fullscreen\"></b-button>\n\n          <b-button\n            v-if=\"isNewBboxMarkVisible(getMarkAttrs('bboxMark'))\"\n            class=\"menububble__button menububble__button__bbox\"\n            :class=\"{ 'is-active': isActive.bboxMark() }\"\n            @click=\"commands.bboxMark()\"\n            icon-left=\"fullscreen-exit\">\n          </b-button>\n        </div>\n    </editor-menu-bubble>\n\n    <editor-content :class=\"{'editable': this.editable}\" style=\"flex: 1; overflow: auto;\" class=\"editor\" :editor=\"editor\" />\n\n    </div>\n\n  </div>\n</template>\n\n<style lang=\"scss\">\n@import \"../assets/scss/variables.scss\";\n\n.story-text {\n  display: flex;\n  flex: 1 !important;\n  overflow: auto;\n}\n\n.story-text__content {\n  margin-left: 1rem;\n  margin-right: 1rem;\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  overflow: auto;\n}\n\n.story-title-input,\n.story-title-input:active,\n.story-title-input:focus {\n  border: 0;\n  border-radius: 0;\n  border-bottom: 4px dotted $primary;\n  box-shadow: none;\n  color: $text;\n  font-size: 3rem !important;\n  height: 5rem;\n  line-height: 3.5rem;\n  padding-bottom: .5rem;\n  padding-left: 5px;\n}\n\n.editor {\n  padding: 1rem;\n}\n\n.editor.editable {\n  border: 1px solid #d7d7d7;\n  border-radius: 6px;\n  background: #f0eeee;\n  margin-bottom: 1rem;\n}\n\n.ProseMirror-focused {\n  outline: none;\n}\n\n.menububble {\n  position: absolute;\n  display: flex;\n  z-index: 20;\n  background: $primary;\n  border-radius: 5px;\n  padding: 0.3rem;\n  margin-bottom: 0.5rem;\n  transform: translateX(-50%);\n  visibility: hidden;\n  opacity: 0;\n  transition: opacity 0.2s, visibility 0.2s;\n\n  &.is-active {\n    opacity: 1;\n    visibility: visible;\n  }\n\n  &__button {\n    display: inline-flex;\n    background-color: transparent;\n    border: 0;\n    color: white !important;\n    border-radius: 3px;\n    cursor: pointer;\n\n    &:hover,\n    &:focus,\n    &.is-active {\n      background-color: rgba(255, 255, 255, 0.2) !important;\n    }\n\n    &__mark:focus::after,\n    &__bbox:focus::after {\n      font-size: 8px;\n      line-height: 14px;\n      padding-left: 7px;\n    }\n\n    &__mark:focus::after {\n      content: 'Klikněte do mapy';\n    }\n\n    &__bbox:focus::after {\n      content: 'Táhnutím v mapě označte oblast';\n    }\n\n    &:last-child {\n      margin-right: 0;\n    }\n  }\n\n  &__form {\n    display: flex;\n    align-items: center;\n  }\n\n  &__input {\n    font: inherit;\n    border: none;\n    background: transparent;\n    color: white;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsEditor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CsEditor.vue?vue&type=template&id=54905198&\"\nimport script from \"./CsEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./CsEditor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CsEditor.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"column is-6 has-padding-0\"},[_c('div',{staticClass:\"cs-map\"},[_c('div',{attrs:{\"id\":\"cs-map-container\"}},[_c('l-map',{ref:\"csmap\",attrs:{\"center\":_vm.highlightedLatLng || _vm.mapOptions.center,\"zoom\":_vm.mapOptions.zoom},on:{\"click\":function($event){return _vm.handleMapClick($event.latlng)},\"mousedown\":function($event){return _vm.handleMapMouseDown($event.latlng)}}},[_c('l-control',{staticClass:\"leaflet-bar leaflet-control\",attrs:{\"position\":\"topleft\"}},[(_vm.editable)?_c('cs-track-upload-button',{on:_vm._d({},[_vm.TRACK_FILE_UPLOAD_EVENT,function($event){return _vm.handleFileUpload($event)}])}):_vm._e()],1),_c('l-tile-layer',{attrs:{\"url\":_vm.mapOptions.baseLayer}}),_c('l-tile-layer',{attrs:{\"url\":_vm.mapOptions.hikingOverlay,\"layer-type\":\"overlay\",\"opacity\":0.7}}),_c('l-tile-layer',{attrs:{\"url\":_vm.mapOptions.labelsOverlay,\"layer-type\":\"overlay\"}}),(_vm.track)?_c('l-geo-json',{ref:\"cstrack\",attrs:{\"geojson\":_vm.track,\"options\":_vm.trackOptions.style.plain},on:{\"ready\":function($event){return _vm.handleTrackReady($event)}}}):_vm._e(),_vm._l((_vm.bboxes),function(bbox){return _c('l-rectangle',{key:bbox.id,attrs:{\"bounds\":bbox.bounds,\"l-style\":_vm.bboxOptions.selected.style}})}),_vm._l((_vm.featuresWithoutHighlighted),function(f,index){return _c('l-circle-marker',{key:index,attrs:{\"color\":_vm.markerOptions.style.plain.color,\"fill-color\":_vm.markerOptions.style.plain.color,\"fill-opacity\":_vm.markerOptions.style.plain.fillOpacity,\"latLng\":f,\"radius\":_vm.markerOptions.style.common.radius,\"weight\":_vm.markerOptions.style.common.weight},on:{\"click\":_vm.handleFeatureClick}})}),(_vm.highlightedLatLng)?_c('l-circle-marker',{attrs:{\"color\":_vm.markerOptions.style.highlighted.color,\"fill-color\":_vm.markerOptions.style.highlighted.color,\"fill-opacity\":_vm.markerOptions.style.highlighted.fillOpacity,\"latLng\":_vm.highlightedLatLng,\"radius\":_vm.markerOptions.style.common.radius,\"weight\":_vm.markerOptions.style.common.weight},on:{\"click\":_vm.handleFeatureClick}}):_vm._e()],2)],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('file-reader',{staticStyle:{\"height\":\"30px\",\"width\":\"30px\",\"line-height\":\"30px\"},attrs:{\"accept\":\".json\",\"output\":\"text\"},on:{\"reader-load\":_vm.handleFileUpload},scopedSlots:_vm._u([{key:\"reader\",fn:function(props){return [_c('b-button',{staticClass:\"file-upload-button\",attrs:{\"title\":\"Nahrát soubor trasy\",\"size\":\"is-small\",\"icon-left\":\"cloud-upload\"},on:{\"click\":function($event){return _vm.$refs.fileReader.click()}}}),_c('input',{ref:\"fileReader\",staticStyle:{\"visibility\":\"hidden\"},attrs:{\"type\":\"file\",\"accept\":props.accept},on:{\"change\":props.onchange}})]}}])})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport FileReader from 'vue-filereader';\n\nimport { TRACK_FILE_UPLOAD_EVENT } from '@/config/config';\nimport { UPDATE_ERRORS } from '@/store/mutations';\n\nexport default {\n  name: 'CsTrackUploadButton',\n  components: {\n    FileReader,\n  },\n  methods: {\n    handleFileUpload(fileObj) {\n      try {\n        this.$emit(TRACK_FILE_UPLOAD_EVENT, fileObj && JSON.parse(fileObj.data));\n      } catch(e) {\n        this.$store.commit(UPDATE_ERRORS, {\n          title: 'Selhalo nahrání trasy',\n          message: 'Trasu se nepodařilo nahrát. Soubor pravděpodobně není validní.',\n        });\n      }\n    },\n  },\n}\n</script>\n\n<template>\n  <file-reader style=\"height: 30px; width: 30px; line-height: 30px;\"\n    accept=\".json\"\n    output=\"text\"\n    @reader-load=\"handleFileUpload\"\n    >\n    <template #reader=\"props\">\n\n    <b-button\n      class=\"file-upload-button\"\n      @click=\"$refs.fileReader.click()\"\n      title=\"Nahrát soubor trasy\"\n      size=\"is-small\"\n      icon-left=\"cloud-upload\"\n      ></b-button>\n\n      <input\n        style=\"visibility: hidden\"\n        ref=\"fileReader\"\n        type=\"file\"\n        :accept=\"props.accept\"\n        @change=\"props.onchange\"\n        />\n    </template>\n  </file-reader>\n</template>\n\n<style lang=\"scss\" scoped>\n.file-upload-button {\n  border-radius: 0;\n  font-size: 16px;\n  height: 30px;\n  line-height: 30px;\n  padding-left: 0px;\n  padding-right: 0px;\n  padding-top: 5px;\n  text-align: center;\n  width: 30px;\n}\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsTrackUploadButton.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsTrackUploadButton.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CsTrackUploadButton.vue?vue&type=template&id=6f11a710&scoped=true&\"\nimport script from \"./CsTrackUploadButton.vue?vue&type=script&lang=js&\"\nexport * from \"./CsTrackUploadButton.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CsTrackUploadButton.vue?vue&type=style&index=0&id=6f11a710&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6f11a710\",\n  null\n  \n)\n\nexport default component.exports","<script>\nimport { LCircleMarker, LControl, LGeoJson, LMap, LTileLayer, LRectangle } from 'vue2-leaflet';\nimport { mapGetters, mapState } from 'vuex';\nimport { STORY_LINK_CLICK_EVENT, STORY_LINK_LAT_ATTR, STORY_LINK_LNG_ATTR, TRACK_FILE_UPLOAD_EVENT } from '@/config/config';\nimport { bboxOptions, markerOptions, mapOptions, trackOptions } from '@/config/map';\nimport { UPDATE_BOUNDING_BOX_CALLBACK, UPDATE_HIGHLIGHTED_LAT_LNG, UPDATE_FEATURE_MARK_CALLBACK, UPDATE_TRACK } from '@/store/mutations';\nimport CsTrackUploadButton from '@/components/CsTrackUploadButton.vue';\n\nrequire('../../node_modules/leaflet/dist/leaflet.css');\nrequire('leaflet-draw');\n\nexport default {\n  name: 'CsMap',\n  components: {\n    CsTrackUploadButton,\n    LCircleMarker,\n    LControl,\n    LGeoJson,\n    LMap,\n    LTileLayer,\n    LRectangle,\n  },\n  data() {\n    return {\n      STORY_LINK_CLICK_EVENT,\n      TRACK_FILE_UPLOAD_EVENT,\n      addFeatureMark: undefined,\n      bboxOptions,\n      drawControl: undefined,\n      markerOptions,\n      mapOptions,\n      trackOptions,\n      bboxBounds: [undefined, undefined],\n    };\n  },\n  computed: {\n    ...mapState({\n      addBoundingBoxCallback: state => state.addBoundingBoxCallback,\n      addFeatureMarkCallback: state => state.addFeatureMarkCallback,\n      editable: state => state.editable,\n      highlightedLatLng: state => state.highlightedLatLng,\n      track: state => state.story.track,\n    }),\n    ...mapGetters([\n      'bboxes',\n      'features',\n      'featuresWithoutHighlighted',\n    ]),\n  },\n  methods: {\n    /*\n     * @param {L.geoJSON}\n     */\n    handleTrackReady(track) {\n      this.$refs.csmap.mapObject.fitBounds(track.getBounds());\n    },\n\n    /*\n     * Sets feature mark that should be highlighted and scrolled to in the text.\n     */\n    handleFeatureClick(event) {\n      const { lat, lng } = event.latlng;\n      const textMark = document.querySelector(`[data-cs-lat='${lat}'], [data-cs-lng='${lng}']`);\n\n      if (!textMark) {\n        return;\n      }\n\n      this.$store.commit(UPDATE_HIGHLIGHTED_LAT_LNG, {\n        [STORY_LINK_LAT_ATTR]: textMark.getAttribute([STORY_LINK_LAT_ATTR]),\n        [STORY_LINK_LNG_ATTR]: textMark.getAttribute([STORY_LINK_LNG_ATTR]),\n      });\n    },\n\n    /*\n     * Links the position to the selected text.\n     * @param {object}\n     */\n    handleMapClick(latLng) {\n      if (!this.addFeatureMarkCallback || typeof this.addFeatureMarkCallback !== 'function') {\n        return;\n      }\n\n      this.addFeatureMarkCallback({\n        [STORY_LINK_LAT_ATTR]: latLng.lat,\n        [STORY_LINK_LNG_ATTR]: latLng.lng,\n      });\n      this.$store.commit(UPDATE_FEATURE_MARK_CALLBACK, undefined);\n    },\n\n    /*\n     * Links the bounding box to the selected text.\n     */\n    handleMapMouseDown() {\n      if (!this.addBoundingBoxCallback) {\n        return;\n      }\n\n      const map = this.$refs.csmap.mapObject;\n      window.L.drawLocal.draw.handlers.rectangle.tooltip.start = '';\n      window.L.drawLocal.draw.handlers.simpleshape.tooltip.end = '';\n      new window.L.Draw.Rectangle(map, {\n        showArea: false,\n        shapeOptions: this.bboxOptions.plain.style,\n      }).enable();\n\n      map.off(window.L.Draw.Event.CREATED);\n      map.on(window.L.Draw.Event.CREATED, this.$handleCreateRectangle);\n    },\n\n    /*\n     * @param {object} geojson data\n     */\n    handleFileUpload(data) {\n      this.$store.commit(UPDATE_TRACK, data);\n    },\n\n    $handleCreateRectangle(event) {\n      const bounds = event.layer.getBounds();\n      const northWest = bounds.getNorthWest();\n      const southEast = bounds.getSouthEast();\n      const bbox = [\n        [northWest.lat, northWest.lng],\n        [southEast.lat, southEast.lng],\n      ];\n\n      this.addBoundingBoxCallback(bbox);\n      this.$store.commit(UPDATE_BOUNDING_BOX_CALLBACK, undefined);\n    },\n  },\n};\n</script>\n\n<template>\n  <div class=\"column is-6 has-padding-0\">\n    <div class=\"cs-map\">\n      <div id=\"cs-map-container\">\n        <l-map\n          @click=\"handleMapClick($event.latlng)\"\n          @mousedown=\"handleMapMouseDown($event.latlng)\"\n          :center=\"highlightedLatLng || mapOptions.center\"\n          :zoom=\"mapOptions.zoom\"\n          ref=\"csmap\">\n          <l-control class=\"leaflet-bar leaflet-control\" position=\"topleft\" >\n            <cs-track-upload-button v-if=\"editable\" @[TRACK_FILE_UPLOAD_EVENT]=\"handleFileUpload($event)\" />\n          </l-control>\n\n          <l-tile-layer :url=\"mapOptions.baseLayer\" />\n          <l-tile-layer :url=\"mapOptions.hikingOverlay\" layer-type=\"overlay\" :opacity=\"0.7\" />\n          <l-tile-layer :url=\"mapOptions.labelsOverlay\" layer-type=\"overlay\" />\n\n          <l-geo-json @ready=\"handleTrackReady($event)\" v-if=\"track\" :geojson=\"track\" :options=\"trackOptions.style.plain\" ref=\"cstrack\" />\n\n          <l-rectangle v-for=\"bbox in bboxes\" :key=\"bbox.id\" :bounds=\"bbox.bounds\" :l-style=\"bboxOptions.selected.style\" />\n\n                    <l-circle-marker\n                      @click=\"handleFeatureClick\"\n                      :color=\"markerOptions.style.plain.color\"\n                      :fill-color=\"markerOptions.style.plain.color\"\n                      :fill-opacity=\"markerOptions.style.plain.fillOpacity\"\n                      :latLng=\"f\"\n                      :radius=\"markerOptions.style.common.radius\"\n                      :weight=\"markerOptions.style.common.weight\"\n                      :key=\"index\"\n                      v-for=\"(f, index) in featuresWithoutHighlighted\">\n                    </l-circle-marker>\n\n                    <l-circle-marker\n                      v-if=\"highlightedLatLng\"\n                      @click=\"handleFeatureClick\"\n                      :color=\"markerOptions.style.highlighted.color\"\n                      :fill-color=\"markerOptions.style.highlighted.color\"\n                      :fill-opacity=\"markerOptions.style.highlighted.fillOpacity\"\n                      :latLng=\"highlightedLatLng\"\n                      :radius=\"markerOptions.style.common.radius\"\n                      :weight=\"markerOptions.style.common.weight\">\n                    </l-circle-marker>\n\n        </l-map>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.cs-map {\n  height: 100%;\n}\n\n#cs-map-container {\n  width: auto;\n  height: 100%;\n  position: relative;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsMap.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsMap.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CsMap.vue?vue&type=template&id=d5b7a2ac&scoped=true&\"\nimport script from \"./CsMap.vue?vue&type=script&lang=js&\"\nexport * from \"./CsMap.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CsMap.vue?vue&type=style&index=0&id=d5b7a2ac&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d5b7a2ac\",\n  null\n  \n)\n\nexport default component.exports","<script>\nimport { LCircleMarker, LControl, LGeoJson, LMap, LTileLayer, LRectangle } from 'vue2-leaflet';\n\nimport { ADD_BOUNDING_BOX_EVENT, ADD_FEATURE_MARK_EVENT, STORY_LINK_CLICK_EVENT, TRACK_FILE_UPLOAD_EVENT } from '@/config/config';\nimport { UPDATE_BOUNDING_BOX_CALLBACK, UPDATE_FEATURE_MARK_CALLBACK } from '@/store/mutations';\nimport { markerOptions, mapOptions, trackOptions } from '@/config/map';\nimport CsEditor from '@/components/CsEditor.vue';\nimport CsMap from '@/components/CsMap.vue';\n\nrequire('../../node_modules/leaflet/dist/leaflet.css');\n\nexport default {\n  name: 'story-screen',\n  components: {\n    CsEditor,\n    CsMap,\n  },\n  data() {\n    return {\n      storyName: undefined,\n      ready: false,\n      ADD_BOUNDING_BOX_EVENT,\n      ADD_FEATURE_MARK_EVENT,\n      STORY_LINK_CLICK_EVENT,\n      TRACK_FILE_UPLOAD_EVENT,\n      features: [],\n      track: undefined,\n      trackBounds: undefined,\n      addFeatureMark: undefined,\n      markerOptions,\n      mapOptions,\n      trackOptions,\n    };\n  },\n  computed: {\n    editable() {\n      return this.$store.state.editable;\n    },\n  },\n  mounted() {\n    this.ready = this.$router.currentRoute.path === '/story/create';\n  },\n  methods: {\n    /*\n     * Stores provided function to be called later when user clicks location on the map.\n     * @param {Function} tiptap featureMark create function\n     */\n    handleAddFeatureMarkClick(fn) {\n      this.$store.commit(UPDATE_FEATURE_MARK_CALLBACK, fn);\n    },\n\n    handleAddBoundingBoxClick(fn) {\n      this.$store.commit(UPDATE_BOUNDING_BOX_CALLBACK, fn);\n    },\n\n    handleSave() {\n      const result = {\n        name: this.$store.state.story.name,\n        text: this.$store.state.story.text,\n        track: this.$store.state.story.track,\n      };\n      console.log('handleSave', result);\n    },\n  },\n};\n</script>\n<template>\n  <div class=\"container-fluid story-form\">\n    <div style=\"height: 100vh;\" class=\"columns has-margin-0\">\n      <cs-map></cs-map>\n\n      <div style=\"display:flex; flex-direction: column; width: 100%;\">\n        <cs-editor\n          v-if=\"$store.state.story.text || ready\"\n          @[ADD_FEATURE_MARK_EVENT]=\"handleAddFeatureMarkClick($event)\"\n          @[ADD_BOUNDING_BOX_EVENT]=\"handleAddBoundingBoxClick($event)\">\n        </cs-editor>\n      </div>\n      </div>\n    </div>\n</template>\n\n<style lang=\"scss\" scoped>\na[data-cs-lat] {\n  color: #F56C6C;\n  cursor: pointer;\n  text-decoration: underline;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StoryScreen.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StoryScreen.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StoryScreen.vue?vue&type=template&id=267583b0&scoped=true&\"\nimport script from \"./StoryScreen.vue?vue&type=script&lang=js&\"\nexport * from \"./StoryScreen.vue?vue&type=script&lang=js&\"\nimport style0 from \"./StoryScreen.vue?vue&type=style&index=0&id=267583b0&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"267583b0\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column is-6 is-offset-3\"},[_c('h1',{staticClass:\"title is-1 has-text-weight-normal has-text-centered has-mt-2\"},[_vm._v(\"Cartostory\")]),_c('div',{staticClass:\"card has-padding-1\"},[_c('div',{staticClass:\"card-content\"},[(_vm.availableStories.length > 0)?_c('b-field',{attrs:{\"label\":\"Nahrát příběh\"}},[_c('b-select',{attrs:{\"placeholder\":\"Příběh\",\"expanded\":\"\"},on:{\"input\":_vm.handleStorySelect}},_vm._l((_vm.availableStories),function(story){return _c('option',{key:story.name,domProps:{\"value\":story.name}},[_vm._v(_vm._s(story.name)+\"\\n            \")])}),0)],1):_vm._e(),_c('b-field',{attrs:{\"label\":\"URL příběhu\"}},[_c('b-input',{attrs:{\"type\":\"text\",\"expanded\":\"\"},model:{value:(_vm.storyUrl),callback:function ($$v) {_vm.storyUrl=$$v},expression:\"storyUrl\"}})],1),_c('b-button',{attrs:{\"disabled\":_vm.disabledSubmit,\"type\":\"is-primary\"},on:{\"click\":_vm.handleSubmit}},[_vm._v(\"Načíst\")])],1)])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport deburr from 'lodash.deburr';\nimport { mapState } from 'vuex';\n\nimport { UPDATE_ERRORS, UPDATE_LOADING, UPDATE_STORY_URL } from '@/store/mutations';\n\nexport default {\n  name: 'LoadStoryForm',\n  data() {\n    return {\n      currentStory: undefined,\n    };\n  },\n  computed: {\n    ...mapState({\n      availableStories: state => state.availableStories,\n      storyName: state => state.story.name,\n      storyText: state => state.story.text,\n    }),\n    disabledSubmit() {\n      return !this.storyUrl;\n    },\n    storyUrl: {\n      get() {\n        return this.$store.state.storyUrl;\n      },\n      set(value) {\n        this.$store.commit(UPDATE_STORY_URL, value);\n      },\n    },\n  },\n  methods: {\n    async handleSubmit() {\n      try {\n        await this.$store.dispatch('loadStory');\n        const title = deburr(this.storyName).toLowerCase();\n        this.$router.push(`/story/read/${title}`);\n      } catch (e) {\n        this.$store.commit(UPDATE_ERRORS, {\n          title: 'Příběh se nepodařilo nahrát',\n          message: 'Zkontrolujte jeho adresu.',\n        });\n      } finally {\n        this.$store.commit(UPDATE_LOADING, false);\n      }\n    },\n\n    handleStorySelect(storyName) {\n      const story = this.availableStories.find(s => s.name === storyName);\n\n      if (story) {\n        this.storyUrl = story.storyUrl;\n      }\n    },\n  },\n};\n</script>\n\n<template>\n  <div class=\"container\">\n    <div class=\"columns\">\n      <div class=\"column is-6 is-offset-3\">\n        <h1 class=\"title is-1 has-text-weight-normal has-text-centered has-mt-2\">Cartostory</h1>\n\n        <div class=\"card has-padding-1\">\n          <div class=\"card-content\">\n          <b-field v-if=\"availableStories.length > 0\" label=\"Nahrát příběh\">\n            <b-select placeholder=\"Příběh\" expanded @input=\"handleStorySelect\">\n              <option\n                v-for=\"story in availableStories\"\n                :key=\"story.name\"\n                :value=\"story.name\">{{story.name}}\n              </option>\n            </b-select>\n          </b-field>\n\n          <b-field label=\"URL příběhu\">\n            <b-input v-model=\"storyUrl\" type=\"text\" expanded></b-input>\n          </b-field>\n\n          <b-button :disabled=\"disabledSubmit\" type=\"is-primary\" @click=\"handleSubmit\">Načíst</b-button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoadStoryForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoadStoryForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LoadStoryForm.vue?vue&type=template&id=6706dcd3&scoped=true&\"\nimport script from \"./LoadStoryForm.vue?vue&type=script&lang=js&\"\nexport * from \"./LoadStoryForm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6706dcd3\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\nimport Router from 'vue-router';\n\nimport { UPDATE_EDITABLE, UPDATE_LOADING } from '@/store/mutations';\nimport store from '@/store/newStore';\nimport Landing from '@/views/Landing.vue';\nimport StoryScreen from '@/views/StoryScreen.vue';\nimport LoadStoryForm from './views/LoadStoryForm.vue';\n\nVue.use(Router);\n\nexport const routes = [\n  {\n    path: '/',\n    component: Landing,\n  },\n  {\n    path: '/story/read/:title',\n    component: StoryScreen,\n    beforeEnter(to, from, next) {\n      store.commit(UPDATE_EDITABLE, false);\n      if (store.state.storyUrl) {\n        next();\n      } else {\n        next('/story/load');\n      }\n    },\n  },\n  {\n    path: '/story/load',\n    component: LoadStoryForm,\n  },\n  {\n    path: '/story/create',\n    component: StoryScreen,\n    beforeEnter(to, from, next) {\n      store.commit(UPDATE_EDITABLE, true);\n      next();\n    },\n  },\n];\n\nconst router = new Router({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes,\n});\n\nrouter.beforeEach((to, from, next) =>  {\n  store.commit(UPDATE_LOADING, true);\n  next();\n});\n\nrouter.afterEach(() =>  {\n  store.commit(UPDATE_LOADING, false);\n});\n\nexport default router;\n","import Buefy from 'buefy'\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nimport VueLogger from 'vuejs-logger';\nimport VueScrollTo from 'vue-scrollto';\nimport 'normalize.css';\nimport './assets/scss/index.scss';\n\nimport App from './App.vue';\nimport router from './router';\nimport store from './store/newStore';\n\nVue.config.productionTip = false;\nVue.use(Buefy);\nVue.use(VueLogger);\nVue.use(VueScrollTo);\nVue.use(Vuex);\n\nnew Vue({\n  store,\n  router,\n  render: h => h(App),\n}).$mount('#js-cartostory');\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Landing.vue?vue&type=style&index=0&id=38eae450&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Landing.vue?vue&type=style&index=0&id=38eae450&lang=scss&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsTrackUploadButton.vue?vue&type=style&index=0&id=6f11a710&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsTrackUploadButton.vue?vue&type=style&index=0&id=6f11a710&lang=scss&scoped=true&\""],"sourceRoot":""}