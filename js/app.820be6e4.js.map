{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/CsEditor.vue?0c71","webpack:///./src/views/Landing.vue?313a","webpack:///./src/auth/index.js","webpack:///./src/store/mutations.js","webpack:///./src/App.vue?efb9","webpack:///./src/components/CsMenu.vue?4111","webpack:///src/components/CsMenu.vue","webpack:///./src/components/CsMenu.vue?ead5","webpack:///./src/components/CsMenu.vue","webpack:///./src/components/CsNotification.vue?9e6a","webpack:///src/components/CsNotification.vue","webpack:///./src/components/CsNotification.vue?058b","webpack:///./src/components/CsNotification.vue","webpack:///src/App.vue","webpack:///./src/App.vue?a37b","webpack:///./src/App.vue","webpack:///./src/services/axios.js","webpack:///./src/services/story.js","webpack:///./src/config/config.js","webpack:///./src/store/store.helpers.js","webpack:///./src/store/newStore.js","webpack:///./src/views/Login.vue?94fb","webpack:///src/views/Login.vue","webpack:///./src/views/Login.vue?f597","webpack:///./src/views/Login.vue","webpack:///./src/views/LoginCallback.vue?b3b3","webpack:///./src/services/signup.js","webpack:///src/views/LoginCallback.vue","webpack:///./src/views/LoginCallback.vue?3f2f","webpack:///./src/views/LoginCallback.vue","webpack:///./src/views/Landing.vue?fd75","webpack:///src/views/Landing.vue","webpack:///./src/views/Landing.vue?30c7","webpack:///./src/views/Landing.vue?8862","webpack:///./src/views/StoryScreen.vue?5a35","webpack:///./src/components/CsEditor.vue?e3f6","webpack:///./src/utils/utils.js","webpack:///./src/components/editor/BboxMark.js","webpack:///./src/components/editor/FeatureMark.js","webpack:///./src/components/editor/MenuBar.vue?c20f","webpack:///src/components/editor/MenuBar.vue","webpack:///./src/components/editor/MenuBar.vue?dba4","webpack:///./src/components/editor/MenuBar.vue","webpack:///./src/components/editor/MenuBubble.vue?6a85","webpack:///src/components/editor/MenuBubble.vue","webpack:///./src/components/editor/MenuBubble.vue?f1ca","webpack:///./src/components/editor/MenuBubble.vue?6819","webpack:///src/components/CsEditor.vue","webpack:///./src/components/CsEditor.vue?8bab","webpack:///./src/components/CsEditor.vue?36af","webpack:///./src/components/CsMap.vue?ed01","webpack:///./src/config/map.js","webpack:///./src/components/CsTrackUploadButton.vue?7100","webpack:///src/components/CsTrackUploadButton.vue","webpack:///./src/components/CsTrackUploadButton.vue?3d57","webpack:///./src/components/CsTrackUploadButton.vue?0963","webpack:///src/components/CsMap.vue","webpack:///./src/components/CsMap.vue?110c","webpack:///./src/components/CsMap.vue?55d9","webpack:///src/views/StoryScreen.vue","webpack:///./src/views/StoryScreen.vue?262c","webpack:///./src/views/StoryScreen.vue?65e6","webpack:///./src/views/LoadStoryForm.vue?dad4","webpack:///src/views/LoadStoryForm.vue","webpack:///./src/views/LoadStoryForm.vue?6a1a","webpack:///./src/views/LoadStoryForm.vue","webpack:///./src/router.js","webpack:///./src/main.js","webpack:///./src/components/editor/MenuBubble.vue?95d2","webpack:///./src/components/CsMap.vue?2c75","webpack:///./src/views/StoryScreen.vue?eb39","webpack:///./src/components/CsTrackUploadButton.vue?6dee"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","instance","REMOVE_ERROR","UPDATE_BBOX_BEING_ADDED","UPDATE_ERRORS","UPDATE_EDITABLE","UPDATE_FEATURE_BEING_ADDED","UPDATE_HIGHLIGHTED_BBOX","UPDATE_HIGHLIGHTED_LAT_LNG","UPDATE_LOADING","UPDATE_MAP_CENTER","UPDATE_SHOULD_TEXT_SCROLL","UPDATE_STORY","UPDATE_STORY_AUTHOR","UPDATE_STORY_NAME","UPDATE_STORY_TEXT","UPDATE_STORY_URL","UPDATE_TOKEN","UPDATE_TRACK","DEFAULT_REDIRECT_CALLBACK","history","replaceState","document","title","location","pathname","getInstance","useAuth0","onRedirectCallback","redirectUri","origin","options","Vue","loading","isAuthenticated","user","auth0Client","popupOpen","error","methods","loginWithPopup","this","console","getUser","handleRedirectCallback","loginWithRedirect","getIdTokenClaims","getTokenSilently","getTokenWithPopup","logout","created","createAuth0Client","domain","client_id","clientId","audience","redirect_uri","search","includes","appState","Auth0Plugin","install","$auth","_vm","_h","$createElement","_c","_self","staticClass","attrs","on","$event","staticRenderFns","slot","path","_v","_e","_s","picture","returnTo","component","computed","errors","$store","state","forEach","indefinite","position","type","message","onAction","watch","components","CsMenu","CsNotification","axiosInstance","axios","defaults","baseURL","process","headers","post","put","save","story","token","id","rest","update","load","Authorization","STORY_LINK_BBOX_ATTR","STORY_LINK_BBOX_ATTR_CAMEL","toCamelCase","STORY_LINK_LAT_ATTR","STORY_LINK_LNG_ATTR","STORY_LINK_LAT_ATTR_CAMEL","STORY_LINK_LNG_ATTR_CAMEL","STORY_LINK_CLICK_EVENT","TRACK_FILE_UPLOAD_EVENT","str","split","map","item","idx","toUpperCase","join","last","xs","set","val","setPath","obj","reduce","acc","x","use","Vuex","auth","undefined","editable","bboxBeingAdded","active","bounds","featureBeingAdded","storyUrl","author","text","track","availableStories","highlightedBbox","highlightedLatLng","shouldTextScroll","mutations","findIndex","e","newErorr","bbox","payload","lat","lng","latLng","Number","parseFloat","actions","updateTrack","commit","updateStoryText","loadStory","email","getters","content","doc","JSON","parse","stringify","bboxes","pickDeep","mapDeep","v","leavesOnly","filter","upperLeft","lowerRight","highlighted","upperLeftLat","upperLeftLng","lowerRightLat","lowerRightLng","every","features","chunk","Store","strict","_m","login","signup","loadingSignup","$router","$handleSignupError","response","$setAuthorizationHeader","staticStyle","model","callback","$$v","storyName","expression","handleStartEditing","saving","editor","scopedSlots","_u","fn","handleCancelEditing","proxy","handleSave","handleContentUpdate","nativeOn","class","getBboxString","getBboxSelector","getLatLngSelector","querySelector","TAG","BboxMark","toggleMark","default","parseDOM","tag","getAttrs","dom","dataset","toDOM","node","props","handleClick","isHighlighted","updateAttrs","template","Mark","FeatureMark","ref","commands","isActive","heading","level","image","showImagePrompt","_t","EditorMenuBar","src","command","getMarkAttrs","menu","style","isNewFeatureMarkButtonVisible","featureMark","handleAddFeatureMarkClick","handleRemoveFeatureMarkClick","isNewBboxMarkVisible","bboxMark","handleAddBoundingBoxClick","bboxAddedCallback","featureMarkAddedCallback","EditorMenuBubble","$emit","feature","tiptapCommand","EditorContent","MenuBubble","MenuBar","previousContent","storyId","keepInBounds","showEditButton","scrollToHighlighted","beforeMount","$hideScrollbar","beforeDestroy","documentElement","classList","remove","destroy","$route","params","mounted","$createEditor","setContent","$buefy","dialog","confirm","cancelText","confirmText","onCancel","onConfirm","setOptions","$scrollTo","container","offset","$getHighlightedNode","extensions","add","mapBounds","mapCenter","mapOptions","zoom","handleMapClick","latlng","handleMapMouseDown","_d","handleFileUpload","baseLayer","hikingOverlay","labelsOverlay","trackOptions","plain","handleTrackReady","_l","bboxOptions","selected","handleBboxClick","f","index","markerOptions","color","fillOpacity","common","radius","weight","handleFeatureClick","center","edgeMarker","opacity","inBbox","edge","icon","iconUrl","iconRetinaUrl","shadowUrl","iconSize","iconAnchor","popupAnchor","tooltipAnchor","shadowSize","dashArray","hovered","fillColor","$refs","fileReader","click","accept","onchange","FileReader","fileObj","CsTrackUploadButton","LCircleMarker","LControl","LGeoJson","LMap","LTileLayer","LRectangle","drawControl","recenterMap","L","latLngBounds","bboxCenter","highlightedFeatureMapCenter","currentMapCenter","csmap","mapObject","fitBounds","getBounds","textMark","drawLocal","draw","handlers","rectangle","tooltip","start","simpleshape","end","Draw","Rectangle","showArea","shapeOptions","off","Event","CREATED","$handleCreateRectangle","CsEditor","CsMap","handleStorySelect","domProps","disabledSubmit","handleSubmit","currentStory","Router","routes","Landing","Login","LoginCallback","StoryScreen","beforeEnter","to","from","next","store","LoadStoryForm","router","base","beforeEach","afterEach","require","config","productionTip","Buefy","VueLogger","VueScrollTo","targetUrl","render","h","App","$mount","auth0Instance","$watch"],"mappings":"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","file":"js/app.820be6e4.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsEditor.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsEditor.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Landing.vue?vue&type=style&index=0&id=79f09e50&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Landing.vue?vue&type=style&index=0&id=79f09e50&lang=scss&scoped=true&\"","import Vue from 'vue';\nimport createAuth0Client from '@auth0/auth0-spa-js';\n\n/** Define a default action to perform after authentication */\nconst DEFAULT_REDIRECT_CALLBACK = () => window.history.replaceState({}, document.title, window.location.pathname);\n\nlet instance;\n\n/** Returns the current instance of the SDK */\nexport const getInstance = () => instance;\n\n/** Creates an instance of the Auth0 SDK. If one has already been created, it returns that instance */\nexport const useAuth0 = ({\n  onRedirectCallback = DEFAULT_REDIRECT_CALLBACK,\n  redirectUri = `${window.location.origin}/login-callback`,\n  ...options\n}) => {\n  if (instance) return instance;\n\n  // The 'instance' is simply a Vue object\n  instance = new Vue({\n    data() {\n      return {\n        loading: true,\n        isAuthenticated: false,\n        user: {},\n        auth0Client: null,\n        popupOpen: false,\n        error: null,\n      };\n    },\n    methods: {\n      /** Authenticates the user using a popup window */\n      async loginWithPopup(o) {\n        this.popupOpen = true;\n\n        try {\n          await this.auth0Client.loginWithPopup(o);\n        } catch (e) {\n          // eslint-disable-next-line\n          console.error(e);\n        } finally {\n          this.popupOpen = false;\n        }\n\n        this.user = await this.auth0Client.getUser();\n        this.isAuthenticated = true;\n      },\n      /** Handles the callback when logging in using a redirect */\n      async handleRedirectCallback() {\n        this.loading = true;\n        try {\n          await this.auth0Client.handleRedirectCallback();\n          this.user = await this.auth0Client.getUser();\n          this.isAuthenticated = true;\n        } catch (e) {\n          this.error = e;\n        } finally {\n          this.loading = false;\n        }\n      },\n      /** Authenticates the user using the redirect method */\n      loginWithRedirect(o) {\n        return this.auth0Client.loginWithRedirect(o);\n      },\n      /** Returns all the claims present in the ID token */\n      getIdTokenClaims(o) {\n        return this.auth0Client.getIdTokenClaims(o);\n      },\n      /** Returns the access token. If the token is invalid or missing, a new one is retrieved */\n      getTokenSilently(o) {\n        return this.auth0Client.getTokenSilently(o);\n      },\n      /** Gets the access token using a popup window */\n\n      getTokenWithPopup(o) {\n        return this.auth0Client.getTokenWithPopup(o);\n      },\n      /** Logs the user out and removes their session on the authorization server */\n      logout(o) {\n        return this.auth0Client.logout(o);\n      },\n    },\n    /** Use this lifecycle method to instantiate the SDK client */\n    async created() {\n      // Create a new instance of the SDK client using members of the given options object\n      this.auth0Client = await createAuth0Client({\n        domain: options.domain,\n        client_id: options.clientId,\n        audience: options.audience,\n        redirect_uri: redirectUri,\n      });\n\n      try {\n        // If the user is returning to the app after authentication..\n        if (\n          window.location.search.includes('code=') && window.location.search.includes('state=')\n        ) {\n          // handle the redirect and retrieve tokens\n          const { appState } = await this.auth0Client.handleRedirectCallback();\n\n          // Notify subscribers that the redirect callback has happened, passing the appState\n          // (useful for retrieving any pre-authentication state)\n          onRedirectCallback(appState);\n        }\n      } catch (e) {\n        this.error = e;\n      } finally {\n        // Initialize our internal authentication state\n        this.isAuthenticated = await this.auth0Client.isAuthenticated();\n        this.user = await this.auth0Client.getUser();\n        this.loading = false;\n      }\n    },\n  });\n\n  return instance;\n};\n\n// Create a simple Vue plugin to expose the wrapper object throughout the application\nexport const Auth0Plugin = {\n  // eslint-disable-next-line no-shadow\n  install(Vue, options) {\n    // eslint-disable-next-line no-param-reassign\n    Vue.prototype.$auth = useAuth0(options);\n  },\n};\n","// new mutations\nexport const REMOVE_ERROR = 'REMOVE_ERROR';\nexport const UPDATE_BBOX_BEING_ADDED = 'UPDATE_BBOX_BEING_ADDED';\nexport const UPDATE_BOUNDING_BOX_CALLBACK = 'UPDATE_BOUNDING_BOX_CALLBACK';\nexport const UPDATE_ERRORS = 'UPDATE_ERRORS';\nexport const UPDATE_EDITABLE = 'UPDATE_EDITABLE';\nexport const UPDATE_FEATURE_BEING_ADDED = 'UPDATE_FEATURE_BEING_ADDED';\nexport const UPDATE_HIGHLIGHTED_BBOX = 'UPDATE_HIGHLIGHTED_BBOX';\nexport const UPDATE_HIGHLIGHTED_LAT_LNG = 'UPDATE_HIGHLIGHTED_LAT_LNG';\nexport const UPDATE_LOADING = 'UPDATE_LOADING';\nexport const UPDATE_MAP_CENTER = 'UPDATE_MAP_CENTER';\nexport const UPDATE_SHOULD_TEXT_SCROLL = 'UPDATE_SHOULD_TEXT_SCROLL';\nexport const UPDATE_STORY = 'UPDATE_STORY';\nexport const UPDATE_STORY_AUTHOR = 'UPDATE_STORY_AUTHOR';\nexport const UPDATE_STORY_NAME = 'UPDATE_STORY_NAME';\nexport const UPDATE_STORY_TEXT = 'UPDATE_STORY_TEXT';\nexport const UPDATE_STORY_URL = 'UPDATE_STORY_URL';\nexport const UPDATE_TOKEN = 'UPDATE_TOKEN';\nexport const UPDATE_TRACK = 'UPDATE_TRACK';\n\nexport const RESET_HIGHLIGHTED_LINK = 'RESET_HIGHLIGHTED_LINK';\nexport const SET_BBOX = 'SET_BBOX';\nexport const SET_BBOX_HOVERED = 'SET_BBOX_HOVERED';\nexport const SET_FEATURES_URL = 'SET_FEATURES_URL';\nexport const SET_HIGHLIGHTED_FEATURE = 'SET_HIGHLIGHTED_FEATURE';\nexport const SET_SHOULD_SCROLL_TO_FEATURE = 'SET_SHOULD_SCROLL_TO_FEATURE';\nexport const SET_STORY_NAME = 'SET_STORY_NAME';\nexport const SET_STORY_URL = 'SET_STORY_URL';\nexport const SET_TRACK_URL = 'SET_TRACK_URL';\n\n// story mutations\nexport const SET_STORY = 'SET_STORY';\n\n// track mutations\nexport const SET_TRACK = 'SET_TRACK';\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"section\",attrs:{\"id\":\"js-app\"}},[_c('cs-menu'),_c('router-view'),_c('cs-notification'),_c('b-loading',{attrs:{\"is-full-page\":true,\"active\":_vm.loading},on:{\"update:active\":function($event){_vm.loading=$event}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-navbar',{attrs:{\"shadow\":true,\"transparent\":true}},[_c('template',{slot:\"brand\"},[_c('b-navbar-item',{attrs:{\"tag\":\"router-link\",\"to\":{ path: '/' }}},[_c('strong',[_vm._v(\"Cartostory\")])])],1),_c('template',{slot:\"start\"},[_c('b-navbar-item',{attrs:{\"tag\":\"router-link\",\"to\":{ path: '/about' }}},[_vm._v(\"O projektu\")]),(_vm.$auth.isAuthenticated)?_c('b-navbar-item',{attrs:{\"tag\":\"router-link\",\"to\":{ path: '/stories' }}},[_vm._v(\"Moje příběhy\")]):_vm._e(),(_vm.$auth.isAuthenticated)?_c('b-navbar-item',{attrs:{\"tag\":\"router-link\",\"to\":{ path: '/story/create' }}},[_vm._v(\"Napsat příběh\")]):_vm._e()],1),_c('template',{slot:\"end\"},[_c('b-navbar-item',{attrs:{\"tag\":\"div\"}},[_c('div',{staticClass:\"buttons\"},[(!_vm.$auth.isAuthenticated)?_c('b-button',{attrs:{\"type\":\"is-primary\",\"tag\":\"router-link\",\"to\":\"/login\",\"outlined\":\"\"}},[_vm._v(\"Přihlásit\")]):_vm._e()],1)]),(!_vm.$auth.loading && _vm.$auth.isAuthenticated)?_c('b-navbar-dropdown',{attrs:{\"right\":true,\"arrowless\":true}},[_c('template',{slot:\"label\"},[_c('span',{staticClass:\"has-text-grey-lighter\"},[_vm._v(_vm._s(_vm.$auth.user.name))]),(_vm.$auth.user.picture)?_c('figure',{staticClass:\"has-pl-1 image\"},[_c('img',{staticClass:\"is-rounded\",attrs:{\"src\":_vm.$auth.user.picture}})]):_vm._e()]),_c('b-navbar-item',{attrs:{\"href\":\"#\"}},[_c('b-button',{attrs:{\"type\":\"is-text\",\"outlined\":\"\"},on:{\"click\":_vm.logout}},[_vm._v(\"Odhlásit\")])],1)],2):_vm._e()],1)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nexport default {\n  methods: {\n    logout() {\n      this.$auth.logout({\n        returnTo: window.location.origin,\n      });\n    },\n  },\n};\n</script>\n\n<template>\n  <b-navbar :shadow=\"true\" :transparent=\"true\">\n    <template slot=\"brand\">\n      <b-navbar-item tag=\"router-link\" :to=\"{ path: '/' }\"><strong>Cartostory</strong></b-navbar-item>\n    </template>\n    <template slot=\"start\">\n      <b-navbar-item tag=\"router-link\" :to=\"{ path: '/about' }\">O projektu</b-navbar-item>\n      <b-navbar-item v-if=\"$auth.isAuthenticated\" tag=\"router-link\" :to=\"{ path: '/stories' }\">Moje příběhy</b-navbar-item>\n      <b-navbar-item v-if=\"$auth.isAuthenticated\" tag=\"router-link\" :to=\"{ path: '/story/create' }\">Napsat příběh</b-navbar-item>\n    </template>\n\n    <template slot=\"end\">\n      <b-navbar-item tag=\"div\">\n        <div class=\"buttons\">\n          <b-button v-if=\"!$auth.isAuthenticated\" type=\"is-primary\" tag=\"router-link\" to=\"/login\" outlined>Přihlásit</b-button>\n        </div>\n      </b-navbar-item>\n\n      <b-navbar-dropdown :right=\"true\" :arrowless=\"true\" v-if=\"!$auth.loading && $auth.isAuthenticated\" >\n        <template slot=\"label\">\n          <span class=\"has-text-grey-lighter\">{{ $auth.user.name }}</span>\n          <figure v-if=\"$auth.user.picture\" class=\"has-pl-1 image\">\n            <img class=\"is-rounded\" :src=\"$auth.user.picture\" />\n          </figure>\n        </template>\n        <b-navbar-item href=\"#\">\n          <b-button type=\"is-text\" outlined @click=\"logout\">Odhlásit</b-button>\n        </b-navbar-item>\n      </b-navbar-dropdown>\n\n    </template>\n  </b-navbar>\n</template>\n\n<style lang=\"scss\" scoped>\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsMenu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsMenu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CsMenu.vue?vue&type=template&id=af3f5e1c&scoped=true&\"\nimport script from \"./CsMenu.vue?vue&type=script&lang=js&\"\nexport * from \"./CsMenu.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"af3f5e1c\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\"div\")}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport { REMOVE_ERROR } from '@/store/mutations';\n\nexport default {\n  name: 'CsNotification',\n  computed: {\n    errors() {\n      this.$store.state.errors.forEach(e => {\n        this.$buefy.snackbar.open({\n          indefinite: true,\n          position: 'is-top-right',\n          type: 'is-danger',\n          message: `<strong>${e.title}</strong><br/><p>${e.message}</p>`,\n          onAction: () => {\n            this.$store.commit(REMOVE_ERROR, e);\n          },\n        });\n        this.$store.commit(REMOVE_ERROR, e);\n      });\n      return this.$store.state.errors;\n    },\n  },\n  watch: {\n    errors() {\n      return this.errors;\n    },\n  },\n};\n</script>\n\n<template>\n\n</template>\n\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsNotification.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsNotification.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CsNotification.vue?vue&type=template&id=010a15f2&\"\nimport script from \"./CsNotification.vue?vue&type=script&lang=js&\"\nexport * from \"./CsNotification.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<script>\nimport CsMenu from '@/components/CsMenu.vue';\nimport CsNotification from '@/components/CsNotification.vue';\n\nexport default {\n  name: 'app',\n  components: {\n    CsMenu,\n    CsNotification,\n  },\n  computed: {\n    loading() {\n      return this.$store.state.loading;\n    },\n  },\n};\n</script>\n\n<template>\n  <div class=\"section\" id=\"js-app\">\n    <cs-menu />\n    <router-view/>\n    <cs-notification/>\n    <b-loading :is-full-page=\"true\" :active.sync=\"loading\"></b-loading>\n  </div>\n</template>\n\n<style lang=\"scss\">\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=44803141&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import axios from 'axios';\n\nconst axiosInstance = axios.create();\n\naxiosInstance.defaults.baseURL = process.env.VUE_APP_BASE_API_URL;\naxiosInstance.defaults.headers.post['Content-Type'] = 'application/json';\naxiosInstance.defaults.headers.get['Content-Type'] = 'application/json';\naxiosInstance.defaults.headers.put['Content-Type'] = 'application/json';\n\nexport default axiosInstance;\n","/* eslint-disable import/prefer-default-export */\nimport axiosInstance from '@/services/axios';\n\n/*\n * Creates new story.\n * @param {string} user email\n * @param {object} story\n * @return {string} story id\n */\nexport const save = async (story, token) => {\n  const { id, ...rest } = story;\n  let result;\n\n  if (id) {\n    // eslint-disable-next-line no-use-before-define\n    result = await update(id, rest, token);\n  } else {\n    // eslint-disable-next-line no-use-before-define\n    result = await create(rest, token);\n  }\n\n  return result;\n};\n\nexport const load = async (id, token) => {\n  const result = await axiosInstance.get(\n    `/story/${id}`,\n    {\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    },\n  );\n\n  return result;\n};\n\nasync function create(story, token) {\n  const result = await axiosInstance.post(\n    '/story',\n    { story },\n    {\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    },\n  );\n\n  return result.data.id;\n}\n\nasync function update(id, story, token) {\n  const result = await axiosInstance.put(\n    `/story/${id}`,\n    { story },\n    {\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    },\n  );\n\n  return result.data.id;\n}\n","export const SCROLL_CONTAINER_ID = 'story-scrolling-container';\nexport const STORY_LINK_BBOX_ATTR = 'data-cs-bbox';\nexport const STORY_LINK_BBOX_ATTR_CAMEL = toCamelCase(STORY_LINK_BBOX_ATTR);\nexport const STORY_LINK_DATA_ID = 'data-cs-id';\nexport const STORY_LINK_LAT_ATTR = 'data-cs-lat';\nexport const STORY_LINK_LNG_ATTR = 'data-cs-lng';\nexport const STORY_LINK_LAT_ATTR_CAMEL = toCamelCase(STORY_LINK_LAT_ATTR);\nexport const STORY_LINK_LNG_ATTR_CAMEL = toCamelCase(STORY_LINK_LNG_ATTR);\nexport const STORY_LINK_CLICK_EVENT = 'mark-click';\nexport const ADD_BOUNDING_BOX_EVENT = 'add-bounding-box';\nexport const ADD_FEATURE_MARK_EVENT = 'add-feature-mark';\nexport const SAVE_EVENT = 'save';\nexport const TRACK_FILE_UPLOAD_EVENT = 'track-file-upload';\n\nfunction toCamelCase(str) {\n  return str\n    .split('-')\n    .map((item, idx) => idx > 0 ? item.slice(0,1).toUpperCase() + item.slice(1) : item)\n    .join('');\n}\n","// https://gist.github.com/rhythnic/6521495650a215ccab8bf7120949fb7d?source=post_page\nconst last = xs => xs[xs.length - 1];\n\nexport const toggle = key => (state) => { state[key] = !state[key]; };\n\nexport const set = key => (state, val) => { state[key] = val; };\n\nexport const getPath = (obj, path) => {\n    return path.reduce((acc, key) =>\n        (acc && acc[key] !== 'undefined') ? acc[key] : undefined, obj);\n}\n\nexport const setPath = path => (state, val) => {\n  const obj = path.slice(0, -1).reduce((acc, x, i) => {\n    if (!(x in acc)) {\n      acc[x] = typeof path[i + 1] === 'number' ? [] : {};\n    }\n    return acc[x];\n  }, state);\n  obj[last(path)] = val;\n};\n","import Vue from 'vue';\nimport Vuex from 'vuex';\nimport chunk from 'lodash.chunk';\nimport mapDeep from 'deepdash-es/mapDeep';\nimport pickDeep from 'deepdash-es/pickDeep';\n\nimport { load } from '@/services/story';\nimport { STORY_LINK_BBOX_ATTR, STORY_LINK_LAT_ATTR, STORY_LINK_LNG_ATTR } from '@/config/config';\nimport {\n  REMOVE_ERROR,\n  UPDATE_BBOX_BEING_ADDED,\n  UPDATE_EDITABLE,\n  UPDATE_ERRORS,\n  UPDATE_FEATURE_BEING_ADDED,\n  UPDATE_HIGHLIGHTED_BBOX,\n  UPDATE_HIGHLIGHTED_LAT_LNG,\n  UPDATE_LOADING,\n  UPDATE_MAP_CENTER,\n  UPDATE_SHOULD_TEXT_SCROLL,\n  UPDATE_STORY,\n  UPDATE_STORY_AUTHOR,\n  UPDATE_STORY_NAME,\n  UPDATE_STORY_TEXT,\n  UPDATE_STORY_URL,\n  UPDATE_TOKEN,\n  UPDATE_TRACK,\n} from '@/store/mutations';\nimport { set, setPath } from './store.helpers';\n\nVue.use(Vuex);\n\nconst state = {\n  auth: {\n    token: undefined,\n  },\n  editable: false,\n  errors: [],\n  bboxBeingAdded: {\n    active: false,\n    bounds: undefined,\n  },\n  featureBeingAdded: {\n    active: false,\n    position: undefined,\n  },\n  loading: false,\n  storyUrl: undefined,\n  story: {\n    author: undefined,\n    name: undefined,\n    text: undefined,\n    track: undefined,\n  },\n  availableStories: [],\n  highlightedBbox: undefined,\n  highlightedLatLng: undefined,\n  shouldTextScroll: undefined,\n};\n\nexport const mutations = {\n  // eslint-disable-next-line no-shadow\n  [UPDATE_TOKEN]: setPath(['auth', 'token']),\n  /* eslint-disable-next-line no-shadow */\n  [REMOVE_ERROR](state, error) {\n    const idx = state.errors.findIndex(e => e.title === error.title && e.message === error.message);\n    if (idx > -1) {\n      state.errors.splice(idx, 1);\n    }\n  },\n  [UPDATE_BBOX_BEING_ADDED]: set('bboxBeingAdded'),\n  [UPDATE_FEATURE_BEING_ADDED]: set('featureBeingAdded'),\n  [UPDATE_EDITABLE]: set('editable'),\n  /* eslint-disable-next-line no-shadow */\n  [UPDATE_ERRORS](state, newErorr) {\n    state.errors = [...state.errors, newErorr];\n  },\n  /* eslint-disable-next-line no-shadow */\n  [UPDATE_HIGHLIGHTED_BBOX](state, bbox) {\n    let payload;\n\n    if (bbox) {\n      payload = [\n        {\n          lat: bbox[0][0],\n          lng: bbox[0][1],\n        },\n        {\n          lat: bbox[1][0],\n          lng: bbox[1][1],\n        },\n      ];\n    }\n\n    state.highlightedBbox = payload;\n  },\n  /* eslint-disable-next-line no-shadow */\n  [UPDATE_HIGHLIGHTED_LAT_LNG](state, latLng) {\n    if (!latLng) {\n      state.highlightedLatLng = undefined;\n    } else {\n      state.highlightedLatLng = {\n        lat: Number.parseFloat(latLng[STORY_LINK_LAT_ATTR]),\n        lng: Number.parseFloat(latLng[STORY_LINK_LNG_ATTR]),\n      };\n    }\n  },\n  [UPDATE_LOADING]: set('loading'),\n  [UPDATE_MAP_CENTER]: setPath(['map', 'center']),\n  [UPDATE_SHOULD_TEXT_SCROLL]: set('shouldTextScroll'),\n  [UPDATE_STORY]: set('story'),\n  [UPDATE_STORY_AUTHOR]: setPath(['story', 'author']),\n  [UPDATE_STORY_NAME]: setPath(['story', 'name']),\n  [UPDATE_STORY_TEXT]: setPath(['story', 'text']),\n  [UPDATE_STORY_URL]: set('storyUrl'),\n  [UPDATE_TRACK]: setPath(['story', 'track']),\n};\n\nconst actions = {\n  updateTrack({ commit }, payload) {\n    commit(UPDATE_TRACK, payload);\n  },\n  updateStoryText({ commit }, payload) {\n    commit(UPDATE_STORY_TEXT, payload);\n  },\n  /* eslint-disable-next-line no-shadow */\n  async loadStory({ commit }, payload) {\n    commit(UPDATE_LOADING, true);\n    const result = (await load(payload.storyUrl, payload.token)).data.story;\n    commit(UPDATE_STORY, result.story);\n    commit(UPDATE_STORY_AUTHOR, result.email);\n    commit(UPDATE_LOADING, false);\n  },\n};\n\nexport const getters = {\n  /* eslint-disable-next-line no-shadow */\n  content: (state) => {\n    let content;\n\n    if (state.story.text && state.story.text.state) { // editing\n      ({ content } = state.story.text.state.doc);\n    } else { // readonly\n      content = state.story.text && state.story.text.content;\n    }\n\n    return content && JSON.parse(JSON.stringify(content));\n  },\n\n  /* eslint-disable-next-line no-shadow */\n  bboxes: (state, getters) => {\n    let result = [];\n    const data = getters.content;\n\n    if (data) {\n      const bboxes = pickDeep(data, STORY_LINK_BBOX_ATTR);\n      result = mapDeep(bboxes, v => v, { leavesOnly: true })\n        .filter(item => item !== null)\n        .map(item => JSON.parse(item))\n        .map((item, id) => {\n          const [upperLeft, lowerRight] = item;\n          let highlighted = false;\n\n          if (state.highlightedBbox) {\n            const { lat: upperLeftLat, lng: upperLeftLng } = state.highlightedBbox[0];\n            const { lat: lowerRightLat, lng: lowerRightLng } = state.highlightedBbox[1];\n            const highlightedBbox = [upperLeftLat, upperLeftLng, lowerRightLat, lowerRightLng];\n            highlighted = [...upperLeft, ...lowerRight].every((val, idx) => val === highlightedBbox[idx]);\n          }\n\n          return {\n            id: `bbox-${id}`,\n            bounds: [\n              [item[0][0], item[0][1]],\n              [item[1][0], item[1][1]],\n            ],\n            highlighted,\n          };\n        });\n    }\n\n    return result;\n  },\n\n  /* eslint-disable-next-line no-shadow */\n  features: (state, getters) => {\n    let result = [];\n    const data = getters.content;\n\n    if (data) {\n      const features = mapDeep(pickDeep(data, [STORY_LINK_LAT_ATTR, STORY_LINK_LNG_ATTR]), v => v, {\n        leavesOnly: true,\n      }).filter(item => item !== null);\n      result = chunk(features, 2)\n        .map((item) => {\n          const lat = state.highlightedLatLng && state.highlightedLatLng.lat;\n          const lng = state.highlightedLatLng && state.highlightedLatLng.lng;\n          return {\n            lat: item[0],\n            lng: item[1],\n            highlighted: item[0] === lat && item[1] === lng,\n          };\n        });\n    }\n\n    return result;\n  },\n};\n\nexport default new Vuex.Store({\n  strict: true,\n  getters,\n  state,\n  mutations,\n  actions,\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"columns background has-no-margin\"},[_c('div',{staticClass:\"column is-half is-offset-one-quarter\"},[_c('div',{staticClass:\"box has-mt-2\"},[_c('h1',{staticClass:\"title is-size-1 has-text-centered\"},[_vm._v(\"Přihlášení\")]),_c('p',[_vm._v(\"Po přihlášení budete moct psát příběhy a sdílet je se svými přáteli.\")]),_vm._m(0),_c('p',[_vm._v(\"Pro přihlášení využíváme jen nezbytné minimum údajů o vašem účtu Google.\")]),(!_vm.$auth.loading)?_c('div',{staticClass:\"has-mt-1\"},[(!_vm.$auth.isAuthenticated)?_c('b-button',{attrs:{\"type\":\"is-primary\",\"expanded\":\"\"},on:{\"click\":_vm.login}},[_vm._v(\"Přejít na přihlášení\")]):_vm._e(),(_vm.$auth.isAuthenticated)?_c('b-button',{on:{\"click\":_vm.logout}},[_vm._v(\"Log out\")]):_vm._e()],1):_vm._e()])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"V současné době podporujeme přihlášení pouze prostřednictvím účtu Google. K autentizaci\\n        využíváme službu \"),_c('a',{attrs:{\"href\":\"https://auth0.com\"}},[_vm._v(\"auth0\")]),_vm._v(\". Po kliknutí na tlačítko budete\\n        přesměrováni na stránky služby.\")])}]\n\nexport { render, staticRenderFns }","<script>\nexport default {\n  name: 'Login',\n  methods: {\n    // Log the user in\n    login() {\n      this.$auth.loginWithRedirect();\n    },\n    // Log the user out\n    logout() {\n      this.$auth.logout({\n        returnTo: window.location.origin,\n      });\n    },\n  },\n};\n</script>\n\n<template>\n  <div class=\"columns background has-no-margin\">\n    <div class=\"column is-half is-offset-one-quarter\">\n      <div class=\"box has-mt-2\">\n        <h1 class=\"title is-size-1 has-text-centered\">Přihlášení</h1>\n        <p>Po přihlášení budete moct psát příběhy a sdílet je se svými přáteli.</p>\n        <p>V současné době podporujeme přihlášení pouze prostřednictvím účtu Google. K&nbsp;autentizaci\n          využíváme službu <a href=\"https://auth0.com\">auth0</a>. Po kliknutí na tlačítko budete\n          přesměrováni na stránky služby.</p>\n        <p>Pro přihlášení využíváme jen nezbytné minimum údajů o vašem účtu Google.</p>\n        <div class=\"has-mt-1\" v-if=\"!$auth.loading\">\n          <b-button v-if=\"!$auth.isAuthenticated\" @click=\"login\" type=\"is-primary\" expanded>Přejít na přihlášení</b-button>\n          <b-button v-if=\"$auth.isAuthenticated\" @click=\"logout\">Log out</b-button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=75696624&scoped=true&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"75696624\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.loadingSignup)?_c('div',{staticClass:\"has-text-centered has-mt-2\"},[_vm._v(\"Ukládají se informace o uživatelském\\núčtu…\")]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/* eslint-disable import/prefer-default-export */\nimport axiosInstance from '@/services/axios';\n\n/*\n * Signs up user logged in for the first time.\n * @param {string} user email\n */\nexport const signup = async (email) => {\n  await axiosInstance.post(\n    '/auth/signup',\n    { email },\n  );\n};\n","<script>\nimport axiosInstance from '@/services/axios';\nimport { signup as authSignup } from '@/services/signup';\nimport { UPDATE_ERRORS } from '@/store/mutations';\n\nexport default {\n  name: 'LoginCallback',\n  data() {\n    return {\n      loadingSignup: false,\n    };\n  },\n  computed: {\n    loading() {\n      return this.$auth.loading;\n    },\n  },\n  watch: {\n    loading(value) {\n      if (value) {\n        return;\n      }\n\n      if (!this.$auth.user) {\n        this.$router.push('/login');\n      }\n\n      this.signup();\n    },\n  },\n  methods: {\n    /*\n     * If user logs in for the first time, signs him up. Redirects to landing page otherwise.\n     */\n    async signup() {\n      if (!this.$auth.user['https://cartostory.com/is_new']) {\n        this.$router.push('/');\n        return;\n      }\n\n      this.loadingSignup = true;\n      const token = await this.$auth.getTokenSilently();\n      this.$setAuthorizationHeader(`Bearer ${token}`);\n\n      try {\n        await authSignup(this.$auth.user.email);\n      } catch (e) {\n        this.$handleSignupError(e);\n      } finally {\n        this.loadingSignup = false;\n        this.$router.push('/');\n      }\n    },\n\n    $handleSignupError(e) {\n      if (e.response.data.message !== 'User already exists') {\n        this.$store.commit(UPDATE_ERRORS, {\n          title: 'Chyba',\n          message: 'Pokus o založení uživatelského účtu selhal.' || e.response.data.message,\n        });\n      }\n    },\n\n    $setAuthorizationHeader(token) {\n      axiosInstance.defaults.headers.common.Authorization = token;\n    },\n  },\n};\n</script>\n\n<template>\n  <div v-if=\"loadingSignup\" class=\"has-text-centered has-mt-2\">Ukládají se informace o uživatelském\n  účtu&hellip;</div>\n</template>\n\n<style>\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoginCallback.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoginCallback.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LoginCallback.vue?vue&type=template&id=81a1d98c&\"\nimport script from \"./LoginCallback.vue?vue&type=script&lang=js&\"\nexport * from \"./LoginCallback.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"columns background has-no-margin\"},[_c('div',{staticClass:\"column is-half\"},[_c('h1',{staticClass:\"claim has-pl-1\"},[_vm._v(\"Cartostory je plné příběhů\")])]),_c('div',{staticClass:\"column is-half\"},[_c('div',{staticClass:\"box has-padding-2\"},[_c('h1',{staticClass:\"title is-1 has-text-centered\"},[_vm._v(\"Každý příběh je plný dobrodružství…\")]),_c('p',[_vm._v(\"Určitě už jste zažili v přírodě dobrodružství, které se vám vrylo hluboko do paměti.\\n      Zachytili jste ho na fotkách, možná i na videu, pomocí chytrých hodinek nebo mobilu jste\\n      měřili rychlost, tep, spálené kalorie. Děláme to tak všichni, ne?\")]),_c('p',[_vm._v(\"Možná za dobrodružstvím ale nevyrážíte jen kvůli grafu tepové frekvence.\\n      Možná, stejně jako my, vyrážíte i pro ten pocit, že se něco děje, pro radost z pohybu, za\\n      novými objevy.\")])])])])}]\n\nexport { render, staticRenderFns }","<script>\nexport default {\n  name: 'Landing',\n};\n</script>\n\n<template>\n  <div class=\"columns background has-no-margin\">\n    <div class=\"column is-half\">\n      <h1 class=\"claim has-pl-1\">Cartostory je plné příběhů</h1>\n    </div>\n    <div class=\"column is-half\">\n      <div class=\"box has-padding-2\">\n        <h1 class=\"title is-1 has-text-centered\">Každý příběh je plný dobrodružství&hellip;</h1>\n        <p>Určitě už jste zažili v přírodě dobrodružství, které se vám vrylo hluboko do paměti.\n        Zachytili jste ho na fotkách, možná i na videu, pomocí chytrých hodinek nebo mobilu jste\n        měřili rychlost, tep, spálené kalorie. Děláme to tak všichni, ne?</p>\n\n        <p>Možná za dobrodružstvím ale nevyrážíte jen kvůli grafu tepové frekvence.\n        Možná, stejně jako my, vyrážíte i pro ten pocit, že se něco děje, pro radost z pohybu, za\n        novými objevy.</p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.claim {\n  color: white;\n  font-family: 'Dancing Script';\n  font-size: 8rem;\n  line-height: 10rem;\n}\n\n.columns {\n  align-items: center;\n  min-height: calc(100vh - #{$navbar-height});\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Landing.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Landing.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Landing.vue?vue&type=template&id=79f09e50&scoped=true&\"\nimport script from \"./Landing.vue?vue&type=script&lang=js&\"\nexport * from \"./Landing.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Landing.vue?vue&type=style&index=0&id=79f09e50&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"79f09e50\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (!_vm.loading)?_c('div',{staticClass:\"container-fluid story-form\"},[_c('div',{staticClass:\"wrapper columns has-margin-0\"},[_c('cs-map'),_c('div',{staticStyle:{\"display\":\"flex\",\"flex-direction\":\"column\",\"width\":\"100%\"}},[_c('cs-editor')],1)],1)]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"column is-12 has-padding-0 story-text\",staticStyle:{\"display\":\"flex\"}},[_c('div',{staticClass:\"story-text__content\"},[(_vm.editable)?_c('form',{staticClass:\"has-mt-1\"},[_c('b-field',[_c('b-input',{attrs:{\"custom-class\":\"story-title-input\",\"placeholder\":\"Název příběhu\",\"size\":\"is-large\"},model:{value:(_vm.storyName),callback:function ($$v) {_vm.storyName=$$v},expression:\"storyName\"}})],1)],1):_vm._e(),(!_vm.editable)?_c('div',{staticStyle:{\"display\":\"flex\",\"align-items\":\"center\",\"justify-content\":\"space-evenly\"}},[_c('h1',{staticClass:\"story-title-input has-mt-1\",staticStyle:{\"flex\":\"1\"}},[_vm._v(_vm._s(_vm.storyName))]),(_vm.showEditButton)?_c('b-button',{attrs:{\"size\":\"is-small\",\"icon-left\":\"pencil\"},on:{\"click\":_vm.handleStartEditing}},[_vm._v(\"Upravit\")]):_vm._e()],1):_vm._e(),(_vm.editable)?_c('menu-bar',{attrs:{\"saving\":_vm.saving,\"editor\":_vm.editor},scopedSlots:_vm._u([{key:\"cancel-button\",fn:function(){return [_c('b-button',{staticClass:\"menubar__button\",staticStyle:{\"margin-left\":\"auto\"},attrs:{\"size\":\"is-small\"},on:{\"click\":_vm.handleCancelEditing}},[_vm._v(\"Zrušit\\n        \")])]},proxy:true},{key:\"submit-button\",fn:function(){return [_c('b-button',{staticClass:\"menubar__button\",attrs:{\"loading\":_vm.saving,\"size\":\"is-small\",\"type\":\"is-primary\"},on:{\"click\":_vm.handleSave}},[_vm._v(\"Uložit\\n        \")])]},proxy:true}],null,false,4264853847)}):_vm._e(),(_vm.editable)?_c('menu-bubble',{attrs:{\"editor\":_vm.editor},on:{\"changed\":_vm.handleContentUpdate},nativeOn:{\"click\":function($event){return _vm.handleContentUpdate($event)}}}):_vm._e(),_c('editor-content',{staticClass:\"editor has-mt-1 has-mb-1\",class:{'editable': this.editable},staticStyle:{\"flex\":\"1\",\"overflow\":\"auto\"},attrs:{\"editor\":_vm.editor}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/* eslint-disable import/prefer-default-export */\nimport { STORY_LINK_BBOX_ATTR, STORY_LINK_LAT_ATTR, STORY_LINK_LNG_ATTR } from '@/config/config';\n\nexport function getBboxString(bbox) {\n  let result;\n\n  if ('lat' in bbox[0]) {\n    result = `[[${bbox[0].lat},${bbox[0].lng}],[${bbox[1].lat},${bbox[1].lng}]]`;\n  } else {\n    result = `[[${bbox[0][0]},${bbox[0][1]}],[${bbox[1][0]},${bbox[1][1]}]]`;\n  }\n\n  return result;\n}\n\n/*\n * @param {Object} bbox\n */\nexport function getBboxSelector(bbox) {\n  return `[${STORY_LINK_BBOX_ATTR}='${getBboxString(bbox)}']`;\n}\n\n/*\n * @param {Object} latLng\n */\nexport function getLatLngSelector(latLng) {\n  let querySelector;\n\n  if ('lat' in latLng) {\n    querySelector = `[${STORY_LINK_LAT_ATTR}='${latLng.lat}'], [${STORY_LINK_LNG_ATTR}='${latLng.lng}']`;\n  } else {\n    querySelector = `[${STORY_LINK_LAT_ATTR}='${latLng[0]}'], [${STORY_LINK_LNG_ATTR}='${latLng[1]}']`;\n  }\n\n  return querySelector;\n}\n","/* eslint class-methods-use-this: 0 */\nimport { Mark } from 'tiptap';\nimport { toggleMark } from 'tiptap-commands';\n\nimport { STORY_LINK_BBOX_ATTR, STORY_LINK_BBOX_ATTR_CAMEL } from '@/config/config';\nimport { UPDATE_HIGHLIGHTED_BBOX, UPDATE_HIGHLIGHTED_LAT_LNG } from '@/store/mutations';\nimport { getBboxString } from '@/utils/utils';\n\nconst TAG = 'a';\n\nexport default class BboxMark extends Mark {\n  get name() {\n    return 'bboxMark';\n  }\n\n  get schema() {\n    return {\n      attrs: {\n        [STORY_LINK_BBOX_ATTR]: {\n          default: null,\n        },\n      },\n      parseDOM: [{\n        tag: TAG,\n        getAttrs(dom) {\n          return {\n            [STORY_LINK_BBOX_ATTR]: dom.dataset[STORY_LINK_BBOX_ATTR],\n          };\n        },\n      }],\n      toDOM: node => [TAG, {\n        [STORY_LINK_BBOX_ATTR]: node.attrs[STORY_LINK_BBOX_ATTR],\n      }, 0],\n    };\n  }\n\n  commands({ type }) {\n    return (attrs) => {\n      const bounds = attrs && [[attrs[0][0], attrs[0][1]], [attrs[1][0], attrs[1][1]]];\n      return toggleMark(type, {\n        [STORY_LINK_BBOX_ATTR]: JSON.stringify(bounds),\n      });\n    };\n  }\n\n  get view() {\n    return {\n      // there are some props available\n      // `node` is a Prosemirror Node Object\n      // `updateAttrs` is a function to update attributes defined in `schema`\n      // `view` is the ProseMirror view instance\n      // `options` is an array of your extension options\n      // `selected` is a boolean which is true when selected\n      // `editor` is a reference to the TipTap editor instance\n      // `getPos` is a function to retrieve the start position of the node\n      // `decorations` is an array of decorations around the node\n      props: ['node', 'updateAttrs', 'view'],\n      methods: {\n        handleClick() {\n          const payload = JSON.parse(this[STORY_LINK_BBOX_ATTR_CAMEL]);\n          this.$store.commit(UPDATE_HIGHLIGHTED_LAT_LNG, undefined);\n          this.$store.commit(UPDATE_HIGHLIGHTED_BBOX, payload);\n        },\n      },\n      computed: {\n        isHighlighted() {\n          if (!this.$store.state.highlightedBbox) {\n            return false;\n          }\n\n          const bbox = this[STORY_LINK_BBOX_ATTR_CAMEL];\n          const highlightedBbox = getBboxString(this.$store.state.highlightedBbox);\n\n          return highlightedBbox === bbox;\n        },\n        [STORY_LINK_BBOX_ATTR_CAMEL]: {\n          get() {\n            return this.node.attrs[STORY_LINK_BBOX_ATTR];\n          },\n          set(bbox) {\n            this.updateAttrs({\n              [STORY_LINK_BBOX_ATTR]: bbox,\n            });\n          },\n        },\n      },\n      template: `\n        <a\n          title=\"Kliknutím vycentrujete mapu\"\n          :class=\"{'is-highlighted': isHighlighted}\"\n          :${STORY_LINK_BBOX_ATTR}=\"${STORY_LINK_BBOX_ATTR_CAMEL}\"\n          @click=\"handleClick()\"\n        >\n        </a>\n      `,\n    };\n  }\n}\n","/* eslint class-methods-use-this: 0 */\nimport { Mark } from 'tiptap';\nimport { toggleMark } from 'tiptap-commands';\n\nimport {\n  STORY_LINK_LAT_ATTR,\n  STORY_LINK_LAT_ATTR_CAMEL,\n  STORY_LINK_LNG_ATTR,\n  STORY_LINK_LNG_ATTR_CAMEL,\n} from '@/config/config';\nimport { UPDATE_HIGHLIGHTED_BBOX, UPDATE_HIGHLIGHTED_LAT_LNG, UPDATE_SHOULD_TEXT_SCROLL } from '@/store/mutations';\n\nconst TAG = 'a';\n\nexport default class FeatureMark extends Mark {\n  get name() {\n    return 'featureMark';\n  }\n\n  get schema() {\n    return {\n      attrs: {\n        [STORY_LINK_LAT_ATTR]: {\n          default: null,\n        },\n        [STORY_LINK_LNG_ATTR]: {\n          default: null,\n        },\n      },\n      parseDOM: [{\n        tag: TAG,\n        getAttrs(dom) {\n          return {\n            [STORY_LINK_LAT_ATTR]: dom.dataset[STORY_LINK_LAT_ATTR],\n            [STORY_LINK_LNG_ATTR]: dom.dataset[STORY_LINK_LNG_ATTR],\n          };\n        },\n      }],\n      toDOM: node => [TAG, {\n        [STORY_LINK_LAT_ATTR]: node.attrs[STORY_LINK_LAT_ATTR],\n        [STORY_LINK_LNG_ATTR]: node.attrs[STORY_LINK_LNG_ATTR],\n      }, 0],\n    };\n  }\n\n  commands({ type }) {\n    return (attrs) => {\n      return toggleMark(type, {\n        [STORY_LINK_LAT_ATTR]: attrs && attrs[STORY_LINK_LAT_ATTR],\n        [STORY_LINK_LNG_ATTR]: attrs && attrs[STORY_LINK_LNG_ATTR],\n      });\n    };\n  }\n\n  get view() {\n    return {\n      // there are some props available\n      // `node` is a Prosemirror Node Object\n      // `updateAttrs` is a function to update attributes defined in `schema`\n      // `view` is the ProseMirror view instance\n      // `options` is an array of your extension options\n      // `selected` is a boolean which is true when selected\n      // `editor` is a reference to the TipTap editor instance\n      // `getPos` is a function to retrieve the start position of the node\n      // `decorations` is an array of decorations around the node\n      props: ['node', 'updateAttrs', 'view'],\n      methods: {\n        handleClick() {\n          const payload = {\n            [STORY_LINK_LAT_ATTR]: this[STORY_LINK_LAT_ATTR_CAMEL],\n            [STORY_LINK_LNG_ATTR]: this[STORY_LINK_LNG_ATTR_CAMEL],\n          };\n          this.$store.commit(UPDATE_SHOULD_TEXT_SCROLL, false);\n          this.$store.commit(UPDATE_HIGHLIGHTED_BBOX, undefined);\n          this.$store.commit(UPDATE_HIGHLIGHTED_LAT_LNG, payload);\n        },\n      },\n      computed: {\n        isHighlighted() {\n          if (!this.$store.state.highlightedLatLng) {\n            return false;\n          }\n\n          const { lat, lng } = this.$store.state.highlightedLatLng;\n          return lat === this[STORY_LINK_LAT_ATTR_CAMEL] && lng === this[STORY_LINK_LNG_ATTR_CAMEL];\n        },\n        [STORY_LINK_LAT_ATTR_CAMEL]: {\n          get() {\n            return this.node.attrs[STORY_LINK_LAT_ATTR];\n          },\n          set(lat) {\n            this.updateAttrs({\n              [STORY_LINK_LAT_ATTR]: lat,\n            });\n          },\n        },\n        [STORY_LINK_LNG_ATTR_CAMEL]: {\n          get() {\n            return this.node.attrs[STORY_LINK_LNG_ATTR];\n          },\n          set(lng) {\n            this.updateAttrs({\n              [STORY_LINK_LNG_ATTR]: lng,\n            });\n          },\n        },\n      },\n      template: `\n        <a\n          title=\"Kliknutím vycentrujete mapu\"\n          :class=\"{'is-highlighted': isHighlighted}\"\n          :${STORY_LINK_LNG_ATTR}=\"${STORY_LINK_LNG_ATTR_CAMEL}\"\n          :${STORY_LINK_LAT_ATTR}=\"${STORY_LINK_LAT_ATTR_CAMEL}\"\n          @click=\"handleClick()\"\n        >\n        </a>\n      `,\n    };\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('editor-menu-bar',{staticClass:\"has-mt-1\",staticStyle:{\"background\":\"white\"},attrs:{\"editor\":_vm.editor},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar commands = ref.commands;\nvar isActive = ref.isActive;\nreturn [_c('div',{staticClass:\"editor-menu-bar buttons\"},[_c('b-button',{staticClass:\"menubar__button\",class:{ 'is-active': isActive.heading({ level: 2 }) },attrs:{\"title\":\"Nadpis 1. úrovně\",\"size\":\"is-small\"},on:{\"click\":function($event){return commands.heading({ level: 2 })}}},[_vm._v(\"\\n      H1\\n    \")]),_c('b-button',{staticClass:\"menubar__button\",class:{ 'is-active': isActive.heading({ level: 3 }) },attrs:{\"title\":\"Nadpis 2. úrovně\",\"size\":\"is-small\"},on:{\"click\":function($event){return commands.heading({ level: 3 })}}},[_vm._v(\"\\n      H2\\n    \")]),_c('b-button',{staticClass:\"menubar__button\",class:{ 'is-active': isActive.heading({ level: 4 }) },attrs:{\"title\":\"Nadpis 3. úrovně\",\"size\":\"is-small\"},on:{\"click\":function($event){return commands.heading({ level: 4 })}}},[_vm._v(\"\\n      H3\\n    \")]),_c('b-button',{staticClass:\"menubar__button\",class:{ 'is-active': isActive.image() },attrs:{\"title\":\"Obrázek\",\"size\":\"is-small\"},on:{\"click\":function($event){return _vm.showImagePrompt(commands.image)}}},[_c('b-icon',{attrs:{\"size\":\"is-small\",\"icon\":\"image-filter-hdr\",\"custom-class\":\"image-icon\"}})],1),_vm._t(\"cancel-button\"),_vm._t(\"submit-button\")],2)]}}],null,true)})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport { EditorMenuBar } from 'tiptap';\n\nexport default {\n  name: 'MenuBar',\n  components: {\n    EditorMenuBar,\n  },\n  props: ['editor', 'saving'],\n  methods: {\n    /*\n     * Lets user paste image url and inserts the image into the story.\n     * @param {Function} tiptap image command\n     */\n    showImagePrompt(command) {\n      // eslint-disable-next-line no-alert\n      const src = prompt('Enter the url of your image here');\n      if (src) {\n        command({ src });\n      }\n    },\n  },\n};\n</script>\n\n<template>\n  <editor-menu-bar\n    class=\"has-mt-1\"\n    style=\"background: white;\"\n    :editor=\"editor\"\n    v-slot=\"{ commands, isActive }\">\n    <div class=\"editor-menu-bar buttons\">\n      <b-button\n        title=\"Nadpis 1. úrovně\"\n        size=\"is-small\"\n        class=\"menubar__button\"\n        :class=\"{ 'is-active': isActive.heading({ level: 2 }) }\"\n        @click=\"commands.heading({ level: 2 })\">\n        H1\n      </b-button>\n\n      <b-button\n        title=\"Nadpis 2. úrovně\"\n        size=\"is-small\"\n        class=\"menubar__button\"\n        :class=\"{ 'is-active': isActive.heading({ level: 3 }) }\"\n        @click=\"commands.heading({ level: 3 })\">\n        H2\n      </b-button>\n\n      <b-button\n        title=\"Nadpis 3. úrovně\"\n        size=\"is-small\"\n        class=\"menubar__button\"\n        :class=\"{ 'is-active': isActive.heading({ level: 4 }) }\"\n        @click=\"commands.heading({ level: 4 })\">\n        H3\n      </b-button>\n\n      <b-button\n        title=\"Obrázek\"\n        size=\"is-small\"\n        class=\"menubar__button\"\n        :class=\"{ 'is-active': isActive.image() }\"\n        @click=\"showImagePrompt(commands.image)\">\n        <b-icon size=\"is-small\" icon=\"image-filter-hdr\" custom-class=\"image-icon\"></b-icon>\n      </b-button>\n\n      <slot name=\"cancel-button\"></slot>\n      <slot name=\"submit-button\"></slot>\n    </div>\n  </editor-menu-bar>\n</template>\n\n<style lang=\"scss\" scoped>\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MenuBar.vue?vue&type=template&id=5a8817c2&scoped=true&\"\nimport script from \"./MenuBar.vue?vue&type=script&lang=js&\"\nexport * from \"./MenuBar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5a8817c2\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('editor-menu-bubble',{attrs:{\"editor\":_vm.editor,\"keep-in-bounds\":true},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar commands = ref.commands;\nvar getMarkAttrs = ref.getMarkAttrs;\nvar isActive = ref.isActive;\nvar menu = ref.menu;\nreturn [_c('div',{staticClass:\"menububble\",class:{ 'is-active': menu.isActive },style:((\"left: \" + (menu.left) + \"px; bottom: \" + (menu.bottom) + \"px;\"))},[(!_vm.isNewFeatureMarkButtonVisible(getMarkAttrs('featureMark')))?_c('b-button',{staticClass:\"menububble__button menububble__button__mark\",class:{ 'is-active': isActive.featureMark() },attrs:{\"icon-left\":\"map-marker-plus\"},on:{\"click\":function($event){return _vm.handleAddFeatureMarkClick(commands.featureMark)}}}):_vm._e(),(_vm.isNewFeatureMarkButtonVisible(getMarkAttrs('featureMark')))?_c('b-button',{staticClass:\"menububble__button\",class:{ 'is-active': isActive.featureMark() },attrs:{\"icon-left\":\"map-marker-minus\"},on:{\"click\":function($event){return _vm.handleRemoveFeatureMarkClick(commands.featureMark)}}}):_vm._e(),(!_vm.isNewBboxMarkVisible(getMarkAttrs('bboxMark')))?_c('b-button',{staticClass:\"menububble__button menububble__button__bbox\",class:{ 'is-active': isActive.bboxMark() },attrs:{\"icon-left\":\"fullscreen\"},on:{\"click\":function($event){return _vm.handleAddBoundingBoxClick(commands.bboxMark)}}}):_vm._e(),(_vm.isNewBboxMarkVisible(getMarkAttrs('bboxMark')))?_c('b-button',{staticClass:\"menububble__button menububble__button__bbox\",class:{ 'is-active': isActive.bboxMark() },attrs:{\"icon-left\":\"fullscreen-exit\"},on:{\"click\":function($event){return commands.bboxMark()}}}):_vm._e()],1)]}}])})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport { EditorMenuBubble } from 'tiptap';\nimport { mapState } from 'vuex';\n\nimport { ADD_BOUNDING_BOX_EVENT, STORY_LINK_BBOX_ATTR, STORY_LINK_LAT_ATTR } from '@/config/config';\nimport { UPDATE_BBOX_BEING_ADDED, UPDATE_FEATURE_BEING_ADDED, UPDATE_HIGHLIGHTED_LAT_LNG } from '@/store/mutations';\n\nexport default {\n  data() {\n    return {\n      bboxAddedCallback: undefined,\n      featureMarkAddedCallback: undefined,\n    };\n  },\n  name: 'MenuBubble',\n  props: ['editor'],\n  components: {\n    EditorMenuBubble,\n  },\n  computed: {\n    ...mapState({\n      bboxBeingAdded: state => state.bboxBeingAdded,\n      featureBeingAdded: state => state.featureBeingAdded,\n    }),\n  },\n  watch: {\n    bboxBeingAdded(bbox) {\n      if (bbox && bbox.active && bbox.bounds && this.bboxAddedCallback) {\n        this.bboxAddedCallback(bbox.bounds);\n        this.bboxAddedCallback = undefined;\n        this.$store.commit(UPDATE_BBOX_BEING_ADDED, { active: false, position: undefined });\n        this.$emit('changed');\n      }\n    },\n    featureBeingAdded(feature) {\n      if (feature && feature.active && feature.position && this.featureMarkAddedCallback) {\n        this.featureMarkAddedCallback(feature.position);\n        this.featureMarkAddedCallback = undefined;\n        this.$store.commit(UPDATE_FEATURE_BEING_ADDED, { active: false, position: undefined });\n        this.$emit('changed');\n      }\n    },\n  },\n  methods: {\n    /*\n     * Checks if selected text already has the feature mark on the map.\n     * It renders remove button if true or add button otherwise.\n     * @param {object} selected text attributes\n     * @returns {boolean}\n     */\n    isNewFeatureMarkButtonVisible(attrs) {\n      return attrs && attrs[STORY_LINK_LAT_ATTR];\n    },\n\n    isNewBboxMarkVisible(attrs) {\n      return attrs && attrs[STORY_LINK_BBOX_ATTR];\n    },\n\n    handleAddFeatureMarkClick(tiptapCommand) {\n      this.featureMarkAddedCallback = tiptapCommand;\n      this.$store.commit(UPDATE_FEATURE_BEING_ADDED, { active: true, position: undefined });\n    },\n\n    handleRemoveFeatureMarkClick(tiptapCommand) {\n      this.$store.commit(UPDATE_HIGHLIGHTED_LAT_LNG, undefined);\n      tiptapCommand();\n    },\n\n    handleAddBoundingBoxClick(tiptapCommand) {\n      this.bboxAddedCallback = tiptapCommand;\n      this.$store.commit(UPDATE_BBOX_BEING_ADDED, { active: true, bounds: undefined });\n    },\n  },\n};\n</script>\n\n<template>\n  <editor-menu-bubble :editor=\"editor\" :keep-in-bounds=\"true\" v-slot=\"{ commands, getMarkAttrs, isActive, menu }\">\n    <div\n      class=\"menububble\"\n      :class=\"{ 'is-active': menu.isActive }\"\n      :style=\"`left: ${menu.left}px; bottom: ${menu.bottom}px;`\">\n\n      <b-button\n        v-if=\"!isNewFeatureMarkButtonVisible(getMarkAttrs('featureMark'))\"\n        class=\"menububble__button menububble__button__mark\"\n        :class=\"{ 'is-active': isActive.featureMark() }\"\n        @click=\"handleAddFeatureMarkClick(commands.featureMark)\"\n        icon-left=\"map-marker-plus\"></b-button>\n\n      <b-button\n        v-if=\"isNewFeatureMarkButtonVisible(getMarkAttrs('featureMark'))\"\n        class=\"menububble__button\"\n        :class=\"{ 'is-active': isActive.featureMark() }\"\n        @click=\"handleRemoveFeatureMarkClick(commands.featureMark)\"\n        icon-left=\"map-marker-minus\"></b-button>\n\n      <b-button\n        v-if=\"!isNewBboxMarkVisible(getMarkAttrs('bboxMark'))\"\n        class=\"menububble__button menububble__button__bbox\"\n        :class=\"{ 'is-active': isActive.bboxMark() }\"\n        @click=\"handleAddBoundingBoxClick(commands.bboxMark)\"\n        icon-left=\"fullscreen\"></b-button>\n\n      <b-button\n        v-if=\"isNewBboxMarkVisible(getMarkAttrs('bboxMark'))\"\n        class=\"menububble__button menububble__button__bbox\"\n        :class=\"{ 'is-active': isActive.bboxMark() }\"\n        @click=\"commands.bboxMark()\"\n        icon-left=\"fullscreen-exit\">\n      </b-button>\n    </div>\n  </editor-menu-bubble>\n</template>\n\n<style lang=\"scss\" scoped>\n.menububble {\n  position: absolute;\n  display: flex;\n  z-index: 20;\n  background: $primary;\n  border-radius: 5px;\n  padding: 0.3rem;\n  margin-bottom: 0.5rem;\n  transform: translateX(-50%);\n  visibility: hidden;\n  opacity: 0;\n  transition: opacity 0.2s, visibility 0.2s;\n\n  &.is-active {\n    opacity: 1;\n    visibility: visible;\n  }\n\n  &__button {\n    display: inline-flex;\n    background-color: transparent;\n    border: 0;\n    color: white !important;\n    border-radius: 3px;\n    cursor: pointer;\n\n    &:hover,\n    &:focus,\n    &.is-active {\n      background-color: rgba(255, 255, 255, 0.2) !important;\n    }\n\n    &__mark:focus::after,\n    &__bbox:focus::after {\n      font-size: 8px;\n      line-height: 14px;\n      padding-left: 7px;\n    }\n\n    &__mark:focus::after {\n      content: 'Klikněte do mapy';\n    }\n\n    &__bbox:focus::after {\n      content: 'Táhnutím v mapě označte oblast';\n    }\n\n    &:last-child {\n      margin-right: 0;\n    }\n  }\n\n  &__form {\n    display: flex;\n    align-items: center;\n  }\n\n  &__input {\n    font: inherit;\n    border: none;\n    background: transparent;\n    color: white;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuBubble.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuBubble.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MenuBubble.vue?vue&type=template&id=620f66f7&scoped=true&\"\nimport script from \"./MenuBubble.vue?vue&type=script&lang=js&\"\nexport * from \"./MenuBubble.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MenuBubble.vue?vue&type=style&index=0&id=620f66f7&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"620f66f7\",\n  null\n  \n)\n\nexport default component.exports","<script>\nimport cloneDeep from 'lodash.clonedeep';\nimport { Editor, EditorContent } from 'tiptap';\nimport { Heading, Image } from 'tiptap-extensions';\nimport { mapState } from 'vuex';\n\nimport BboxMark from '@/components/editor/BboxMark';\nimport FeatureMark from '@/components/editor/FeatureMark';\nimport MenuBar from '@/components/editor/MenuBar.vue';\nimport MenuBubble from '@/components/editor/MenuBubble.vue';\nimport { UPDATE_EDITABLE, UPDATE_ERRORS, UPDATE_STORY_NAME, UPDATE_STORY_TEXT } from '@/store/mutations';\nimport { getBboxSelector, getLatLngSelector } from '@/utils/utils';\nimport * as storyService from '@/services/story';\n\nexport default {\n  name: 'CsEditor',\n  components: {\n    EditorContent,\n    MenuBubble,\n    MenuBar,\n  },\n  data() {\n    return {\n      content: 'Můžete začít psát...',\n      editor: undefined,\n      previousContent: undefined, // placeholder for old content to go to when user cancels edits\n      saving: false,\n      storyId: undefined,\n      keepInBounds: true,\n    };\n  },\n  computed: {\n    ...mapState(['editable', 'highlightedBbox', 'highlightedLatLng', 'shouldTextScroll']),\n    ...mapState({\n      author: state => state.story.author,\n      text: state => state.story.text,\n      token: state => state.auth.token,\n      track: state => state.story.track,\n    }),\n    showEditButton() {\n      return this.author === this.$auth.user.email;\n    },\n    storyName: {\n      get() {\n        return this.$store.state.story.name;\n      },\n      set(value) {\n        this.$store.commit(UPDATE_STORY_NAME, value);\n      },\n    },\n  },\n  watch: {\n    highlightedLatLng(latLng) {\n      if (!latLng) {\n        return;\n      }\n\n      this.scrollToHighlighted();\n    },\n    highlightedBbox(bbox) {\n      if (!bbox) {\n        return;\n      }\n\n      this.scrollToHighlighted();\n    },\n  },\n  beforeMount() {\n    this.$hideScrollbar();\n  },\n  beforeDestroy() {\n    document.documentElement.classList.remove('is-clipped');\n    this.editor.destroy();\n  },\n  created() {\n    this.storyId = this.$route.params && this.$route.params.id;\n  },\n  mounted() {\n    this.editor = this.$createEditor();\n\n    if (this.text) { // when reading the story, load text from store\n      this.editor.setContent(this.text);\n    }\n  },\n  methods: {\n    /*\n     * Revert changes when user cancels editing.\n     * @TODO body doesn't get `.is-clipped` class again, because it's being reset in\n     * https://github.com/buefy/buefy/blob/dev/src/components/modal/Modal.vue#L160.\n     */\n    handleCancelEditing() {\n      this.$buefy.dialog.confirm({\n        message: 'Opravdu chcete zahodit změny?',\n        cancelText: 'Ne',\n        confirmText: 'Ano',\n        onCancel: () => this.$hideScrollbar(),\n        onConfirm: () => {\n          this.$store.commit(UPDATE_EDITABLE, false);\n          this.editor.setOptions({ editable: false });\n          this.editor.setContent(this.previousContent);\n          this.$hideScrollbar();\n        },\n      });\n    },\n\n    /*\n     * Send the content to store only when needed:\n     * - when feature mark or bbox is added\n     * - when story is to be saved\n     */\n    handleContentUpdate() {\n      this.$store.commit(UPDATE_STORY_TEXT, cloneDeep(this.editor.getJSON()));\n    },\n\n    handleStartEditing() {\n      this.$store.commit(UPDATE_EDITABLE, true);\n      this.editor.setOptions({ editable: true });\n      this.previousContent = cloneDeep(this.editor.getJSON());\n    },\n\n    /*\n     * Create new story or updates an existing one.\n     */\n    async handleSave() {\n      this.handleContentUpdate();\n\n      const payload = {\n        name: this.storyName,\n        text: this.text,\n        track: this.track,\n      };\n\n      if (this.storyId) {\n        payload.id = this.storyId;\n      }\n\n      try {\n        this.saving = true;\n        this.storyId = await storyService.save(payload, this.token);\n      } catch (e) {\n        this.$store.commit(UPDATE_ERRORS, {\n          title: e.name,\n          message: e.message,\n        });\n      } finally {\n        this.saving = false;\n      }\n    },\n\n    /*\n     * Scroll to the highlighted feature mark or bbox.\n     */\n    scrollToHighlighted() {\n      const highlighted = this.$getHighlightedNode();\n\n      if (!highlighted) {\n        return;\n      }\n\n      this.$scrollTo(highlighted, undefined, {\n        container: document.querySelector('.editor'),\n        offset: -50,\n      });\n    },\n\n    $getHighlightedNode() {\n      let querySelector;\n\n      if (!this.shouldTextScroll) {\n        return;\n      }\n\n      if (this.highlightedLatLng) {\n        querySelector = getLatLngSelector(this.highlightedLatLng);\n      }\n\n      if (this.highlightedBbox) {\n        querySelector = getBboxSelector(this.highlightedBbox);\n      }\n\n      // eslint-disable-next-line consistent-return\n      return document.querySelector(querySelector);\n    },\n\n    $createEditor() {\n      return new Editor({\n        editable: this.editable,\n        extensions: [\n          new BboxMark(),\n          new FeatureMark(),\n          new Heading({\n            levels: [2, 3, 4], // leave <h1> for the story title\n          }),\n          new Image(),\n        ],\n        content: this.content,\n      });\n    },\n\n    $hideScrollbar() {\n      document.documentElement.classList.add('is-clipped');\n    },\n  },\n};\n</script>\n\n<template>\n  <div style=\"display: flex;\" class=\"column is-12 has-padding-0 story-text\">\n    <div class=\"story-text__content\">\n      <form v-if=\"editable\" class=\"has-mt-1\">\n        <b-field>\n          <b-input custom-class=\"story-title-input\" v-model=\"storyName\" placeholder=\"Název příběhu\" size=\"is-large\"></b-input>\n        </b-field>\n      </form>\n      <div v-if=\"!editable\" style=\"display: flex; align-items: center; justify-content: space-evenly;\">\n        <h1 style=\"flex: 1;\" class=\"story-title-input has-mt-1\">{{ storyName }}</h1>\n        <b-button @click=\"handleStartEditing\" v-if=\"showEditButton\" size=\"is-small\" icon-left=\"pencil\">Upravit</b-button>\n      </div>\n\n      <menu-bar\n        :saving=\"saving\"\n        :editor=\"editor\" v-if=\"editable\">\n        <template v-slot:cancel-button>\n          <b-button\n            style=\"margin-left: auto;\"\n            size=\"is-small\"\n            class=\"menubar__button\"\n            @click=\"handleCancelEditing\">Zrušit\n          </b-button>\n        </template>\n        <template v-slot:submit-button>\n          <b-button\n            :loading=\"saving\"\n            size=\"is-small\"\n            class=\"menubar__button\"\n            type=\"is-primary\"\n            @click=\"handleSave\">Uložit\n          </b-button>\n        </template>\n      </menu-bar>\n      <menu-bubble\n        @changed=\"handleContentUpdate\"\n        @click.native=\"handleContentUpdate\" :editor=\"editor\" v-if=\"editable\" />\n\n      <editor-content :class=\"{'editable': this.editable}\" style=\"flex: 1; overflow: auto;\" class=\"editor has-mt-1 has-mb-1\" :editor=\"editor\" />\n\n    </div>\n\n  </div>\n</template>\n\n<!-- can't be scoped or title styles would not work -->\n<style lang=\"scss\">\n@import \"../../node_modules/bulma/bulma.sass\";\n\na[data-cs-lat],\na[data-cs-bbox] {\n  color: $primary;\n  cursor: pointer;\n  text-decoration: underline;\n}\n\na[data-cs-bbox] {\n  border: 1px dashed $bbox-mark-border-color;\n  padding: 1px;\n  text-decoration: none;\n}\n\n.editor {\n  h2, h3, h4 {\n    @extend .title;\n    color: $text;\n  }\n\n  h2 {\n    @extend .is-2;\n    margin-bottom: 1rem;\n    margin-top: 1rem;\n  }\n\n  h3 {\n    @extend .is-3;\n    margin-bottom: .7rem;\n    margin-top: .7rem;\n  }\n\n  h4 {\n    @extend .is-4;\n    margin-bottom: .4rem;\n    margin-top: .4rem;\n  }\n}\n\n.story-text {\n  display: flex;\n  flex: 1 !important;\n  overflow: auto;\n}\n\n.story-text__content {\n  margin-left: 1rem;\n  margin-right: 1rem;\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  overflow: auto;\n}\n\n.story-title-input,\n.story-title-input:active,\n.story-title-input:focus {\n  border: 0;\n  border-radius: 0;\n  border-bottom: 4px dotted $primary;\n  box-shadow: none;\n  color: $text;\n  font-size: 3rem !important;\n  height: 5rem;\n  line-height: 3.5rem;\n  padding-bottom: .5rem;\n  padding-left: 5px;\n}\n\n.editor {\n  padding: 1rem;\n}\n\n.editor.editable {\n  border: 1px solid #d7d7d7;\n  border-radius: 6px;\n  background: #f0eeee;\n  margin-bottom: 1rem;\n}\n\n.ProseMirror {\n  min-height: 100%;\n}\n\n.ProseMirror-focused {\n  outline: none;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsEditor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CsEditor.vue?vue&type=template&id=4bf37946&\"\nimport script from \"./CsEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./CsEditor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CsEditor.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"column is-6 has-padding-0\"},[_c('div',{staticClass:\"cs-map\"},[_c('div',{attrs:{\"id\":\"cs-map-container\"}},[_c('l-map',{ref:\"csmap\",attrs:{\"bounds\":_vm.mapBounds,\"center\":_vm.mapCenter,\"zoom\":_vm.mapOptions.zoom},on:{\"click\":function($event){return _vm.handleMapClick($event.latlng)},\"mousedown\":function($event){return _vm.handleMapMouseDown($event.latlng)}}},[_c('l-control',{staticClass:\"leaflet-bar leaflet-control\",attrs:{\"position\":\"topleft\"}},[(_vm.editable)?_c('cs-track-upload-button',{on:_vm._d({},[_vm.TRACK_FILE_UPLOAD_EVENT,function($event){return _vm.handleFileUpload($event)}])}):_vm._e()],1),_c('l-tile-layer',{attrs:{\"url\":_vm.mapOptions.baseLayer}}),_c('l-tile-layer',{attrs:{\"url\":_vm.mapOptions.hikingOverlay,\"layer-type\":\"overlay\",\"opacity\":0.4}}),_c('l-tile-layer',{attrs:{\"url\":_vm.mapOptions.labelsOverlay,\"layer-type\":\"overlay\"}}),(_vm.track)?_c('l-geo-json',{ref:\"cstrack\",attrs:{\"geojson\":_vm.track,\"options\":_vm.trackOptions.style.plain},on:{\"ready\":function($event){return _vm.handleTrackReady($event)}}}):_vm._e(),_vm._l((_vm.bboxes),function(bbox){return _c('l-rectangle',{key:bbox.id,attrs:{\"bounds\":bbox.bounds,\"l-style\":bbox.highlighted ? _vm.bboxOptions.selected.style : _vm.bboxOptions.plain.style},on:{\"click\":function($event){return _vm.handleBboxClick($event, bbox)}}})}),_vm._l((_vm.features),function(f,index){return _c('l-circle-marker',{key:index,attrs:{\"color\":f.highlighted ? _vm.markerOptions.style.highlighted.color : _vm.markerOptions.style.plain.color,\"fill-color\":f.highlighted ? _vm.markerOptions.style.highlighted.color : _vm.markerOptions.style.plain.color,\"fill-opacity\":f.highlighted ? _vm.markerOptions.style.highlighted.fillOpacity : _vm.markerOptions.style.plain.fillOpacity,\"latLng\":f,\"radius\":_vm.markerOptions.style.common.radius,\"weight\":_vm.markerOptions.style.common.weight},on:{\"click\":_vm.handleFeatureClick}})})],2)],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export const mapOptions = {\n  bounds: undefined,\n  center: [50, 19],\n  baseLayer: 'https://api.mapbox.com/styles/v1/cartostory/cjugqcypf27581gnry4y59lxy/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoiY2FydG9zdG9yeSIsImEiOiJjanQycXVyZDcxeXZqM3lxeDNvcW81NWJpIn0.hfvoqNSy7dT0yviVhNcDMg',\n  hikingOverlay: 'http://tile.mtbmap.cz/overlay_hiking/{z}/{x}/{y}.png',\n  labelsOverlay: 'https://api.mapbox.com/styles/v1/cartostory/cjugqfe8r1lhh1ftgrmr7v9zj/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoiY2FydG9zdG9yeSIsImEiOiJjanQycXVyZDcxeXZqM3lxeDNvcW81NWJpIn0.hfvoqNSy7dT0yviVhNcDMg',\n  zoom: 8,\n  edgeMarker: undefined,\n};\n\nexport const markerOptions = {\n  style: {\n    common: {\n      radius: 8,\n      weight: 1.5,\n    },\n    highlighted: {\n      color: '#F56C6C',\n      opacity: 1,\n      fillOpacity: 0.4,\n    },\n    inBbox: {\n      color: '#42b983',\n      fillOpacity: 0.5,\n    },\n    plain: {\n      color: '#3185fc',\n      fillOpacity: 0.5,\n    },\n    edge: {\n      icon: {\n        iconUrl: '../../node_modules/leaflet/dist/images/marker-icon.png',\n        iconRetinaUrl: 'marker-icon-2x.png',\n        shadowUrl: 'marker-shadow.png',\n        iconSize: [25, 41],\n        iconAnchor: [12, 41],\n        popupAnchor: [1, -34],\n        tooltipAnchor: [16, -28],\n        shadowSize: [0, 0],\n      },\n    },\n  },\n};\n\nexport const bboxOptions = {\n  plain: {\n    style: {\n      color: '#5a5a66',\n      fillOpacity: 0,\n      dashArray: '5',\n      weight: 2,\n    },\n  },\n  hovered: {\n    style: {\n      color: '#5a5a66',\n      fillColor: '#5a5a66',\n      dashArray: '5',\n      weight: 2,\n    },\n  },\n  selected: {\n    style: {\n      color: '#42b983',\n      fillColor: '#42b983',\n      fillOpacity: 0,\n      dashArray: '5',\n      weight: 2,\n    },\n  },\n};\n\nexport const trackOptions = {\n  style: {\n    plain: {\n      color: '#5a5a66',\n      dashArray: '6',\n    },\n    inBbox: {\n      color: '#42b983',\n      dashArray: '6',\n    },\n  },\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('file-reader',{staticStyle:{\"height\":\"30px\",\"width\":\"30px\",\"line-height\":\"30px\"},attrs:{\"accept\":\".json\",\"output\":\"text\"},on:{\"reader-load\":_vm.handleFileUpload},scopedSlots:_vm._u([{key:\"reader\",fn:function(props){return [_c('b-button',{staticClass:\"file-upload-button\",attrs:{\"title\":\"Nahrát soubor trasy\",\"size\":\"is-small\",\"icon-left\":\"cloud-upload\"},on:{\"click\":function($event){return _vm.$refs.fileReader.click()}}}),_c('input',{ref:\"fileReader\",staticStyle:{\"visibility\":\"hidden\"},attrs:{\"type\":\"file\",\"accept\":props.accept},on:{\"change\":props.onchange}})]}}])})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport FileReader from 'vue-filereader';\n\nimport { TRACK_FILE_UPLOAD_EVENT } from '@/config/config';\nimport { UPDATE_ERRORS } from '@/store/mutations';\n\nexport default {\n  name: 'CsTrackUploadButton',\n  components: {\n    FileReader,\n  },\n  methods: {\n    handleFileUpload(fileObj) {\n      try {\n        this.$emit(TRACK_FILE_UPLOAD_EVENT, fileObj && JSON.parse(fileObj.data));\n      } catch(e) {\n        this.$store.commit(UPDATE_ERRORS, {\n          title: 'Selhalo nahrání trasy',\n          message: 'Trasu se nepodařilo nahrát. Soubor pravděpodobně není validní.',\n        });\n      }\n    },\n  },\n}\n</script>\n\n<template>\n  <file-reader style=\"height: 30px; width: 30px; line-height: 30px;\"\n    accept=\".json\"\n    output=\"text\"\n    @reader-load=\"handleFileUpload\"\n    >\n    <template #reader=\"props\">\n\n    <b-button\n      class=\"file-upload-button\"\n      @click=\"$refs.fileReader.click()\"\n      title=\"Nahrát soubor trasy\"\n      size=\"is-small\"\n      icon-left=\"cloud-upload\"\n      ></b-button>\n\n      <input\n        style=\"visibility: hidden\"\n        ref=\"fileReader\"\n        type=\"file\"\n        :accept=\"props.accept\"\n        @change=\"props.onchange\"\n        />\n    </template>\n  </file-reader>\n</template>\n\n<style lang=\"scss\" scoped>\n.file-upload-button {\n  border-radius: 0;\n  font-size: 16px;\n  height: 30px;\n  line-height: 30px;\n  padding-left: 0px;\n  padding-right: 0px;\n  padding-top: 5px;\n  text-align: center;\n  width: 30px;\n}\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsTrackUploadButton.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsTrackUploadButton.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CsTrackUploadButton.vue?vue&type=template&id=6f11a710&scoped=true&\"\nimport script from \"./CsTrackUploadButton.vue?vue&type=script&lang=js&\"\nexport * from \"./CsTrackUploadButton.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CsTrackUploadButton.vue?vue&type=style&index=0&id=6f11a710&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6f11a710\",\n  null\n  \n)\n\nexport default component.exports","<script>\nimport { LCircleMarker, LControl, LGeoJson, LMap, LTileLayer, LRectangle } from 'vue2-leaflet';\nimport { mapGetters, mapState } from 'vuex';\nimport { STORY_LINK_CLICK_EVENT, STORY_LINK_LAT_ATTR, STORY_LINK_LNG_ATTR, TRACK_FILE_UPLOAD_EVENT } from '@/config/config';\nimport { bboxOptions, markerOptions, mapOptions, trackOptions } from '@/config/map';\nimport { UPDATE_BBOX_BEING_ADDED, UPDATE_FEATURE_BEING_ADDED, UPDATE_HIGHLIGHTED_BBOX, UPDATE_HIGHLIGHTED_LAT_LNG, UPDATE_SHOULD_TEXT_SCROLL, UPDATE_TRACK } from '@/store/mutations';\nimport CsTrackUploadButton from '@/components/CsTrackUploadButton.vue';\nimport { getBboxSelector, getLatLngSelector } from '@/utils/utils';\n\nrequire('../../node_modules/leaflet/dist/leaflet.css');\nrequire('leaflet-draw');\n\nexport default {\n  name: 'CsMap',\n  components: {\n    CsTrackUploadButton,\n    LCircleMarker,\n    LControl,\n    LGeoJson,\n    LMap,\n    LTileLayer,\n    LRectangle,\n  },\n  data() {\n    return {\n      STORY_LINK_CLICK_EVENT,\n      TRACK_FILE_UPLOAD_EVENT,\n      bboxOptions,\n      drawControl: undefined,\n      markerOptions,\n      mapOptions,\n      trackOptions,\n    };\n  },\n  computed: {\n    mapBounds() {\n      const bbox = this.highlightedBbox;\n\n      if (this.recenterMap && bbox) {\n        return window.L.latLngBounds(bbox);\n      }\n\n      return undefined;\n    },\n    mapCenter() {\n      const bboxCenter = this.mapBounds && this.mapBounds.getCenter();\n      const currentMapCenter = this.$refs.csmap && this.$refs.csmap.mapObject.getCenter();\n      const highlightedFeatureMapCenter = this.recenterMap && this.highlightedLatLng;\n      return bboxCenter || highlightedFeatureMapCenter || currentMapCenter;\n    },\n    ...mapGetters(['bboxes', 'features', 'featuresWithoutHighlighted']),\n    ...mapState([\n      'bboxBeingAdded',\n      'editable',\n      'featureBeingAdded',\n      'highlightedBbox',\n      'highlightedLatLng',\n      'shouldTextScroll',\n    ]),\n    ...mapState({\n      recenterMap: state => !state.shouldTextScroll,\n      track: state => state.story.track,\n    }),\n  },\n  methods: {\n    /*\n     * @param {L.geoJSON}\n     */\n    handleTrackReady(track) {\n      this.$refs.csmap.mapObject.fitBounds(track.getBounds());\n    },\n\n    /*\n     * Sets highlighted bbox.\n     * @param {MouseEvent}\n     * @param {Object} clicked bounding box\n     */\n    handleBboxClick(event, bbox) {\n      const querySelector = getBboxSelector(bbox.bounds);\n      const textMark = document.querySelector(querySelector);\n\n      if (!textMark) {\n        return;\n      }\n\n      this.$store.commit(UPDATE_HIGHLIGHTED_LAT_LNG, undefined);\n      this.$store.commit(UPDATE_HIGHLIGHTED_BBOX, bbox.bounds);\n      this.$store.commit(UPDATE_SHOULD_TEXT_SCROLL, true);\n    },\n\n    /*\n     * Sets feature mark that should be highlighted and scrolled to in the text.\n     */\n    handleFeatureClick(event) {\n      const querySelector = getLatLngSelector(event.latlng);\n      const textMark = document.querySelector(querySelector);\n\n      if (!textMark) {\n        return;\n      }\n\n      this.$store.commit(UPDATE_HIGHLIGHTED_LAT_LNG, {\n        [STORY_LINK_LAT_ATTR]: textMark.getAttribute([STORY_LINK_LAT_ATTR]),\n        [STORY_LINK_LNG_ATTR]: textMark.getAttribute([STORY_LINK_LNG_ATTR]),\n      });\n      this.$store.commit(UPDATE_HIGHLIGHTED_BBOX, undefined);\n      this.$store.commit(UPDATE_SHOULD_TEXT_SCROLL, true);\n    },\n\n    /*\n     * Links the position to the selected text when the feature mark addition is active.\n     * @param {object}\n     */\n    handleMapClick(latLng) {\n      if (!this.featureBeingAdded.active) {\n        return;\n      }\n\n      const position = {\n        [STORY_LINK_LAT_ATTR]: latLng.lat,\n        [STORY_LINK_LNG_ATTR]: latLng.lng,\n      };\n\n      this.$store.commit(UPDATE_FEATURE_BEING_ADDED, { active: true, position });\n    },\n\n    /*\n     * Links the bounding box to the selected text when the bbox mark addition is active.\n     */\n    handleMapMouseDown() {\n      if (!this.bboxBeingAdded.active) {\n        return;\n      }\n\n      const map = this.$refs.csmap.mapObject;\n      window.L.drawLocal.draw.handlers.rectangle.tooltip.start = '';\n      window.L.drawLocal.draw.handlers.simpleshape.tooltip.end = '';\n      new window.L.Draw.Rectangle(map, {\n        showArea: false,\n        shapeOptions: this.bboxOptions.plain.style,\n      }).enable();\n\n      map.off(window.L.Draw.Event.CREATED);\n      map.on(window.L.Draw.Event.CREATED, this.$handleCreateRectangle);\n    },\n\n    /*\n     * @param {object} geojson data\n     */\n    handleFileUpload(data) {\n      this.$store.commit(UPDATE_TRACK, data);\n    },\n\n    $handleCreateRectangle(event) {\n      const bounds = event.layer.getBounds();\n      const northWest = bounds.getNorthWest();\n      const southEast = bounds.getSouthEast();\n      const bbox = [\n        [northWest.lat, northWest.lng],\n        [southEast.lat, southEast.lng],\n      ];\n\n      this.$store.commit(UPDATE_BBOX_BEING_ADDED, { active: true, bounds: bbox });\n    },\n  },\n};\n</script>\n\n<template>\n  <div class=\"column is-6 has-padding-0\">\n    <div class=\"cs-map\">\n      <div id=\"cs-map-container\">\n        <l-map\n          :bounds=\"mapBounds\"\n          @click=\"handleMapClick($event.latlng)\"\n          @mousedown=\"handleMapMouseDown($event.latlng)\"\n          :center=\"mapCenter\"\n          :zoom=\"mapOptions.zoom\"\n          ref=\"csmap\">\n          <l-control class=\"leaflet-bar leaflet-control\" position=\"topleft\" >\n            <cs-track-upload-button v-if=\"editable\" @[TRACK_FILE_UPLOAD_EVENT]=\"handleFileUpload($event)\" />\n          </l-control>\n\n          <l-tile-layer :url=\"mapOptions.baseLayer\" />\n          <l-tile-layer :url=\"mapOptions.hikingOverlay\" layer-type=\"overlay\" :opacity=\"0.4\" />\n          <l-tile-layer :url=\"mapOptions.labelsOverlay\" layer-type=\"overlay\" />\n\n          <l-geo-json @ready=\"handleTrackReady($event)\" v-if=\"track\" :geojson=\"track\" :options=\"trackOptions.style.plain\" ref=\"cstrack\" />\n\n          <l-rectangle\n            @click=\"handleBboxClick($event, bbox)\"\n            v-for=\"bbox in bboxes\"\n            :key=\"bbox.id\"\n            :bounds=\"bbox.bounds\"\n            :l-style=\"bbox.highlighted ? bboxOptions.selected.style : bboxOptions.plain.style\" />\n\n          <l-circle-marker\n            @click=\"handleFeatureClick\"\n            :color=\"f.highlighted ? markerOptions.style.highlighted.color : markerOptions.style.plain.color\"\n            :fill-color=\"f.highlighted ? markerOptions.style.highlighted.color : markerOptions.style.plain.color\"\n            :fill-opacity=\"f.highlighted ? markerOptions.style.highlighted.fillOpacity : markerOptions.style.plain.fillOpacity\"\n            :latLng=\"f\"\n            :radius=\"markerOptions.style.common.radius\"\n            :weight=\"markerOptions.style.common.weight\"\n            :key=\"index\"\n            v-for=\"(f, index) in features\">\n          </l-circle-marker>\n        </l-map>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.cs-map {\n  height: 100%;\n}\n\n#cs-map-container {\n  width: auto;\n  height: 100%;\n  position: relative;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsMap.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsMap.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CsMap.vue?vue&type=template&id=0c9320d8&scoped=true&\"\nimport script from \"./CsMap.vue?vue&type=script&lang=js&\"\nexport * from \"./CsMap.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CsMap.vue?vue&type=style&index=0&id=0c9320d8&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0c9320d8\",\n  null\n  \n)\n\nexport default component.exports","<script>\nimport CsEditor from '@/components/CsEditor.vue';\nimport CsMap from '@/components/CsMap.vue';\nimport { UPDATE_LOADING } from '@/store/mutations';\n\nexport default {\n  name: 'story-screen',\n  components: {\n    CsEditor,\n    CsMap,\n  },\n  data() {\n    return {\n      storyId: undefined,\n    };\n  },\n  computed: {\n    editable() {\n      return this.$store.state.editable;\n    },\n    token() {\n      return this.$store.state.auth.token;\n    },\n    loading() {\n      return this.$store.state.loading;\n    },\n  },\n  watch: {\n    async token(value) {\n      if (value) {\n        await this.$store.dispatch('loadStory', { storyUrl: this.storyId, token: value });\n        this.$store.commit(UPDATE_LOADING, false);\n      }\n    },\n  },\n  async created() {\n    this.storyId = this.$route.params && this.$route.params.id;\n\n    if (this.storyId) {\n      this.$store.commit(UPDATE_LOADING, true);\n    }\n  },\n};\n</script>\n\n<template>\n  <div v-if=\"!loading\" class=\"container-fluid story-form\">\n    <div class=\"wrapper columns has-margin-0\">\n      <cs-map></cs-map>\n\n      <div style=\"display:flex; flex-direction: column; width: 100%;\">\n        <cs-editor></cs-editor>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.wrapper {\n  height: calc(100vh - #{$navbar-height});\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StoryScreen.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StoryScreen.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StoryScreen.vue?vue&type=template&id=1ee03396&scoped=true&\"\nimport script from \"./StoryScreen.vue?vue&type=script&lang=js&\"\nexport * from \"./StoryScreen.vue?vue&type=script&lang=js&\"\nimport style0 from \"./StoryScreen.vue?vue&type=style&index=0&id=1ee03396&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1ee03396\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column is-6 is-offset-3\"},[_c('h1',{staticClass:\"title is-1 has-text-weight-normal has-text-centered has-mt-2\"},[_vm._v(\"Cartostory\")]),_c('div',{staticClass:\"card has-padding-1\"},[_c('div',{staticClass:\"card-content\"},[(_vm.availableStories.length > 0)?_c('b-field',{attrs:{\"label\":\"Nahrát příběh\"}},[_c('b-select',{attrs:{\"placeholder\":\"Příběh\",\"expanded\":\"\"},on:{\"input\":_vm.handleStorySelect}},_vm._l((_vm.availableStories),function(story){return _c('option',{key:story.name,domProps:{\"value\":story.name}},[_vm._v(_vm._s(story.name)+\"\\n            \")])}),0)],1):_vm._e(),_c('b-field',{attrs:{\"label\":\"URL příběhu\"}},[_c('b-input',{attrs:{\"type\":\"text\",\"expanded\":\"\"},model:{value:(_vm.storyUrl),callback:function ($$v) {_vm.storyUrl=$$v},expression:\"storyUrl\"}})],1),_c('b-button',{attrs:{\"disabled\":_vm.disabledSubmit,\"type\":\"is-primary\"},on:{\"click\":_vm.handleSubmit}},[_vm._v(\"Načíst\")])],1)])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport deburr from 'lodash.deburr';\nimport { mapState } from 'vuex';\n\nimport { UPDATE_ERRORS, UPDATE_LOADING, UPDATE_STORY_URL } from '@/store/mutations';\n\nexport default {\n  name: 'LoadStoryForm',\n  data() {\n    return {\n      currentStory: undefined,\n    };\n  },\n  computed: {\n    ...mapState({\n      availableStories: state => state.availableStories,\n      storyName: state => state.story.name,\n      storyText: state => state.story.text,\n    }),\n    disabledSubmit() {\n      return !this.storyUrl;\n    },\n    storyUrl: {\n      get() {\n        return this.$store.state.storyUrl;\n      },\n      set(value) {\n        this.$store.commit(UPDATE_STORY_URL, value);\n      },\n    },\n  },\n  methods: {\n    async handleSubmit() {\n      try {\n        await this.$store.dispatch('loadStory');\n        const title = deburr(this.storyName).toLowerCase();\n        this.$router.push(`/story/read/${title}`);\n      } catch (e) {\n        this.$store.commit(UPDATE_ERRORS, {\n          title: 'Příběh se nepodařilo nahrát',\n          message: 'Zkontrolujte jeho adresu.',\n        });\n      } finally {\n        this.$store.commit(UPDATE_LOADING, false);\n      }\n    },\n\n    handleStorySelect(storyName) {\n      const story = this.availableStories.find(s => s.name === storyName);\n\n      if (story) {\n        this.storyUrl = story.storyUrl;\n      }\n    },\n  },\n};\n</script>\n\n<template>\n  <div class=\"container\">\n    <div class=\"columns\">\n      <div class=\"column is-6 is-offset-3\">\n        <h1 class=\"title is-1 has-text-weight-normal has-text-centered has-mt-2\">Cartostory</h1>\n\n        <div class=\"card has-padding-1\">\n          <div class=\"card-content\">\n          <b-field v-if=\"availableStories.length > 0\" label=\"Nahrát příběh\">\n            <b-select placeholder=\"Příběh\" expanded @input=\"handleStorySelect\">\n              <option\n                v-for=\"story in availableStories\"\n                :key=\"story.name\"\n                :value=\"story.name\">{{story.name}}\n              </option>\n            </b-select>\n          </b-field>\n\n          <b-field label=\"URL příběhu\">\n            <b-input v-model=\"storyUrl\" type=\"text\" expanded></b-input>\n          </b-field>\n\n          <b-button :disabled=\"disabledSubmit\" type=\"is-primary\" @click=\"handleSubmit\">Načíst</b-button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoadStoryForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoadStoryForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LoadStoryForm.vue?vue&type=template&id=6706dcd3&scoped=true&\"\nimport script from \"./LoadStoryForm.vue?vue&type=script&lang=js&\"\nexport * from \"./LoadStoryForm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6706dcd3\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\nimport Router from 'vue-router';\n\nimport { UPDATE_EDITABLE, UPDATE_LOADING } from '@/store/mutations';\nimport store from '@/store/newStore';\nimport Login from '@/views/Login.vue';\nimport LoginCallback from '@/views/LoginCallback.vue';\nimport Landing from '@/views/Landing.vue';\nimport StoryScreen from '@/views/StoryScreen.vue';\nimport LoadStoryForm from './views/LoadStoryForm.vue';\n\nVue.use(Router);\n\nexport const routes = [\n  {\n    path: '/',\n    component: Landing,\n  },\n  {\n    path: '/login',\n    component: Login,\n  },\n  {\n    path: '/login-callback',\n    component: LoginCallback,\n  },\n  {\n    path: '/story/read/:id',\n    component: StoryScreen,\n    beforeEnter(to, from, next) {\n      store.commit(UPDATE_EDITABLE, false);\n      next();\n    },\n  },\n  {\n    path: '/story/load',\n    component: LoadStoryForm,\n  },\n  {\n    path: '/story/create',\n    component: StoryScreen,\n    beforeEnter(to, from, next) {\n      store.commit(UPDATE_EDITABLE, true);\n      next();\n    },\n  },\n];\n\nconst router = new Router({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes,\n});\n\nrouter.beforeEach((to, from, next) =>  {\n  store.commit(UPDATE_LOADING, true);\n  next();\n});\n\nrouter.afterEach(() =>  {\n  store.commit(UPDATE_LOADING, false);\n});\n\nexport default router;\n","import Buefy from 'buefy';\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nimport VueLogger from 'vuejs-logger';\nimport VueScrollTo from 'vue-scrollto';\nimport 'normalize.css';\n\nimport './assets/scss/index.scss';\nimport { UPDATE_TOKEN } from '@/store/mutations';\nimport { audience, domain, clientId } from '../auth_config.json';\nimport { Auth0Plugin, getInstance } from './auth';\nimport App from './App.vue';\nimport router from './router';\nimport store from './store/newStore';\n\nrequire('../node_modules/leaflet/dist/leaflet.css');\n\nVue.config.productionTip = false;\nVue.use(Buefy);\nVue.use(VueLogger);\nVue.use(VueScrollTo);\nVue.use(Vuex);\nVue.use(Auth0Plugin, {\n  audience,\n  domain,\n  clientId,\n  onRedirectCallback: (appState) => {\n    router.push(\n      appState && appState.targetUrl\n        ? appState.targetUrl\n        : window.location.pathname,\n    );\n  },\n});\n\nnew Vue({\n  store,\n  router,\n  render: h => h(App),\n}).$mount('#js-cartostory');\n\nconst auth0Instance = getInstance();\n\nauth0Instance.$watch('loading', async (loading) => {\n  if (!loading && auth0Instance.isAuthenticated) {\n    const token = await auth0Instance.getTokenSilently();\n    store.commit(UPDATE_TOKEN, token);\n  }\n});\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuBubble.vue?vue&type=style&index=0&id=620f66f7&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuBubble.vue?vue&type=style&index=0&id=620f66f7&lang=scss&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsMap.vue?vue&type=style&index=0&id=0c9320d8&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsMap.vue?vue&type=style&index=0&id=0c9320d8&lang=scss&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StoryScreen.vue?vue&type=style&index=0&id=1ee03396&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StoryScreen.vue?vue&type=style&index=0&id=1ee03396&lang=scss&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsTrackUploadButton.vue?vue&type=style&index=0&id=6f11a710&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsTrackUploadButton.vue?vue&type=style&index=0&id=6f11a710&lang=scss&scoped=true&\""],"sourceRoot":""}