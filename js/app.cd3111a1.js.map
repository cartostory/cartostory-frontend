{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/CsEditor.vue?0c71","webpack:///./src/components/CsMap.vue?2884","webpack:///./src/App.vue?c17d","webpack:///./src/components/CsNotification.vue?4b17","webpack:///./src/store/mutations.js","webpack:///src/components/CsNotification.vue","webpack:///./src/components/CsNotification.vue?058b","webpack:///./src/components/CsNotification.vue","webpack:///src/App.vue","webpack:///./src/App.vue?a37b","webpack:///./src/App.vue","webpack:///./src/config/config.js","webpack:///./src/store/store.helpers.js","webpack:///./src/store/newStore.js","webpack:///./src/views/Landing.vue?51c8","webpack:///src/views/Landing.vue","webpack:///./src/views/Landing.vue?30c7","webpack:///./src/views/Landing.vue?8862","webpack:///./src/views/StoryScreen.vue?bc80","webpack:///./src/components/CsEditor.vue?f987","webpack:///./src/components/editor/BboxMark.js","webpack:///./src/components/editor/FeatureMark.js","webpack:///./src/components/editor/MenuBar.vue?b6a6","webpack:///./src/components/StoryJson.vue?86a5","webpack:///src/components/StoryJson.vue","webpack:///./src/components/StoryJson.vue?1e4a","webpack:///./src/components/StoryJson.vue?de24","webpack:///src/components/editor/MenuBar.vue","webpack:///./src/components/editor/MenuBar.vue?dba4","webpack:///./src/components/editor/MenuBar.vue","webpack:///./src/components/editor/MenuBubble.vue?d65e","webpack:///src/components/editor/MenuBubble.vue","webpack:///./src/components/editor/MenuBubble.vue?f1ca","webpack:///./src/components/editor/MenuBubble.vue?6819","webpack:///src/components/CsEditor.vue","webpack:///./src/components/CsEditor.vue?8bab","webpack:///./src/components/CsEditor.vue?36af","webpack:///./src/components/CsMap.vue?a444","webpack:///./src/config/map.js","webpack:///./src/components/CsTrackUploadButton.vue?08f1","webpack:///src/components/CsTrackUploadButton.vue","webpack:///./src/components/CsTrackUploadButton.vue?3d57","webpack:///./src/components/CsTrackUploadButton.vue?0963","webpack:///src/components/CsMap.vue","webpack:///./src/components/CsMap.vue?110c","webpack:///./src/components/CsMap.vue?55d9","webpack:///src/views/StoryScreen.vue","webpack:///./src/views/StoryScreen.vue?262c","webpack:///./src/views/StoryScreen.vue?65e6","webpack:///./src/views/LoadStoryForm.vue?9367","webpack:///src/views/LoadStoryForm.vue","webpack:///./src/views/LoadStoryForm.vue?6a1a","webpack:///./src/views/LoadStoryForm.vue","webpack:///./src/router.js","webpack:///./src/main.js","webpack:///./src/views/Landing.vue?86dc","webpack:///./src/components/editor/MenuBubble.vue?2fa0","webpack:///./src/components/StoryJson.vue?2978","webpack:///./src/components/CsTrackUploadButton.vue?6dee","webpack:///./src/views/StoryScreen.vue?f6e8"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","loading","on","$event","staticRenderFns","REMOVE_ERROR","UPDATE_BBOX_BEING_ADDED","UPDATE_ERRORS","UPDATE_EDITABLE","UPDATE_FEATURE_BEING_ADDED","UPDATE_HIGHLIGHTED_BBOX","UPDATE_HIGHLIGHTED_LAT_LNG","UPDATE_LOADING","UPDATE_MAP_CENTER","UPDATE_SHOULD_TEXT_SCROLL","UPDATE_STORY","UPDATE_STORY_NAME","UPDATE_STORY_TEXT","UPDATE_STORY_URL","UPDATE_TRACK","computed","errors","$store","state","forEach","indefinite","position","type","message","onAction","watch","component","components","CsNotification","STORY_LINK_BBOX_ATTR","STORY_LINK_BBOX_ATTR_CAMEL","toCamelCase","STORY_LINK_LAT_ATTR","STORY_LINK_LNG_ATTR","STORY_LINK_LAT_ATTR_CAMEL","STORY_LINK_LNG_ATTR_CAMEL","STORY_LINK_CLICK_EVENT","TRACK_FILE_UPLOAD_EVENT","str","split","map","item","idx","toUpperCase","join","last","xs","set","val","setPath","path","obj","reduce","acc","x","Vue","use","Vuex","editable","bboxBeingAdded","active","bounds","undefined","featureBeingAdded","storyUrl","story","text","track","availableStories","highlightedBbox","highlightedLatLng","shouldTextScroll","mutations","error","findIndex","e","title","newErorr","bbox","lat","lng","latLng","Number","parseFloat","actions","updateTrack","payload","commit","updateStoryText","loadStory","axios","getters","content","doc","JSON","parse","stringify","bboxes","pickDeep","mapDeep","v","leavesOnly","filter","id","features","chunk","featuresWithoutHighlighted","feature","Store","strict","_m","_v","$router","staticStyle","ready","_e","model","callback","$$v","storyName","expression","_s","editor","class","TAG","BboxMark","toggleMark","default","parseDOM","tag","getAttrs","dom","dataset","toDOM","node","props","methods","handleClick","isHighlighted","updateAttrs","template","Mark","FeatureMark","scopedSlots","_u","fn","ref","commands","isActive","heading","level","image","showImagePrompt","isDisabled","handleSave","directives","rawName","domProps","target","composing","required","String","EditorMenuBar","src","command","getJSON","$buefy","modal","open","StoryJson","parent","customClass","string","getMarkAttrs","menu","style","isNewFeatureMarkButtonVisible","featureMark","handleAddFeatureMarkClick","handleRemoveFeatureMarkClick","isNewBboxMarkVisible","bboxMark","handleAddBoundingBoxClick","bboxAddedCallback","featureMarkAddedCallback","EditorMenuBubble","EditorContent","MenuBubble","MenuBar","contentPlaceholder","keepInBounds","scrollToHighlightedLatLng","mounted","$createEditor","$scrollTo","textMark","container","document","querySelector","offset","extensions","onUpdate","beforeDestroy","destroy","mapCenter","mapOptions","zoom","handleMapClick","latlng","handleMapMouseDown","_d","handleFileUpload","baseLayer","hikingOverlay","labelsOverlay","trackOptions","plain","handleTrackReady","_l","bboxOptions","selected","f","index","markerOptions","color","fillOpacity","common","radius","weight","handleFeatureClick","highlighted","center","edgeMarker","opacity","inBbox","edge","icon","iconUrl","iconRetinaUrl","shadowUrl","iconSize","iconAnchor","popupAnchor","tooltipAnchor","shadowSize","dashArray","hovered","fillColor","$refs","fileReader","click","accept","onchange","FileReader","$emit","fileObj","CsTrackUploadButton","LCircleMarker","LControl","LGeoJson","LMap","LTileLayer","LRectangle","addFeatureMark","drawControl","bboxBounds","highlightedFeatureMapCenter","currentMapCenter","csmap","mapObject","fitBounds","getBounds","L","drawLocal","draw","handlers","rectangle","tooltip","start","simpleshape","end","Draw","Rectangle","showArea","shapeOptions","off","Event","CREATED","$handleCreateRectangle","CsEditor","CsMap","currentRoute","handleStorySelect","disabledSubmit","handleSubmit","currentStory","Router","routes","Landing","StoryScreen","beforeEnter","to","from","next","store","LoadStoryForm","router","base","process","beforeEach","afterEach","require","config","productionTip","Buefy","VueLogger","VueScrollTo","render","h","App","$mount"],"mappings":"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","file":"js/app.cd3111a1.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsEditor.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsEditor.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsMap.vue?vue&type=style&index=0&id=bb21ac24&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsMap.vue?vue&type=style&index=0&id=bb21ac24&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"section\",attrs:{\"id\":\"js-app\"}},[_c('router-view'),_c('cs-notification'),_c('b-loading',{attrs:{\"is-full-page\":true,\"active\":_vm.loading},on:{\"update:active\":function($event){_vm.loading=$event}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\"div\")}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// new mutations\nexport const REMOVE_ERROR = 'REMOVE_ERROR';\nexport const UPDATE_BBOX_BEING_ADDED = 'UPDATE_BBOX_BEING_ADDED';\nexport const UPDATE_BOUNDING_BOX_CALLBACK = 'UPDATE_BOUNDING_BOX_CALLBACK';\nexport const UPDATE_ERRORS = 'UPDATE_ERRORS';\nexport const UPDATE_EDITABLE = 'UPDATE_EDITABLE';\nexport const UPDATE_FEATURE_BEING_ADDED = 'UPDATE_FEATURE_BEING_ADDED';\nexport const UPDATE_HIGHLIGHTED_BBOX = 'UPDATE_HIGHLIGHTED_BBOX';\nexport const UPDATE_HIGHLIGHTED_LAT_LNG = 'UPDATE_HIGHLIGHTED_LAT_LNG';\nexport const UPDATE_LOADING = 'UPDATE_LOADING';\nexport const UPDATE_MAP_CENTER = 'UPDATE_MAP_CENTER';\nexport const UPDATE_SHOULD_TEXT_SCROLL = 'UPDATE_SHOULD_TEXT_SCROLL';\nexport const UPDATE_STORY = 'UPDATE_STORY';\nexport const UPDATE_STORY_NAME = 'UPDATE_STORY_NAME';\nexport const UPDATE_STORY_TEXT = 'UPDATE_STORY_TEXT';\nexport const UPDATE_STORY_URL = 'UPDATE_STORY_URL';\nexport const UPDATE_TRACK = 'UPDATE_TRACK';\n\nexport const RESET_HIGHLIGHTED_LINK = 'RESET_HIGHLIGHTED_LINK';\nexport const SET_BBOX = 'SET_BBOX';\nexport const SET_BBOX_HOVERED = 'SET_BBOX_HOVERED';\nexport const SET_FEATURES_URL = 'SET_FEATURES_URL';\nexport const SET_HIGHLIGHTED_FEATURE = 'SET_HIGHLIGHTED_FEATURE';\nexport const SET_SHOULD_SCROLL_TO_FEATURE = 'SET_SHOULD_SCROLL_TO_FEATURE';\nexport const SET_STORY_NAME = 'SET_STORY_NAME';\nexport const SET_STORY_URL = 'SET_STORY_URL';\nexport const SET_TRACK_URL = 'SET_TRACK_URL';\n\n// story mutations\nexport const SET_STORY = 'SET_STORY';\n\n// track mutations\nexport const SET_TRACK = 'SET_TRACK';\n","<script>\nimport { REMOVE_ERROR } from '@/store/mutations';\n\nexport default {\n  name: 'CsNotification',\n  computed: {\n    errors() {\n      this.$store.state.errors.forEach(e => {\n        this.$buefy.snackbar.open({\n          indefinite: true,\n          position: 'is-top-right',\n          type: 'is-danger',\n          message: `<strong>${e.title}</strong><br/><p>${e.message}</p>`,\n          onAction: () => {\n            this.$store.commit(REMOVE_ERROR, e);\n          },\n        });\n        this.$store.commit(REMOVE_ERROR, e);\n      });\n      return this.$store.state.errors;\n    },\n  },\n  watch: {\n    errors() {\n      return this.errors;\n    },\n  },\n};\n</script>\n\n<template>\n\n</template>\n\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsNotification.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsNotification.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CsNotification.vue?vue&type=template&id=010a15f2&\"\nimport script from \"./CsNotification.vue?vue&type=script&lang=js&\"\nexport * from \"./CsNotification.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<script>\nimport CsNotification from '@/components/CsNotification.vue';\n\nexport default {\n  name: 'app',\n  components: {\n    CsNotification,\n  },\n  computed: {\n    loading() {\n      return this.$store.state.loading;\n    },\n  },\n};\n</script>\n\n<template>\n  <div class=\"section\" id=\"js-app\">\n    <router-view/>\n    <cs-notification/>\n    <b-loading :is-full-page=\"true\" :active.sync=\"loading\"></b-loading>\n  </div>\n</template>\n\n<style lang=\"scss\">\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=2b931a3d&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export const SCROLL_CONTAINER_ID = 'story-scrolling-container';\nexport const STORY_LINK_BBOX_ATTR = 'data-cs-bbox';\nexport const STORY_LINK_BBOX_ATTR_CAMEL = toCamelCase(STORY_LINK_BBOX_ATTR);\nexport const STORY_LINK_DATA_ID = 'data-cs-id';\nexport const STORY_LINK_LAT_ATTR = 'data-cs-lat';\nexport const STORY_LINK_LNG_ATTR = 'data-cs-lng';\nexport const STORY_LINK_LAT_ATTR_CAMEL = toCamelCase(STORY_LINK_LAT_ATTR);\nexport const STORY_LINK_LNG_ATTR_CAMEL = toCamelCase(STORY_LINK_LNG_ATTR);\nexport const STORY_LINK_CLICK_EVENT = 'mark-click';\nexport const ADD_BOUNDING_BOX_EVENT = 'add-bounding-box';\nexport const ADD_FEATURE_MARK_EVENT = 'add-feature-mark';\nexport const TRACK_FILE_UPLOAD_EVENT = 'track-file-upload';\n\nfunction toCamelCase(str) {\n  return str\n    .split('-')\n    .map((item, idx) => idx > 0 ? item.slice(0,1).toUpperCase() + item.slice(1) : item)\n    .join('');\n}\n","// https://gist.github.com/rhythnic/6521495650a215ccab8bf7120949fb7d?source=post_page\nconst last = xs => xs[xs.length - 1];\n\nexport const toggle = key => (state) => { state[key] = !state[key]; };\n\nexport const set = key => (state, val) => { state[key] = val; };\n\nexport const getPath = (obj, path) => {\n    return path.reduce((acc, key) =>\n        (acc && acc[key] !== 'undefined') ? acc[key] : undefined, obj);\n}\n\nexport const setPath = path => (state, val) => {\n  const obj = path.slice(0, -1).reduce((acc, x, i) => {\n    if (!(x in acc)) {\n      acc[x] = typeof path[i + 1] === 'number' ? [] : {};\n    }\n    return acc[x];\n  }, state);\n  obj[last(path)] = val;\n};\n","import Vue from 'vue';\nimport Vuex from 'vuex';\nimport axios from 'axios';\nimport chunk from 'lodash.chunk';\nimport mapDeep from 'deepdash-es/mapDeep';\nimport pickDeep from 'deepdash-es/pickDeep';\n\nimport { STORY_LINK_BBOX_ATTR, STORY_LINK_LAT_ATTR, STORY_LINK_LNG_ATTR } from '@/config/config';\nimport {\n  REMOVE_ERROR,\n  UPDATE_BBOX_BEING_ADDED,\n  UPDATE_EDITABLE,\n  UPDATE_ERRORS,\n  UPDATE_FEATURE_BEING_ADDED,\n  UPDATE_HIGHLIGHTED_BBOX,\n  UPDATE_HIGHLIGHTED_LAT_LNG,\n  UPDATE_LOADING,\n  UPDATE_MAP_CENTER,\n  UPDATE_SHOULD_TEXT_SCROLL,\n  UPDATE_STORY,\n  UPDATE_STORY_NAME,\n  UPDATE_STORY_TEXT,\n  UPDATE_STORY_URL,\n  UPDATE_TRACK,\n} from '@/store/mutations';\nimport { set, setPath } from './store.helpers';\n\nVue.use(Vuex);\n\nconst state = {\n  editable: false,\n  errors: [],\n  bboxBeingAdded: {\n    active: false,\n    bounds: undefined,\n  },\n  featureBeingAdded: {\n    active: false,\n    position: undefined,\n  },\n  loading: false,\n  storyUrl: undefined,\n  story: {\n    name: undefined,\n    text: undefined,\n    track: undefined,\n  },\n  availableStories: [],\n  highlightedBbox: undefined,\n  highlightedLatLng: undefined,\n  shouldTextScroll: undefined,\n};\n\nexport const mutations = {\n  /* eslint-disable-next-line no-shadow */\n  [REMOVE_ERROR](state, error) {\n    const idx = state.errors.findIndex(e => e.title === error.title && e.message === error.message);\n    if (idx > -1) {\n      state.errors.splice(idx, 1);\n    }\n  },\n  [UPDATE_BBOX_BEING_ADDED]: set('bboxBeingAdded'),\n  [UPDATE_FEATURE_BEING_ADDED]: set('featureBeingAdded'),\n  [UPDATE_EDITABLE]: set('editable'),\n  /* eslint-disable-next-line no-shadow */\n  [UPDATE_ERRORS](state, newErorr) {\n    state.errors = [...state.errors, newErorr];\n  },\n  /* eslint-disable-next-line no-shadow */\n  [UPDATE_HIGHLIGHTED_BBOX](state, bbox) {\n    state.highlightedBbox = [\n      {\n        lat: bbox[0][0],\n        lng: bbox[0][1],\n      },\n      {\n        lat: bbox[1][0],\n        lng: bbox[1][1],\n      },\n    ];\n  },\n  /* eslint-disable-next-line no-shadow */\n  [UPDATE_HIGHLIGHTED_LAT_LNG](state, latLng) {\n    if (!latLng) {\n      state.highlightedLatLng = undefined;\n    } else {\n      state.highlightedLatLng = {\n        lat: Number.parseFloat(latLng[STORY_LINK_LAT_ATTR]),\n        lng: Number.parseFloat(latLng[STORY_LINK_LNG_ATTR]),\n      };\n    }\n  },\n  [UPDATE_LOADING]: set('loading'),\n  [UPDATE_MAP_CENTER]: setPath(['map', 'center']),\n  [UPDATE_SHOULD_TEXT_SCROLL]: set('shouldTextScroll'),\n  [UPDATE_STORY]: set('story'),\n  [UPDATE_STORY_NAME]: setPath(['story', 'name']),\n  [UPDATE_STORY_TEXT]: setPath(['story', 'text']),\n  [UPDATE_STORY_URL]: set('storyUrl'),\n  [UPDATE_TRACK]: setPath(['story', 'track']),\n};\n\nconst actions = {\n  updateTrack({ commit }, payload) {\n    commit(UPDATE_TRACK, payload);\n  },\n  updateStoryText({ commit }, payload) {\n    commit(UPDATE_STORY_TEXT, payload);\n  },\n  /* eslint-disable-next-line no-shadow */\n  async loadStory({ commit, state }) {\n    commit(UPDATE_LOADING, true);\n    const result = await axios.get(state.storyUrl);\n    commit(UPDATE_STORY, result.data);\n  },\n};\n\nexport const getters = {\n  /* eslint-disable-next-line no-shadow */\n  content: (state) => {\n    let content;\n\n    if (state.story.text && state.story.text.state) { // editing\n      ({ content } = state.story.text.state.doc);\n    } else { // readonly\n      content = state.story.text && state.story.text.content;\n    }\n\n    return content && JSON.parse(JSON.stringify(content));\n  },\n\n  /* eslint-disable-next-line no-shadow */\n  bboxes: (state, getters) => {\n    let result = [];\n    const data = getters.content;\n\n    if (data) {\n      const bboxes = pickDeep(data, STORY_LINK_BBOX_ATTR);\n      result = mapDeep(bboxes, v => v, { leavesOnly: true })\n        .filter(item => item !== null)\n        .map(item => JSON.parse(item))\n        .map((item, id) => ({\n          id,\n          bounds: [\n            [item[0][0], item[0][1]],\n            [item[1][0], item[1][1]],\n          ],\n        }));\n    }\n\n    return result;\n  },\n\n  /* eslint-disable-next-line no-shadow */\n  features: (state, getters) => {\n    let result = [];\n    const data = getters.content;\n\n    if (data) {\n      const features = mapDeep(pickDeep(data, [STORY_LINK_LAT_ATTR, STORY_LINK_LNG_ATTR]), v => v, {\n        leavesOnly: true,\n      }).filter(item => item !== null);\n      result = chunk(features, 2).map(item => ({ lat: item[0], lng: item[1] }));\n    }\n\n    return result;\n  },\n\n  /* eslint-disable-next-line no-shadow */\n  featuresWithoutHighlighted: (state, getters) => {\n    if (!state.highlightedLatLng) {\n      return getters.features;\n    }\n\n    const { lat, lng } = state.highlightedLatLng;\n    return getters.features.filter(feature => feature.lat !== lat && feature.lng !== lng);\n  },\n};\n\nexport default new Vuex.Store({\n  strict: true,\n  getters,\n  state,\n  mutations,\n  actions,\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"hero is-fullheight\"},[_c('div',{staticClass:\"hero-body\"},[_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column is-6 is-offset-3\"},[_vm._m(0),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column is-6 section-left has-pb-0\"},[_c('h2',{staticClass:\"title is-2 has-text-weight-normal has-text-centered has-mb-2\"},[_vm._v(\"Napsat příběh\")]),_c('p',[_vm._v(\"Chcete napsat svůj vlastní příběh? Z prázdnin, dovolené nebo jen zajímavého sobotního\\n                výletu?\")]),_c('b-button',{on:{\"click\":function($event){return _vm.$router.push('/story/create')}}},[_vm._v(\"Chci psát\")])],1),_c('div',{staticClass:\"column is-6 section-right has-pb-0\"},[_c('h2',{staticClass:\"title is-2 has-text-weight-normal has-text-centered has-mb-2\"},[_vm._v(\"Číst příběh\")]),_c('p',[_vm._v(\"Váš kamarád nebo příbuzný napsal příběh a poslal vám jeho adresu? Můžete si ho přečíst.\")]),_c('b-button',{on:{\"click\":function($event){return _vm.$router.push('/story/load')}}},[_vm._v(\"Chci číst\")])],1)])])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('h1',{staticClass:\"title is-1 has-text-weight-normal has-text-centered has-mb-1\"},[_vm._v(\"Cartostory\")])])])}]\n\nexport { render, staticRenderFns }","<script>\nexport default {\n  name: 'Landing',\n};\n</script>\n\n<template>\n<section class=\"hero is-fullheight\">\n  <div class=\"hero-body\">\n    <div class=\"container\">\n      <div class=\"columns\">\n        <div class=\"column is-6 is-offset-3\">\n\n          <div class=\"columns\">\n            <div class=\"column\">\n              <h1 class=\"title is-1 has-text-weight-normal has-text-centered has-mb-1\">Cartostory</h1>\n            </div>\n          </div>\n\n          <div class=\"columns\">\n\n            <div class=\"column is-6 section-left has-pb-0\">\n              <h2 class=\"title is-2 has-text-weight-normal has-text-centered has-mb-2\">Napsat příběh</h2>\n              <p>Chcete napsat svůj vlastní příběh? Z&nbsp;prázdnin, dovolené nebo jen zajímavého sobotního\n                výletu?</p>\n              <b-button @click=\"$router.push('/story/create')\">Chci psát</b-button>\n            </div>\n\n            <div class=\"column is-6 section-right has-pb-0\">\n              <h2 class=\"title is-2 has-text-weight-normal has-text-centered has-mb-2\">Číst příběh</h2>\n              <p>Váš kamarád nebo příbuzný napsal příběh a poslal vám jeho adresu? Můžete si ho přečíst.</p>\n              <b-button @click=\"$router.push('/story/load')\">Chci číst</b-button>\n            </div>\n\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</section>\n\n</template>\n\n<style lang=\"scss\" scoped>\np {\n  flex: 1;\n  margin-bottom: 1rem;\n}\n\n.section-left,\n.section-right {\n  display: flex;\n  flex-direction: column;\n  flex-wrap: wrap;\n  justify-content: center;\n}\n\n.section-left {\n  border-right: 1px solid #F56C6C;\n  padding-right: 1rem;\n}\n\n.section-right {\n  padding-left: 1rem;\n}\n\n.section-right p {\n  flex: 1 0 auto;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Landing.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Landing.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Landing.vue?vue&type=template&id=40225d4e&scoped=true&\"\nimport script from \"./Landing.vue?vue&type=script&lang=js&\"\nexport * from \"./Landing.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Landing.vue?vue&type=style&index=0&id=40225d4e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"40225d4e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container-fluid story-form\"},[_c('div',{staticClass:\"columns has-margin-0\",staticStyle:{\"height\":\"100vh\"}},[_c('cs-map'),_c('div',{staticStyle:{\"display\":\"flex\",\"flex-direction\":\"column\",\"width\":\"100%\"}},[(_vm.$store.state.story.text || _vm.ready)?_c('cs-editor'):_vm._e()],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"column is-12 has-padding-0 story-text\"},[_c('div',{staticClass:\"story-text__content\"},[(_vm.editable)?_c('form',{staticClass:\"has-mt-1\"},[_c('b-field',[_c('b-input',{attrs:{\"custom-class\":\"story-title-input\",\"placeholder\":\"Název příběhu\",\"size\":\"is-large\"},model:{value:(_vm.storyName),callback:function ($$v) {_vm.storyName=$$v},expression:\"storyName\"}})],1)],1):_vm._e(),(!_vm.editable)?_c('h1',{staticClass:\"story-title-input has-mt-1\"},[_vm._v(_vm._s(_vm.storyName))]):_vm._e(),(_vm.editable)?_c('menu-bar',{attrs:{\"editor\":_vm.editor}}):_vm._e(),(_vm.editable)?_c('menu-bubble',{attrs:{\"editor\":_vm.editor}}):_vm._e(),_c('editor-content',{staticClass:\"editor\",class:{'editable': this.editable},staticStyle:{\"flex\":\"1\",\"overflow\":\"auto\"},attrs:{\"editor\":_vm.editor}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/* eslint class-methods-use-this: 0 */\nimport { Mark } from 'tiptap';\nimport { toggleMark } from 'tiptap-commands';\n\nimport { STORY_LINK_BBOX_ATTR, STORY_LINK_BBOX_ATTR_CAMEL } from '@/config/config';\nimport { UPDATE_HIGHLIGHTED_BBOX } from '@/store/mutations';\n\nconst TAG = 'a';\n\nexport default class BboxMark extends Mark {\n  get name() {\n    return 'bboxMark';\n  }\n\n  get schema() {\n    return {\n      attrs: {\n        [STORY_LINK_BBOX_ATTR]: {\n          default: null,\n        },\n      },\n      parseDOM: [{\n        tag: TAG,\n        getAttrs(dom) {\n          return {\n            [STORY_LINK_BBOX_ATTR]: dom.dataset[STORY_LINK_BBOX_ATTR],\n          };\n        },\n      }],\n      toDOM: node => [TAG, {\n        [STORY_LINK_BBOX_ATTR]: node.attrs[STORY_LINK_BBOX_ATTR],\n      }, 0],\n    };\n  }\n\n  commands({ type }) {\n    return (attrs) => {\n      const bounds = attrs && [[attrs[0][0], attrs[0][1]], [attrs[1][0], attrs[1][1]]];\n      return toggleMark(type, {\n        [STORY_LINK_BBOX_ATTR]: JSON.stringify(bounds),\n      });\n    };\n  }\n\n  get view() {\n    return {\n      // there are some props available\n      // `node` is a Prosemirror Node Object\n      // `updateAttrs` is a function to update attributes defined in `schema`\n      // `view` is the ProseMirror view instance\n      // `options` is an array of your extension options\n      // `selected` is a boolean which is true when selected\n      // `editor` is a reference to the TipTap editor instance\n      // `getPos` is a function to retrieve the start position of the node\n      // `decorations` is an array of decorations around the node\n      props: ['node', 'updateAttrs', 'view'],\n      methods: {\n        handleClick() {\n          const payload = JSON.parse(this[STORY_LINK_BBOX_ATTR_CAMEL]);\n          this.$store.commit(UPDATE_HIGHLIGHTED_BBOX, payload);\n        },\n      },\n      computed: {\n        isHighlighted() {\n          if (!this.$store.state.highlightedBbox) {\n            return false;\n          }\n          const { lat, lng } = this.$store.state.highlightedBbox;\n          return true;\n        },\n        [STORY_LINK_BBOX_ATTR_CAMEL]: {\n          get() {\n            return this.node.attrs[STORY_LINK_BBOX_ATTR];\n          },\n          set(bbox) {\n            this.updateAttrs({\n              [STORY_LINK_BBOX_ATTR]: bbox,\n            });\n          },\n        },\n      },\n      template: `\n        <a\n          :class=\"{'is-highlighted': isHighlighted}\"\n          :${STORY_LINK_BBOX_ATTR}=\"${STORY_LINK_BBOX_ATTR_CAMEL}\"\n          @click=\"handleClick()\"\n        >\n        </a>\n      `,\n    };\n  }\n}\n","/* eslint class-methods-use-this: 0 */\nimport { Mark } from 'tiptap';\nimport { toggleMark } from 'tiptap-commands';\n\nimport {\n  STORY_LINK_LAT_ATTR,\n  STORY_LINK_LAT_ATTR_CAMEL,\n  STORY_LINK_LNG_ATTR,\n  STORY_LINK_LNG_ATTR_CAMEL,\n} from '@/config/config';\nimport { UPDATE_HIGHLIGHTED_LAT_LNG, UPDATE_SHOULD_TEXT_SCROLL } from '@/store/mutations';\n\nconst TAG = 'a';\n\nexport default class FeatureMark extends Mark {\n  get name() {\n    return 'featureMark';\n  }\n\n  get schema() {\n    return {\n      attrs: {\n        [STORY_LINK_LAT_ATTR]: {\n          default: null,\n        },\n        [STORY_LINK_LNG_ATTR]: {\n          default: null,\n        },\n      },\n      parseDOM: [{\n        tag: TAG,\n        getAttrs(dom) {\n          return {\n            [STORY_LINK_LAT_ATTR]: dom.dataset[STORY_LINK_LAT_ATTR],\n            [STORY_LINK_LNG_ATTR]: dom.dataset[STORY_LINK_LNG_ATTR],\n          };\n        },\n      }],\n      toDOM: node => [TAG, {\n        [STORY_LINK_LAT_ATTR]: node.attrs[STORY_LINK_LAT_ATTR],\n        [STORY_LINK_LNG_ATTR]: node.attrs[STORY_LINK_LNG_ATTR],\n      }, 0],\n    };\n  }\n\n  commands({ type }) {\n    return (attrs) => {\n      return toggleMark(type, {\n        [STORY_LINK_LAT_ATTR]: attrs && attrs[STORY_LINK_LAT_ATTR],\n        [STORY_LINK_LNG_ATTR]: attrs && attrs[STORY_LINK_LNG_ATTR],\n      });\n    };\n  }\n\n  get view() {\n    return {\n      // there are some props available\n      // `node` is a Prosemirror Node Object\n      // `updateAttrs` is a function to update attributes defined in `schema`\n      // `view` is the ProseMirror view instance\n      // `options` is an array of your extension options\n      // `selected` is a boolean which is true when selected\n      // `editor` is a reference to the TipTap editor instance\n      // `getPos` is a function to retrieve the start position of the node\n      // `decorations` is an array of decorations around the node\n      props: ['node', 'updateAttrs', 'view'],\n      methods: {\n        handleClick() {\n          const payload = {\n            [STORY_LINK_LAT_ATTR]: this[STORY_LINK_LAT_ATTR_CAMEL],\n            [STORY_LINK_LNG_ATTR]: this[STORY_LINK_LNG_ATTR_CAMEL],\n          };\n          this.$store.commit(UPDATE_SHOULD_TEXT_SCROLL, false);\n          this.$store.commit(UPDATE_HIGHLIGHTED_LAT_LNG, payload);\n        },\n      },\n      computed: {\n        isHighlighted() {\n          if (!this.$store.state.highlightedLatLng) {\n            return false;\n          }\n\n          const { lat, lng } = this.$store.state.highlightedLatLng;\n          return lat === this[STORY_LINK_LAT_ATTR_CAMEL] && lng === this[STORY_LINK_LNG_ATTR_CAMEL];\n        },\n        [STORY_LINK_LAT_ATTR_CAMEL]: {\n          get() {\n            return this.node.attrs[STORY_LINK_LAT_ATTR];\n          },\n          set(lat) {\n            this.updateAttrs({\n              [STORY_LINK_LAT_ATTR]: lat,\n            });\n          },\n        },\n        [STORY_LINK_LNG_ATTR_CAMEL]: {\n          get() {\n            return this.node.attrs[STORY_LINK_LNG_ATTR];\n          },\n          set(lng) {\n            this.updateAttrs({\n              [STORY_LINK_LNG_ATTR]: lng,\n            });\n          },\n        },\n      },\n      template: `\n        <a\n          :${STORY_LINK_LNG_ATTR}=\"${STORY_LINK_LNG_ATTR_CAMEL}\"\n          :${STORY_LINK_LAT_ATTR}=\"${STORY_LINK_LAT_ATTR_CAMEL}\"\n          @click=\"handleClick()\"\n        >\n        </a>\n      `,\n    };\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('editor-menu-bar',{staticClass:\"has-mt-1\",staticStyle:{\"background\":\"white\"},attrs:{\"editor\":_vm.editor},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar commands = ref.commands;\nvar isActive = ref.isActive;\nreturn [_c('div',{staticClass:\"editor-menu-bar buttons\"},[_c('b-button',{staticClass:\"menubar__button\",class:{ 'is-active': isActive.heading({ level: 2 }) },attrs:{\"title\":\"Nadpis 1. úrovně\",\"size\":\"is-small\"},on:{\"click\":function($event){return commands.heading({ level: 2 })}}},[_vm._v(\"\\n      H1\\n    \")]),_c('b-button',{staticClass:\"menubar__button\",class:{ 'is-active': isActive.heading({ level: 3 }) },attrs:{\"title\":\"Nadpis 2. úrovně\",\"size\":\"is-small\"},on:{\"click\":function($event){return commands.heading({ level: 3 })}}},[_vm._v(\"\\n      H2\\n    \")]),_c('b-button',{staticClass:\"menubar__button\",class:{ 'is-active': isActive.heading({ level: 4 }) },attrs:{\"title\":\"Nadpis 3. úrovně\",\"size\":\"is-small\"},on:{\"click\":function($event){return commands.heading({ level: 4 })}}},[_vm._v(\"\\n      H3\\n    \")]),_c('b-button',{staticClass:\"menubar__button\",class:{ 'is-active': isActive.image() },attrs:{\"title\":\"Obrázek\",\"size\":\"is-small\"},on:{\"click\":function($event){return _vm.showImagePrompt(commands.image)}}},[_c('b-icon',{attrs:{\"size\":\"is-small\",\"icon\":\"image-filter-hdr\",\"custom-class\":\"image-icon\"}})],1),_c('b-button',{staticClass:\"menubar__button\",staticStyle:{\"margin-left\":\"auto\"},attrs:{\"disabled\":_vm.isDisabled,\"title\":_vm.isDisabled ? 'Příběh zatím nelze uložit. Nahrajte prosím trasu, příběh pojmenujte a přidejte popis.' : 'Uložit příběh',\"size\":\"is-small\",\"type\":\"is-primary\"},on:{\"click\":_vm.handleSave}},[_vm._v(\"Uložit\\n    \")])],1)]}}])})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"section\"},[_c('div',{staticClass:\"container\"},[_vm._m(0),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.content),expression:\"content\"}],staticClass:\"has-padding-1\",domProps:{\"value\":(_vm.content)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.content=$event.target.value}}})])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"columns has-mb-0\"},[_c('div',{staticClass:\"column has-pb-0\"},[_c('div',{staticClass:\"notification\"},[_c('h1',{staticClass:\"title is-1 has-text-centered\"},[_vm._v(\"Uložení příběhu\")]),_c('p',[_vm._v(\"Zatím to jinak neumíme, proto si prosím celý příběh zkopírujte a uložte někam, odkud\\n            ho budete moct později načíst (např. na \"),_c('a',{attrs:{\"href\":\"https://github.com\"}},[_vm._v(\"GitHub\")]),_vm._v(\").\")])])])])}]\n\nexport { render, staticRenderFns }","<script>\nexport default {\n  name: 'StoryJson',\n  props: {\n    content: {\n      required: true,\n      type: String,\n    },\n  },\n};\n</script>\n\n<template>\n  <div class=\"section\">\n    <div class=\"container\">\n      <div class=\"columns has-mb-0\">\n        <div class=\"column has-pb-0\">\n          <div class=\"notification\">\n            <h1 class=\"title is-1 has-text-centered\">Uložení příběhu</h1>\n            <p>Zatím to jinak neumíme, proto si prosím celý příběh zkopírujte a uložte někam, odkud\n              ho budete moct později načíst (např. na <a href=\"https://github.com\">GitHub</a>).</p>\n          </div>\n        </div>\n      </div>\n      <textarea class=\"has-padding-1\" v-model=\"content\"></textarea>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.container {\n  background-color: white;\n  height: 80vh;\n  overflow: hidden;\n}\n\ntextarea {\n  height: 80%;\n  overflow: auto;\n  width: 100%;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StoryJson.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StoryJson.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StoryJson.vue?vue&type=template&id=4193dade&scoped=true&\"\nimport script from \"./StoryJson.vue?vue&type=script&lang=js&\"\nexport * from \"./StoryJson.vue?vue&type=script&lang=js&\"\nimport style0 from \"./StoryJson.vue?vue&type=style&index=0&id=4193dade&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4193dade\",\n  null\n  \n)\n\nexport default component.exports","<script>\nimport { EditorMenuBar } from 'tiptap';\nimport { mapState } from 'vuex';\n\nimport StoryJson from '@/components/StoryJson.vue';\n\nexport default {\n  name: 'MenuBar',\n  components: {\n    EditorMenuBar,\n  },\n  props: ['editor'],\n  computed: {\n    ...mapState({\n      name: state => state.story.name,\n      text: state => state.story.text,\n      track: state => state.story.track,\n    }),\n    isDisabled() {\n      return !(this.name && this.text && this.track);\n    },\n  },\n  methods: {\n    /*\n     * Lets user paste image url and inserts the image into the story.\n     * @param {Function} tiptap image command\n     */\n    showImagePrompt(command) {\n      // eslint-disable-next-line no-alert\n      const src = prompt('Enter the url of your image here');\n      if (src) {\n        command({ src });\n      }\n    },\n\n    handleSave() {\n      const result = {\n        name: this.name,\n        text: this.text.getJSON(),\n        track: this.track,\n      };\n      const string = JSON.stringify(result);\n      this.$buefy.modal.open({\n        component: StoryJson,\n        parent: this,\n        customClass: 'modal-result',\n        props: {\n          content: string,\n        },\n      });\n    },\n  },\n};\n</script>\n\n<template>\n  <editor-menu-bar\n    class=\"has-mt-1\"\n    style=\"background: white;\"\n    :editor=\"editor\"\n    v-slot=\"{ commands, isActive }\">\n    <div class=\"editor-menu-bar buttons\">\n      <b-button\n        title=\"Nadpis 1. úrovně\"\n        size=\"is-small\"\n        class=\"menubar__button\"\n        :class=\"{ 'is-active': isActive.heading({ level: 2 }) }\"\n        @click=\"commands.heading({ level: 2 })\">\n        H1\n      </b-button>\n\n      <b-button\n        title=\"Nadpis 2. úrovně\"\n        size=\"is-small\"\n        class=\"menubar__button\"\n        :class=\"{ 'is-active': isActive.heading({ level: 3 }) }\"\n        @click=\"commands.heading({ level: 3 })\">\n        H2\n      </b-button>\n\n      <b-button\n        title=\"Nadpis 3. úrovně\"\n        size=\"is-small\"\n        class=\"menubar__button\"\n        :class=\"{ 'is-active': isActive.heading({ level: 4 }) }\"\n        @click=\"commands.heading({ level: 4 })\">\n        H3\n      </b-button>\n\n      <b-button\n        title=\"Obrázek\"\n        size=\"is-small\"\n        class=\"menubar__button\"\n        :class=\"{ 'is-active': isActive.image() }\"\n        @click=\"showImagePrompt(commands.image)\">\n        <b-icon size=\"is-small\" icon=\"image-filter-hdr\" custom-class=\"image-icon\"></b-icon>\n      </b-button>\n\n      <b-button\n        :disabled=\"isDisabled\"\n        style=\"margin-left: auto;\"\n        :title=\"isDisabled ? 'Příběh zatím nelze uložit. Nahrajte prosím trasu, příběh pojmenujte a přidejte popis.' : 'Uložit příběh'\"\n        size=\"is-small\"\n        class=\"menubar__button\"\n        type=\"is-primary\"\n        @click=\"handleSave\">Uložit\n      </b-button>\n    </div>\n  </editor-menu-bar>\n</template>\n\n<style lang=\"scss\" scoped>\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MenuBar.vue?vue&type=template&id=51c35ece&scoped=true&\"\nimport script from \"./MenuBar.vue?vue&type=script&lang=js&\"\nexport * from \"./MenuBar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"51c35ece\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('editor-menu-bubble',{attrs:{\"editor\":_vm.editor,\"keep-in-bounds\":true},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar commands = ref.commands;\nvar getMarkAttrs = ref.getMarkAttrs;\nvar isActive = ref.isActive;\nvar menu = ref.menu;\nreturn [_c('div',{staticClass:\"menububble\",class:{ 'is-active': menu.isActive },style:((\"left: \" + (menu.left) + \"px; bottom: \" + (menu.bottom) + \"px;\"))},[(!_vm.isNewFeatureMarkButtonVisible(getMarkAttrs('featureMark')))?_c('b-button',{staticClass:\"menububble__button menububble__button__mark\",class:{ 'is-active': isActive.featureMark() },attrs:{\"icon-left\":\"map-marker-plus\"},on:{\"click\":function($event){return _vm.handleAddFeatureMarkClick(commands.featureMark)}}}):_vm._e(),(_vm.isNewFeatureMarkButtonVisible(getMarkAttrs('featureMark')))?_c('b-button',{staticClass:\"menububble__button\",class:{ 'is-active': isActive.featureMark() },attrs:{\"icon-left\":\"map-marker-minus\"},on:{\"click\":function($event){return _vm.handleRemoveFeatureMarkClick(commands.featureMark)}}}):_vm._e(),(!_vm.isNewBboxMarkVisible(getMarkAttrs('bboxMark')))?_c('b-button',{staticClass:\"menububble__button menububble__button__bbox\",class:{ 'is-active': isActive.bboxMark() },attrs:{\"icon-left\":\"fullscreen\"},on:{\"click\":function($event){return _vm.handleAddBoundingBoxClick(commands.bboxMark)}}}):_vm._e(),(_vm.isNewBboxMarkVisible(getMarkAttrs('bboxMark')))?_c('b-button',{staticClass:\"menububble__button menububble__button__bbox\",class:{ 'is-active': isActive.bboxMark() },attrs:{\"icon-left\":\"fullscreen-exit\"},on:{\"click\":function($event){return commands.bboxMark()}}}):_vm._e()],1)]}}])})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport { EditorMenuBubble } from 'tiptap';\nimport { mapState } from 'vuex';\n\nimport { ADD_BOUNDING_BOX_EVENT, STORY_LINK_BBOX_ATTR, STORY_LINK_LAT_ATTR } from '@/config/config';\nimport { UPDATE_BBOX_BEING_ADDED, UPDATE_FEATURE_BEING_ADDED, UPDATE_HIGHLIGHTED_LAT_LNG } from '@/store/mutations';\n\nexport default {\n  data() {\n    return {\n      bboxAddedCallback: undefined,\n      featureMarkAddedCallback: undefined,\n    };\n  },\n  name: 'MenuBubble',\n  props: ['editor'],\n  components: {\n    EditorMenuBubble,\n  },\n  computed: {\n    ...mapState({\n      bboxBeingAdded: state => state.bboxBeingAdded,\n      featureBeingAdded: state => state.featureBeingAdded,\n    }),\n  },\n  watch: {\n    bboxBeingAdded(bbox) {\n      if (bbox && bbox.active && bbox.bounds && this.bboxAddedCallback) {\n        this.bboxAddedCallback(bbox.bounds);\n        this.bboxAddedCallback = undefined;\n        this.$store.commit(UPDATE_BBOX_BEING_ADDED, { active: false, position: undefined });\n      }\n    },\n    featureBeingAdded(feature) {\n      if (feature && feature.active && feature.position && this.featureMarkAddedCallback) {\n        this.featureMarkAddedCallback(feature.position);\n        this.featureMarkAddedCallback = undefined;\n        this.$store.commit(UPDATE_FEATURE_BEING_ADDED, { active: false, position: undefined });\n      }\n    },\n  },\n  methods: {\n    /*\n     * Checks if selected text already has the feature mark on the map.\n     * It renders remove button if true or add button otherwise.\n     * @param {object} selected text attributes\n     * @returns {boolean}\n     */\n    isNewFeatureMarkButtonVisible(attrs) {\n      return attrs && attrs[STORY_LINK_LAT_ATTR];\n    },\n\n    isNewBboxMarkVisible(attrs) {\n      return attrs && attrs[STORY_LINK_BBOX_ATTR];\n    },\n\n    handleAddFeatureMarkClick(fn) {\n      this.featureMarkAddedCallback = fn;\n      this.$store.commit(UPDATE_FEATURE_BEING_ADDED, { active: true, position: undefined });\n    },\n\n    handleRemoveFeatureMarkClick(fn) {\n      this.$store.commit(UPDATE_HIGHLIGHTED_LAT_LNG, undefined);\n      fn();\n    },\n\n    handleAddBoundingBoxClick(fn) {\n      this.bboxAddedCallback = fn;\n      this.$store.commit(UPDATE_BBOX_BEING_ADDED, { active: true, bounds: undefined });\n    },\n  },\n};\n</script>\n\n<template>\n  <editor-menu-bubble :editor=\"editor\" :keep-in-bounds=\"true\" v-slot=\"{ commands, getMarkAttrs, isActive, menu }\">\n    <div\n      class=\"menububble\"\n      :class=\"{ 'is-active': menu.isActive }\"\n      :style=\"`left: ${menu.left}px; bottom: ${menu.bottom}px;`\">\n\n      <b-button\n        v-if=\"!isNewFeatureMarkButtonVisible(getMarkAttrs('featureMark'))\"\n        class=\"menububble__button menububble__button__mark\"\n        :class=\"{ 'is-active': isActive.featureMark() }\"\n        @click=\"handleAddFeatureMarkClick(commands.featureMark)\"\n        icon-left=\"map-marker-plus\"></b-button>\n\n      <b-button\n        v-if=\"isNewFeatureMarkButtonVisible(getMarkAttrs('featureMark'))\"\n        class=\"menububble__button\"\n        :class=\"{ 'is-active': isActive.featureMark() }\"\n        @click=\"handleRemoveFeatureMarkClick(commands.featureMark)\"\n        icon-left=\"map-marker-minus\"></b-button>\n\n      <b-button\n        v-if=\"!isNewBboxMarkVisible(getMarkAttrs('bboxMark'))\"\n        class=\"menububble__button menububble__button__bbox\"\n        :class=\"{ 'is-active': isActive.bboxMark() }\"\n        @click=\"handleAddBoundingBoxClick(commands.bboxMark)\"\n        icon-left=\"fullscreen\"></b-button>\n\n      <b-button\n        v-if=\"isNewBboxMarkVisible(getMarkAttrs('bboxMark'))\"\n        class=\"menububble__button menububble__button__bbox\"\n        :class=\"{ 'is-active': isActive.bboxMark() }\"\n        @click=\"commands.bboxMark()\"\n        icon-left=\"fullscreen-exit\">\n      </b-button>\n    </div>\n  </editor-menu-bubble>\n</template>\n\n<style lang=\"scss\" scoped>\n@import \"../../assets/scss/variables.scss\";\n\n.menububble {\n  position: absolute;\n  display: flex;\n  z-index: 20;\n  background: $primary;\n  border-radius: 5px;\n  padding: 0.3rem;\n  margin-bottom: 0.5rem;\n  transform: translateX(-50%);\n  visibility: hidden;\n  opacity: 0;\n  transition: opacity 0.2s, visibility 0.2s;\n\n  &.is-active {\n    opacity: 1;\n    visibility: visible;\n  }\n\n  &__button {\n    display: inline-flex;\n    background-color: transparent;\n    border: 0;\n    color: white !important;\n    border-radius: 3px;\n    cursor: pointer;\n\n    &:hover,\n    &:focus,\n    &.is-active {\n      background-color: rgba(255, 255, 255, 0.2) !important;\n    }\n\n    &__mark:focus::after,\n    &__bbox:focus::after {\n      font-size: 8px;\n      line-height: 14px;\n      padding-left: 7px;\n    }\n\n    &__mark:focus::after {\n      content: 'Klikněte do mapy';\n    }\n\n    &__bbox:focus::after {\n      content: 'Táhnutím v mapě označte oblast';\n    }\n\n    &:last-child {\n      margin-right: 0;\n    }\n  }\n\n  &__form {\n    display: flex;\n    align-items: center;\n  }\n\n  &__input {\n    font: inherit;\n    border: none;\n    background: transparent;\n    color: white;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuBubble.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuBubble.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MenuBubble.vue?vue&type=template&id=1c7012b5&scoped=true&\"\nimport script from \"./MenuBubble.vue?vue&type=script&lang=js&\"\nexport * from \"./MenuBubble.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MenuBubble.vue?vue&type=style&index=0&id=1c7012b5&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1c7012b5\",\n  null\n  \n)\n\nexport default component.exports","<script>\nimport { Editor, EditorContent } from 'tiptap';\nimport { Heading, Image } from 'tiptap-extensions';\nimport { mapState } from 'vuex';\n\nimport BboxMark from '@/components/editor/BboxMark';\nimport FeatureMark from '@/components/editor/FeatureMark';\nimport MenuBar from '@/components/editor/MenuBar.vue';\nimport MenuBubble from '@/components/editor/MenuBubble.vue';\nimport { STORY_LINK_LAT_ATTR, STORY_LINK_LNG_ATTR } from '@/config/config';\nimport { UPDATE_STORY_NAME, UPDATE_STORY_TEXT } from '@/store/mutations';\n\nexport default {\n  name: 'CsEditor',\n  components: {\n    EditorContent,\n    MenuBubble,\n    MenuBar,\n  },\n  data() {\n    return {\n      contentPlaceholder: 'Můžete začít psát...',\n      editor: undefined,\n      keepInBounds: true,\n    };\n  },\n  computed: {\n    ...mapState({\n      editable: state => state.editable,\n      highlightedLatLng: state => state.highlightedLatLng,\n      shouldTextScroll: state => state.shouldTextScroll,\n    }),\n    storyName: {\n      get() {\n        return this.$store.state.story.name;\n      },\n      set(value) {\n        this.$store.commit(UPDATE_STORY_NAME, value);\n      },\n    },\n  },\n  watch: {\n    highlightedLatLng() {\n      this.scrollToHighlightedLatLng();\n    },\n  },\n  mounted() {\n    this.editor = this.$createEditor();\n  },\n  methods: {\n    /*\n     * Scrolls to the highlighted feature mark.\n     */\n    scrollToHighlightedLatLng() {\n      if (!this.highlightedLatLng || !this.shouldTextScroll) {\n        return;\n      }\n\n      const { lat, lng } = this.highlightedLatLng;\n      const textMark = document.querySelector(`[${STORY_LINK_LAT_ATTR}='${lat}'], [${STORY_LINK_LNG_ATTR}='${lng}']`);\n\n      this.$scrollTo(textMark, undefined, {\n        container: document.querySelector('.editor'),\n        offset: -50,\n      });\n    },\n\n    $createEditor() {\n      return new Editor({\n        editable: this.editable,\n        extensions: [\n          new BboxMark(),\n          new FeatureMark(),\n          new Heading({\n            levels: [2, 3, 4], // leave <h1> for the story title\n          }),\n          new Image(),\n        ],\n        content: this.$store.state.story.text || this.contentPlaceholder,\n        onUpdate: (payload) => {\n          this.$store.commit(UPDATE_STORY_TEXT, payload);\n        },\n      });\n    },\n  },\n\n  beforeDestroy() {\n    this.editor.destroy();\n  },\n};\n</script>\n\n<template>\n  <div class=\"column is-12 has-padding-0 story-text\">\n    <div class=\"story-text__content\">\n      <form v-if=\"editable\" class=\"has-mt-1\">\n        <b-field>\n          <b-input custom-class=\"story-title-input\" v-model=\"storyName\" placeholder=\"Název příběhu\" size=\"is-large\"></b-input>\n        </b-field>\n      </form>\n      <h1 class=\"story-title-input has-mt-1\" v-if=\"!editable\">{{ storyName }}</h1>\n\n      <menu-bar :editor=\"editor\" v-if=\"editable\" />\n      <menu-bubble :editor=\"editor\" v-if=\"editable\" />\n\n      <editor-content :class=\"{'editable': this.editable}\" style=\"flex: 1; overflow: auto;\" class=\"editor\" :editor=\"editor\" />\n\n    </div>\n\n  </div>\n</template>\n\n<style lang=\"scss\">\n@import \"../assets/scss/variables.scss\";\n@import \"../../node_modules/bulma/bulma.sass\";\n\n.editor {\n  h2, h3, h4 {\n    @extend .title;\n    color: $text;\n  }\n\n  h2 {\n    @extend .is-2;\n    margin-bottom: 1rem;\n    margin-top: 1rem;\n  }\n\n  h3 {\n    @extend .is-3;\n    margin-bottom: .7rem;\n    margin-top: .7rem;\n  }\n\n  h4 {\n    @extend .is-4;\n    margin-bottom: .4rem;\n    margin-top: .4rem;\n  }\n}\n\n.story-text {\n  display: flex;\n  flex: 1 !important;\n  overflow: auto;\n}\n\n.story-text__content {\n  margin-left: 1rem;\n  margin-right: 1rem;\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  overflow: auto;\n}\n\n.story-title-input,\n.story-title-input:active,\n.story-title-input:focus {\n  border: 0;\n  border-radius: 0;\n  border-bottom: 4px dotted $primary;\n  box-shadow: none;\n  color: $text;\n  font-size: 3rem !important;\n  height: 5rem;\n  line-height: 3.5rem;\n  padding-bottom: .5rem;\n  padding-left: 5px;\n}\n\n.editor {\n  padding: 1rem;\n}\n\n.editor.editable {\n  border: 1px solid #d7d7d7;\n  border-radius: 6px;\n  background: #f0eeee;\n  margin-bottom: 1rem;\n}\n\n.ProseMirror {\n  min-height: 100%;\n}\n\n.ProseMirror-focused {\n  outline: none;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsEditor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CsEditor.vue?vue&type=template&id=7e7b13ec&\"\nimport script from \"./CsEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./CsEditor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CsEditor.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"column is-6 has-padding-0\"},[_c('div',{staticClass:\"cs-map\"},[_c('div',{attrs:{\"id\":\"cs-map-container\"}},[_c('l-map',{ref:\"csmap\",attrs:{\"center\":_vm.mapCenter,\"zoom\":_vm.mapOptions.zoom},on:{\"click\":function($event){return _vm.handleMapClick($event.latlng)},\"mousedown\":function($event){return _vm.handleMapMouseDown($event.latlng)}}},[_c('l-control',{staticClass:\"leaflet-bar leaflet-control\",attrs:{\"position\":\"topleft\"}},[(_vm.editable)?_c('cs-track-upload-button',{on:_vm._d({},[_vm.TRACK_FILE_UPLOAD_EVENT,function($event){return _vm.handleFileUpload($event)}])}):_vm._e()],1),_c('l-tile-layer',{attrs:{\"url\":_vm.mapOptions.baseLayer}}),_c('l-tile-layer',{attrs:{\"url\":_vm.mapOptions.hikingOverlay,\"layer-type\":\"overlay\",\"opacity\":0.7}}),_c('l-tile-layer',{attrs:{\"url\":_vm.mapOptions.labelsOverlay,\"layer-type\":\"overlay\"}}),(_vm.track)?_c('l-geo-json',{ref:\"cstrack\",attrs:{\"geojson\":_vm.track,\"options\":_vm.trackOptions.style.plain},on:{\"ready\":function($event){return _vm.handleTrackReady($event)}}}):_vm._e(),_vm._l((_vm.bboxes),function(bbox){return _c('l-rectangle',{key:bbox.id,attrs:{\"bounds\":bbox.bounds,\"l-style\":_vm.bboxOptions.selected.style}})}),_vm._l((_vm.featuresWithoutHighlighted),function(f,index){return _c('l-circle-marker',{key:index,attrs:{\"color\":_vm.markerOptions.style.plain.color,\"fill-color\":_vm.markerOptions.style.plain.color,\"fill-opacity\":_vm.markerOptions.style.plain.fillOpacity,\"latLng\":f,\"radius\":_vm.markerOptions.style.common.radius,\"weight\":_vm.markerOptions.style.common.weight},on:{\"click\":_vm.handleFeatureClick}})}),(_vm.highlightedLatLng)?_c('l-circle-marker',{attrs:{\"color\":_vm.markerOptions.style.highlighted.color,\"fill-color\":_vm.markerOptions.style.highlighted.color,\"fill-opacity\":_vm.markerOptions.style.highlighted.fillOpacity,\"latLng\":_vm.highlightedLatLng,\"radius\":_vm.markerOptions.style.common.radius,\"weight\":_vm.markerOptions.style.common.weight},on:{\"click\":_vm.handleFeatureClick}}):_vm._e()],2)],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export const mapOptions = {\n  bounds: undefined,\n  center: [50, 19],\n  baseLayer: 'https://api.mapbox.com/styles/v1/cartostory/cjugqcypf27581gnry4y59lxy/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoiY2FydG9zdG9yeSIsImEiOiJjanQycXVyZDcxeXZqM3lxeDNvcW81NWJpIn0.hfvoqNSy7dT0yviVhNcDMg',\n  hikingOverlay: 'http://tile.mtbmap.cz/overlay_hiking/{z}/{x}/{y}.png',\n  labelsOverlay: 'https://api.mapbox.com/styles/v1/cartostory/cjugqfe8r1lhh1ftgrmr7v9zj/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoiY2FydG9zdG9yeSIsImEiOiJjanQycXVyZDcxeXZqM3lxeDNvcW81NWJpIn0.hfvoqNSy7dT0yviVhNcDMg',\n  zoom: 8,\n  edgeMarker: undefined,\n};\n\nexport const markerOptions = {\n  style: {\n    common: {\n      radius: 8,\n      weight: 1.5,\n    },\n    highlighted: {\n      color: '#F56C6C',\n      opacity: 1,\n      fillOpacity: 0.4,\n    },\n    inBbox: {\n      color: '#42b983',\n      fillOpacity: 0.5,\n    },\n    plain: {\n      color: '#3185fc',\n      fillOpacity: 0.5,\n    },\n    edge: {\n      icon: {\n        iconUrl: '../../node_modules/leaflet/dist/images/marker-icon.png',\n        iconRetinaUrl: 'marker-icon-2x.png',\n        shadowUrl: 'marker-shadow.png',\n        iconSize: [25, 41],\n        iconAnchor: [12, 41],\n        popupAnchor: [1, -34],\n        tooltipAnchor: [16, -28],\n        shadowSize: [0, 0],\n      },\n    },\n  },\n};\n\nexport const bboxOptions = {\n  plain: {\n    style: {\n      color: '#5a5a66',\n      fillOpacity: 0,\n      dashArray: '5',\n      weight: 2,\n    },\n  },\n  hovered: {\n    style: {\n      color: '#5a5a66',\n      fillColor: '#5a5a66',\n      dashArray: '5',\n      weight: 2,\n    },\n  },\n  selected: {\n    style: {\n      color: '#42b983',\n      fillColor: '#42b983',\n      fillOpacity: 0,\n      dashArray: '5',\n      weight: 2,\n    },\n  },\n};\n\nexport const trackOptions = {\n  style: {\n    plain: {\n      color: '#5a5a66',\n      dashArray: '6',\n    },\n    inBbox: {\n      color: '#42b983',\n      dashArray: '6',\n    },\n  },\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('file-reader',{staticStyle:{\"height\":\"30px\",\"width\":\"30px\",\"line-height\":\"30px\"},attrs:{\"accept\":\".json\",\"output\":\"text\"},on:{\"reader-load\":_vm.handleFileUpload},scopedSlots:_vm._u([{key:\"reader\",fn:function(props){return [_c('b-button',{staticClass:\"file-upload-button\",attrs:{\"title\":\"Nahrát soubor trasy\",\"size\":\"is-small\",\"icon-left\":\"cloud-upload\"},on:{\"click\":function($event){return _vm.$refs.fileReader.click()}}}),_c('input',{ref:\"fileReader\",staticStyle:{\"visibility\":\"hidden\"},attrs:{\"type\":\"file\",\"accept\":props.accept},on:{\"change\":props.onchange}})]}}])})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport FileReader from 'vue-filereader';\n\nimport { TRACK_FILE_UPLOAD_EVENT } from '@/config/config';\nimport { UPDATE_ERRORS } from '@/store/mutations';\n\nexport default {\n  name: 'CsTrackUploadButton',\n  components: {\n    FileReader,\n  },\n  methods: {\n    handleFileUpload(fileObj) {\n      try {\n        this.$emit(TRACK_FILE_UPLOAD_EVENT, fileObj && JSON.parse(fileObj.data));\n      } catch(e) {\n        this.$store.commit(UPDATE_ERRORS, {\n          title: 'Selhalo nahrání trasy',\n          message: 'Trasu se nepodařilo nahrát. Soubor pravděpodobně není validní.',\n        });\n      }\n    },\n  },\n}\n</script>\n\n<template>\n  <file-reader style=\"height: 30px; width: 30px; line-height: 30px;\"\n    accept=\".json\"\n    output=\"text\"\n    @reader-load=\"handleFileUpload\"\n    >\n    <template #reader=\"props\">\n\n    <b-button\n      class=\"file-upload-button\"\n      @click=\"$refs.fileReader.click()\"\n      title=\"Nahrát soubor trasy\"\n      size=\"is-small\"\n      icon-left=\"cloud-upload\"\n      ></b-button>\n\n      <input\n        style=\"visibility: hidden\"\n        ref=\"fileReader\"\n        type=\"file\"\n        :accept=\"props.accept\"\n        @change=\"props.onchange\"\n        />\n    </template>\n  </file-reader>\n</template>\n\n<style lang=\"scss\" scoped>\n.file-upload-button {\n  border-radius: 0;\n  font-size: 16px;\n  height: 30px;\n  line-height: 30px;\n  padding-left: 0px;\n  padding-right: 0px;\n  padding-top: 5px;\n  text-align: center;\n  width: 30px;\n}\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsTrackUploadButton.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsTrackUploadButton.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CsTrackUploadButton.vue?vue&type=template&id=6f11a710&scoped=true&\"\nimport script from \"./CsTrackUploadButton.vue?vue&type=script&lang=js&\"\nexport * from \"./CsTrackUploadButton.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CsTrackUploadButton.vue?vue&type=style&index=0&id=6f11a710&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6f11a710\",\n  null\n  \n)\n\nexport default component.exports","<script>\nimport { LCircleMarker, LControl, LGeoJson, LMap, LTileLayer, LRectangle } from 'vue2-leaflet';\nimport { mapGetters, mapState } from 'vuex';\nimport { STORY_LINK_CLICK_EVENT, STORY_LINK_LAT_ATTR, STORY_LINK_LNG_ATTR, TRACK_FILE_UPLOAD_EVENT } from '@/config/config';\nimport { bboxOptions, markerOptions, mapOptions, trackOptions } from '@/config/map';\nimport { UPDATE_BBOX_BEING_ADDED, UPDATE_FEATURE_BEING_ADDED, UPDATE_HIGHLIGHTED_LAT_LNG, UPDATE_SHOULD_TEXT_SCROLL, UPDATE_TRACK } from '@/store/mutations';\nimport CsTrackUploadButton from '@/components/CsTrackUploadButton.vue';\n\nrequire('../../node_modules/leaflet/dist/leaflet.css');\nrequire('leaflet-draw');\n\nexport default {\n  name: 'CsMap',\n  components: {\n    CsTrackUploadButton,\n    LCircleMarker,\n    LControl,\n    LGeoJson,\n    LMap,\n    LTileLayer,\n    LRectangle,\n  },\n  data() {\n    return {\n      STORY_LINK_CLICK_EVENT,\n      TRACK_FILE_UPLOAD_EVENT,\n      addFeatureMark: undefined,\n      bboxOptions,\n      drawControl: undefined,\n      markerOptions,\n      mapOptions,\n      trackOptions,\n      bboxBounds: [undefined, undefined],\n    };\n  },\n  computed: {\n    mapCenter() {\n      const currentMapCenter = this.$refs.csmap && this.$refs.csmap.mapObject.getCenter();\n      const highlightedFeatureMapCenter = !this.$store.state.shouldTextScroll && this.highlightedLatLng;\n      return highlightedFeatureMapCenter || currentMapCenter;\n    },\n    ...mapState(['bboxBeingAdded', 'editable', 'featureBeingAdded', 'highlightedLatLng']),\n    ...mapState({\n      track: state => state.story.track,\n    }),\n    ...mapGetters([\n      'bboxes',\n      'features',\n      'featuresWithoutHighlighted',\n    ]),\n  },\n  methods: {\n    /*\n     * @param {L.geoJSON}\n     */\n    handleTrackReady(track) {\n      this.$refs.csmap.mapObject.fitBounds(track.getBounds());\n    },\n\n    /*\n     * Sets feature mark that should be highlighted and scrolled to in the text.\n     */\n    handleFeatureClick(event) {\n      const { lat, lng } = event.latlng;\n      const textMark = document.querySelector(`[data-cs-lat='${lat}'], [data-cs-lng='${lng}']`);\n\n      if (!textMark) {\n        return;\n      }\n\n      this.$store.commit(UPDATE_HIGHLIGHTED_LAT_LNG, {\n        [STORY_LINK_LAT_ATTR]: textMark.getAttribute([STORY_LINK_LAT_ATTR]),\n        [STORY_LINK_LNG_ATTR]: textMark.getAttribute([STORY_LINK_LNG_ATTR]),\n      });\n      this.$store.commit(UPDATE_SHOULD_TEXT_SCROLL, true);\n    },\n\n    /*\n     * Links the position to the selected text.\n     * @param {object}\n     */\n    handleMapClick(latLng) {\n      if (!this.featureBeingAdded.active) {\n        return;\n      }\n\n      const position = {\n        [STORY_LINK_LAT_ATTR]: latLng.lat,\n        [STORY_LINK_LNG_ATTR]: latLng.lng,\n      };\n\n      this.$store.commit(UPDATE_FEATURE_BEING_ADDED, { active: true, position });\n    },\n\n    /*\n     * Links the bounding box to the selected text.\n     */\n    handleMapMouseDown() {\n      if (!this.bboxBeingAdded.active) {\n        return;\n      }\n\n      const map = this.$refs.csmap.mapObject;\n      window.L.drawLocal.draw.handlers.rectangle.tooltip.start = '';\n      window.L.drawLocal.draw.handlers.simpleshape.tooltip.end = '';\n      new window.L.Draw.Rectangle(map, {\n        showArea: false,\n        shapeOptions: this.bboxOptions.plain.style,\n      }).enable();\n\n      map.off(window.L.Draw.Event.CREATED);\n      map.on(window.L.Draw.Event.CREATED, this.$handleCreateRectangle);\n    },\n\n    /*\n     * @param {object} geojson data\n     */\n    handleFileUpload(data) {\n      this.$store.commit(UPDATE_TRACK, data);\n    },\n\n    $handleCreateRectangle(event) {\n      const bounds = event.layer.getBounds();\n      const northWest = bounds.getNorthWest();\n      const southEast = bounds.getSouthEast();\n      const bbox = [\n        [northWest.lat, northWest.lng],\n        [southEast.lat, southEast.lng],\n      ];\n\n      this.$store.commit(UPDATE_BBOX_BEING_ADDED, { active: true, bounds: bbox });\n    },\n  },\n};\n</script>\n\n<template>\n  <div class=\"column is-6 has-padding-0\">\n    <div class=\"cs-map\">\n      <div id=\"cs-map-container\">\n        <l-map\n          @click=\"handleMapClick($event.latlng)\"\n          @mousedown=\"handleMapMouseDown($event.latlng)\"\n          :center=\"mapCenter\"\n          :zoom=\"mapOptions.zoom\"\n          ref=\"csmap\">\n          <l-control class=\"leaflet-bar leaflet-control\" position=\"topleft\" >\n            <cs-track-upload-button v-if=\"editable\" @[TRACK_FILE_UPLOAD_EVENT]=\"handleFileUpload($event)\" />\n          </l-control>\n\n          <l-tile-layer :url=\"mapOptions.baseLayer\" />\n          <l-tile-layer :url=\"mapOptions.hikingOverlay\" layer-type=\"overlay\" :opacity=\"0.7\" />\n          <l-tile-layer :url=\"mapOptions.labelsOverlay\" layer-type=\"overlay\" />\n\n          <l-geo-json @ready=\"handleTrackReady($event)\" v-if=\"track\" :geojson=\"track\" :options=\"trackOptions.style.plain\" ref=\"cstrack\" />\n\n          <l-rectangle v-for=\"bbox in bboxes\" :key=\"bbox.id\" :bounds=\"bbox.bounds\" :l-style=\"bboxOptions.selected.style\" />\n\n                    <l-circle-marker\n                      @click=\"handleFeatureClick\"\n                      :color=\"markerOptions.style.plain.color\"\n                      :fill-color=\"markerOptions.style.plain.color\"\n                      :fill-opacity=\"markerOptions.style.plain.fillOpacity\"\n                      :latLng=\"f\"\n                      :radius=\"markerOptions.style.common.radius\"\n                      :weight=\"markerOptions.style.common.weight\"\n                      :key=\"index\"\n                      v-for=\"(f, index) in featuresWithoutHighlighted\">\n                    </l-circle-marker>\n\n                    <l-circle-marker\n                      v-if=\"highlightedLatLng\"\n                      @click=\"handleFeatureClick\"\n                      :color=\"markerOptions.style.highlighted.color\"\n                      :fill-color=\"markerOptions.style.highlighted.color\"\n                      :fill-opacity=\"markerOptions.style.highlighted.fillOpacity\"\n                      :latLng=\"highlightedLatLng\"\n                      :radius=\"markerOptions.style.common.radius\"\n                      :weight=\"markerOptions.style.common.weight\">\n                    </l-circle-marker>\n\n        </l-map>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.cs-map {\n  height: 100%;\n}\n\n#cs-map-container {\n  width: auto;\n  height: 100%;\n  position: relative;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsMap.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsMap.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CsMap.vue?vue&type=template&id=bb21ac24&scoped=true&\"\nimport script from \"./CsMap.vue?vue&type=script&lang=js&\"\nexport * from \"./CsMap.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CsMap.vue?vue&type=style&index=0&id=bb21ac24&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bb21ac24\",\n  null\n  \n)\n\nexport default component.exports","<script>\nimport CsEditor from '@/components/CsEditor.vue';\nimport CsMap from '@/components/CsMap.vue';\n\nexport default {\n  name: 'story-screen',\n  components: {\n    CsEditor,\n    CsMap,\n  },\n  data() {\n    return {\n      ready: false,\n    };\n  },\n  computed: {\n    editable() {\n      return this.$store.state.editable;\n    },\n  },\n  mounted() {\n    this.ready = this.$router.currentRoute.path === '/story/create';\n  },\n};\n</script>\n<template>\n  <div class=\"container-fluid story-form\">\n    <div style=\"height: 100vh;\" class=\"columns has-margin-0\">\n      <cs-map></cs-map>\n\n      <div style=\"display:flex; flex-direction: column; width: 100%;\">\n        <cs-editor v-if=\"$store.state.story.text || ready\"></cs-editor>\n      </div>\n      </div>\n    </div>\n</template>\n\n<style lang=\"scss\" scoped>\na[data-cs-lat] {\n  color: #F56C6C;\n  cursor: pointer;\n  text-decoration: underline;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StoryScreen.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StoryScreen.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StoryScreen.vue?vue&type=template&id=286468d7&scoped=true&\"\nimport script from \"./StoryScreen.vue?vue&type=script&lang=js&\"\nexport * from \"./StoryScreen.vue?vue&type=script&lang=js&\"\nimport style0 from \"./StoryScreen.vue?vue&type=style&index=0&id=286468d7&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"286468d7\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column is-6 is-offset-3\"},[_c('h1',{staticClass:\"title is-1 has-text-weight-normal has-text-centered has-mt-2\"},[_vm._v(\"Cartostory\")]),_c('div',{staticClass:\"card has-padding-1\"},[_c('div',{staticClass:\"card-content\"},[(_vm.availableStories.length > 0)?_c('b-field',{attrs:{\"label\":\"Nahrát příběh\"}},[_c('b-select',{attrs:{\"placeholder\":\"Příběh\",\"expanded\":\"\"},on:{\"input\":_vm.handleStorySelect}},_vm._l((_vm.availableStories),function(story){return _c('option',{key:story.name,domProps:{\"value\":story.name}},[_vm._v(_vm._s(story.name)+\"\\n            \")])}),0)],1):_vm._e(),_c('b-field',{attrs:{\"label\":\"URL příběhu\"}},[_c('b-input',{attrs:{\"type\":\"text\",\"expanded\":\"\"},model:{value:(_vm.storyUrl),callback:function ($$v) {_vm.storyUrl=$$v},expression:\"storyUrl\"}})],1),_c('b-button',{attrs:{\"disabled\":_vm.disabledSubmit,\"type\":\"is-primary\"},on:{\"click\":_vm.handleSubmit}},[_vm._v(\"Načíst\")])],1)])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport deburr from 'lodash.deburr';\nimport { mapState } from 'vuex';\n\nimport { UPDATE_ERRORS, UPDATE_LOADING, UPDATE_STORY_URL } from '@/store/mutations';\n\nexport default {\n  name: 'LoadStoryForm',\n  data() {\n    return {\n      currentStory: undefined,\n    };\n  },\n  computed: {\n    ...mapState({\n      availableStories: state => state.availableStories,\n      storyName: state => state.story.name,\n      storyText: state => state.story.text,\n    }),\n    disabledSubmit() {\n      return !this.storyUrl;\n    },\n    storyUrl: {\n      get() {\n        return this.$store.state.storyUrl;\n      },\n      set(value) {\n        this.$store.commit(UPDATE_STORY_URL, value);\n      },\n    },\n  },\n  methods: {\n    async handleSubmit() {\n      try {\n        await this.$store.dispatch('loadStory');\n        const title = deburr(this.storyName).toLowerCase();\n        this.$router.push(`/story/read/${title}`);\n      } catch (e) {\n        this.$store.commit(UPDATE_ERRORS, {\n          title: 'Příběh se nepodařilo nahrát',\n          message: 'Zkontrolujte jeho adresu.',\n        });\n      } finally {\n        this.$store.commit(UPDATE_LOADING, false);\n      }\n    },\n\n    handleStorySelect(storyName) {\n      const story = this.availableStories.find(s => s.name === storyName);\n\n      if (story) {\n        this.storyUrl = story.storyUrl;\n      }\n    },\n  },\n};\n</script>\n\n<template>\n  <div class=\"container\">\n    <div class=\"columns\">\n      <div class=\"column is-6 is-offset-3\">\n        <h1 class=\"title is-1 has-text-weight-normal has-text-centered has-mt-2\">Cartostory</h1>\n\n        <div class=\"card has-padding-1\">\n          <div class=\"card-content\">\n          <b-field v-if=\"availableStories.length > 0\" label=\"Nahrát příběh\">\n            <b-select placeholder=\"Příběh\" expanded @input=\"handleStorySelect\">\n              <option\n                v-for=\"story in availableStories\"\n                :key=\"story.name\"\n                :value=\"story.name\">{{story.name}}\n              </option>\n            </b-select>\n          </b-field>\n\n          <b-field label=\"URL příběhu\">\n            <b-input v-model=\"storyUrl\" type=\"text\" expanded></b-input>\n          </b-field>\n\n          <b-button :disabled=\"disabledSubmit\" type=\"is-primary\" @click=\"handleSubmit\">Načíst</b-button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoadStoryForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoadStoryForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LoadStoryForm.vue?vue&type=template&id=6706dcd3&scoped=true&\"\nimport script from \"./LoadStoryForm.vue?vue&type=script&lang=js&\"\nexport * from \"./LoadStoryForm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6706dcd3\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\nimport Router from 'vue-router';\n\nimport { UPDATE_EDITABLE, UPDATE_LOADING } from '@/store/mutations';\nimport store from '@/store/newStore';\nimport Landing from '@/views/Landing.vue';\nimport StoryScreen from '@/views/StoryScreen.vue';\nimport LoadStoryForm from './views/LoadStoryForm.vue';\n\nVue.use(Router);\n\nexport const routes = [\n  {\n    path: '/',\n    component: Landing,\n  },\n  {\n    path: '/story/read/:title',\n    component: StoryScreen,\n    beforeEnter(to, from, next) {\n      store.commit(UPDATE_EDITABLE, false);\n      if (store.state.storyUrl) {\n        next();\n      } else {\n        next('/story/load');\n      }\n    },\n  },\n  {\n    path: '/story/load',\n    component: LoadStoryForm,\n  },\n  {\n    path: '/story/create',\n    component: StoryScreen,\n    beforeEnter(to, from, next) {\n      store.commit(UPDATE_EDITABLE, true);\n      next();\n    },\n  },\n];\n\nconst router = new Router({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes,\n});\n\nrouter.beforeEach((to, from, next) =>  {\n  store.commit(UPDATE_LOADING, true);\n  next();\n});\n\nrouter.afterEach(() =>  {\n  store.commit(UPDATE_LOADING, false);\n});\n\nexport default router;\n","import Buefy from 'buefy'\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nimport VueLogger from 'vuejs-logger';\nimport VueScrollTo from 'vue-scrollto';\nimport 'normalize.css';\nimport './assets/scss/index.scss';\n\nimport App from './App.vue';\nimport router from './router';\nimport store from './store/newStore';\n\nrequire('../node_modules/leaflet/dist/leaflet.css');\n\nVue.config.productionTip = false;\nVue.use(Buefy);\nVue.use(VueLogger);\nVue.use(VueScrollTo);\nVue.use(Vuex);\n\nnew Vue({\n  store,\n  router,\n  render: h => h(App),\n}).$mount('#js-cartostory');\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Landing.vue?vue&type=style&index=0&id=40225d4e&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Landing.vue?vue&type=style&index=0&id=40225d4e&lang=scss&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuBubble.vue?vue&type=style&index=0&id=1c7012b5&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuBubble.vue?vue&type=style&index=0&id=1c7012b5&lang=scss&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StoryJson.vue?vue&type=style&index=0&id=4193dade&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StoryJson.vue?vue&type=style&index=0&id=4193dade&lang=scss&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsTrackUploadButton.vue?vue&type=style&index=0&id=6f11a710&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CsTrackUploadButton.vue?vue&type=style&index=0&id=6f11a710&lang=scss&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StoryScreen.vue?vue&type=style&index=0&id=286468d7&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StoryScreen.vue?vue&type=style&index=0&id=286468d7&lang=scss&scoped=true&\""],"sourceRoot":""}